<!DOCTYPE html>
<html>
<head>
    <title>Pokéclicker</title>
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta charset="utf-8"/>
    <link href="assets/images/favicon.ico" rel="icon" type="image/x-icon"/>
    <script type="text/html" id="pokemonListTemplate">
        <tr data-bind='ifnot: $data.breeding'>
            <td class="text-nowrap">
                <img class="smallImage"
                     data-bind="attr:{ src: PokemonHelper.getImage($data, App.game.party.alreadyCaughtPokemon($data.id, true)) }"
                     src=""/>
                <span data-bind="text: name">Name</span><sup data-bind="visible: App.game.party.alreadyCaughtPokemon($data.id, true)">✨</sup>
            </td>
            <td data-bind="text: attack">Atk</td>
            <td data-bind="text: level">Lvl</td>
        </tr>
    </script>
    <script>window.featureFlags = {};</script>

    <!--jQuery-->
    <script src="libs/jquery.min.js"></script>

    <!--Knockout-->
    <script src="libs/knockout-latest.js"></script>

    <!--Sortable-->
    <script src="libs/Sortable.min.js"></script>

    <!-- New module-based code from './modules' -->
    <script src="scripts/modules.min.js?v=0.5.7"></script>

    <!--Minified scripts-->
    <script src="scripts/script.min.js?v=0.5.7"></script>

    <!--Popper.js-->
    <script src="libs/popper.min.js"></script>

    <!--Bootstrap-->
    <link href="libs/bootstrap.min.css" rel="stylesheet">
    <script src="libs/bootstrap.min.js"></script>

    <!--Notify-->
    <script src="libs/bootstrap-notify.min.js"></script>

    <!--Motio-->
    <script src="libs/motio.js"></script>

    <!--Intro.js-->
    <script src="libs/intro.min.js"></script>
    <link href="libs/introjs.css" rel="stylesheet">
    <link href="libs/introjs-modern.css" rel="stylesheet">

    <!--Minified styles-->
    <link href="styles/styles.min.css?v=0.5.7" rel="stylesheet">

    <!-- Google Analytics-->
        <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-171657234-1"></script>
    <script>
        if (true) {
            window.dataLayer = window.dataLayer || [];

            function gtag() {
                dataLayer.push(arguments);
            }

            gtag('js', new Date());

            gtag('config', 'UA-171657234-1');
        }
    </script>

    <style>
        .loader {
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            width: 100vw;
            background-color: #79c9fa;
            background-size: cover;
            z-index: 9999;
        }

        .loader-wrapper {
            height: 100vh;
            width: 100vw;
            position: relative;
        }
    </style>

</head>
<body class="no-select" data-bind="class: 'no-select ' + Settings.getSetting('theme').observableValue() + ' ' + Settings.getSetting('backgroundImage').observableValue() ">
<div id="dynamic-background">
    <!-- Sky -->
    <div id="sky1" class="sky sky-0" style="opacity: 1;"></div>
    <div id="sky2" class="sky sky-1" style="opacity: 0;"></div>

    <!-- Sun & Moon -->
    <div id="orbital">
        <div id="sun" style="top: 570.474px; left: 1234.9px;"></div>
        <div id="moon" style="bottom: 595.351px; right: 1212.76px;"></div>
    </div>

    <!-- Ground -->
    <div id="ground1" class="ground ground-0" style="opacity: 1;"></div>
    <div id="ground2" class="ground ground-1" style="opacity: 0;"></div>

    <!-- Clouds -->
    <div class="cloud-container">
        <div id="clouds">
            <div class="cloud1 cloud1-0" id="cloud1One"></div>
        </div>
    </div>
</div>

<div id="toaster"></div>
<link href="https://bootswatch.com/4/yeti/bootstrap.min.css" rel="stylesheet" data-bind="attr: {href: 'https://bootswatch.com/4/' + Settings.getSetting('theme').observableValue() + '/bootstrap.min.css'}">

<!--$DEV_BANNER-->

<div class="loader" id="loader">
    <br>
    <div class="loader-wrapper">
        <div class="container">
            <div class="row">
                <div class="col-sm-6 offset-sm-3">
                    <img style="width:100%" src="assets/images/pokeclickerlogo.png">
                </div>
            </div>
        </div>
        <div class="loader-content">
            <img src="assets/images/pokeball/Pokeball.png" class="loader-pokeball"/>
            <div class="progress">
                <div id="preload-progress-bar" class="progress-bar bg-primary" role="progressbar" style="width:0%;">
                    <span id="preload-progress-text">Loading...</span>
                </div>
            </div>
        </div>
    </div>

</div>


<!-- Game menu-->
<div id="startMenu" class="dropdown clearfix" style="position:absolute; right:0; top:0; z-index: 100;">
    <button class="btn btn-secondary dropdown-toggle float-right" type="button" data-toggle="dropdown">
        Start Menu
        <span class="caret"></span>
    </button>
    <ul class="dropdown-menu dropdown-menu-right">
        <li>
            <a class="dropdown-item" href="#pokedexModal" data-toggle="modal">Pokédex</a>
        </li>
        <li>
            <a class="dropdown-item" href="#badgeCaseModal" data-toggle="modal">Badge Case</a>
        </li>
        <li>
            <button class="dropdown-item" href="#statisticsModal" data-toggle="modal">Statistics</button>
        </li>
        <li>
            <a class="dropdown-item" href="#achievementsModal" data-toggle="modal">Achievements</a>
        </li>
        <li>
            <a class="dropdown-item" href="#logBookModal" data-toggle="modal">Log Book</a>
        </li>
        <li data-bind="attr: {  title: App.game.shards.canAccess() ? '' : 'Progress further to unlock...'}">
            <a class="dropdown-item" href="#" data-bind="click:function(){App.game.shards.openShardModal()},
            attr: {class: App.game.shards.canAccess() ? 'dropdown-item' : 'dropdown-item disabled all-pointers'}">Shards</a>
        </li>
        <li>
            <a class="dropdown-item" href="#showItemsModal" data-toggle="modal">Items</a>
        </li>
        <li>
            <a class="dropdown-item" href="#settingsModal" data-toggle="modal">Settings</a>
        </li>
        <li>
            <a class="dropdown-item" href="#damageCalculatorModal" data-toggle="modal">Damage Calculator</a>
        </li>
        <li>
            <a class="dropdown-item" href="#saveModal" data-toggle="modal">Save</a>
        </li>
        <li>
            <a class="dropdown-item" href="#changelogModal" data-toggle="modal">Changelog</a>
        </li>
        <li>
            <a class="dropdown-item" href="#eventsModal" data-toggle="modal">Events</a>
        </li>
        <li>
            <a class="dropdown-item" href="https://pokeclicker.reddit.com" target="_blank">Subreddit</a>
        </li>
        <li>
            <a class="dropdown-item" href="https://discord.gg/a6DFe4p" target="_blank">Discord</a>
        </li>
        <li>
            <a class="dropdown-item" href="http://pokeclicker.miraheze.org/" target="_blank">Wiki</a>
        </li>
        <li>
            <a class="dropdown-item" href="https://github.com/pokeclicker/pokeclicker/issues" target="_blank">Report a bug</a>
        </li>

    </ul>
</div>


<!-- Get Keyitem modal-->
<div class="modal" id="keyItemModal" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
        <div class="modal-content" style="text-align: center">
            <div class="modal-header">
                <div style="width: 100%;">
                    <img src="assets/images/oak.png">
                    <h5 class="modal-title" id="keyItemModalLabel">New key item!</h5>
                </div>
            </div>
            <div class="modal-body">
                <h5><strong>Congratulations!</strong></h5>
                <span>You have gained a</span><br>
                <img class="key-item" src="" data-bind="attr:{ title: App.game.keyItems.itemList[KeyItemController.latestGainedItem].displayName,  src: 'assets/images/keyitems/' + KeyItems.KeyItem[KeyItemController.latestGainedItem] + '.png'}"/><br>
                <span>
                    <strong data-bind="text: App.game.keyItems.itemList[KeyItemController.latestGainedItem].displayName">Name</strong>
                </span><br>
                <span data-bind="html:  App.game.keyItems.itemList[KeyItemController.latestGainedItem].description">Description</span>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal" data-bind="click: App.game.keyItems.itemList[KeyItemController.latestGainedItem].unlockReward">Close</button>
            </div>
        </div>
    </div>
</div>


<!-- Show keyitems modal-->
<!-- Show Items modal-->
<div class="modal" id="showItemsModal" tabindex="-1" role="dialog"
     aria-labelledby="showItemModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
        <div class="modal-content" style="text-align: center">
            <div class="modal-header" style='justify-content: space-around;'>
                <h5 class="modal-title">Items</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <div class="modal-body p-0">
                <ul class="nav nav-tabs nav-fill">
                    <li class="nav-item"><a data-toggle='tab' class='nav-link active' href="#items">Evolution stones</a></li>
                    <li class='nav-item'><a data-toggle='tab' class='nav-link' href="#keyItems">Key Items</a></li>
                </ul>
                <div class="tab-content">
                    <div id="items" class="tab-pane active p-3">
                        <h3 data-bind="text: GameConstants.humanifyString(ItemHandler.stoneSelected())"></h3>
                        <div class="row justify-content-sm-center">
                            <div class="row col-lg-6 col-sm-10" data-bind="foreach: Object.keys(GameConstants.StoneType).filter(stone => isNaN(stone) && stone !== 'None')">
                                <div class="col-2" style="cursor: pointer"
                                        data-bind="css:{'item-selected': ItemHandler.stoneSelected() === $data},
                                            click: function(){ ItemHandler.stoneSelected($data); ItemHandler.pokemonSelected('')}">
                                    <img data-bind="attr: {src: 'assets/images/items/' + $data + '.png'}" style="max-width: 32px;">
                                    <div data-bind="text: player._itemList[$data]()"></div>
                                </div>
                            </div>
                        </div>


                        <div class="row justify-content-sm-center" >
                            <div class="row col-lg-10 col-md-12 offset-md-0 col-sm-12 offset-sm-0"
                                data-bind="foreach: PokemonHelper.getPokemonsWithEvolution(GameConstants.StoneType[ItemHandler.stoneSelected()])">
                                <div class="col-md-6 col-sm-10 col-lg-4 offset-sm-1 offset-md-0 offset-md-0 breedingListItem">
                                    <button class="btn btn-secondary smallButton list-group-item-action" style="padding-right:15px"
                                            data-bind="click: function() {ItemHandler.pokemonSelected(name)}, css:{ 'pokemon-selected': ItemHandler.pokemonSelected() === name}">
                                        <img class="smallImage" data-bind="attr:{src: 'assets/images/' + (App.game.party.alreadyCaughtPokemon($data.id, true) ? 'shiny' : '') + 'pokemon/' + id +'.png' }"/>
                                        <span data-bind="text: name" style="margin-left: 20px">Name</span>

                                        <span style="float:right; margin-top:8px" data-bind="template: { name: 'caughtStatusTemplate', data: {'status':
                                            PartyController.getEvolutionsCaughtStatus($data.id, GameConstants.StoneType[ItemHandler.stoneSelected()])
                                            }}"></span>
                                    </button>
                                </div>
                            </div>
                        </div>


                        <div class="row justify-content-center"
                             data-bind="template: { name:'multiOptionTemplate',
                                                    data: { observable: ItemHandler.amountSelected,
                                                            optionValues: [1,10,100,1000,Infinity]
                                                          }
                                                  }">
                        </div>
                        <p><i>Stops using evolution stones once a shiny is encountered</i></p>
                        <div class="row no-gutters justify-content-sm-center">
                            <div class="row justify-content-center" style="padding:15px;">
                                <button data-bind="click: function(){ItemHandler.useStones()}" class="btn btn-lg btn-success">Use evolution stones!</button>
                            </div>
                        </div>
                    </div>

                    <div id="keyItems" class="tab-pane p-3">
                        <div class="m-0">
                            <div class="row no-gutters justify-content-sm-center"
                                data-bind="foreach: App.game.keyItems.itemList">
                                <div class="col-2">
                                    <img class="clickable key-item" src=""
                                        data-bind="attr:{
                                        src: 'assets/images/keyitems/' + KeyItems.KeyItem[$data.name] + '.png'},
                                css: {'key-item-locked': !App.game.keyItems.hasKeyItem($data.name),
                                'key-item-selected': KeyItemController.inspectedItem == $data.name
                                },
                                event: {
                                    mouseover: function(){KeyItemController.hover($data.name)},
                                    mouseout : function(){KeyItemController.hoverRelease()}
                                    }">
                                </div>
                            </div>

                            <div class="oak-item-info">
                                <div class="row justify-content-sm-center">
                                    <div class="col-xs-10">
                                        <b><span data-bind="text: App.game.keyItems.itemList[KeyItemController.inspectedItem].displayName"></span></b>
                                    </div>
                                </div>
                                <div class="row justify-content-sm-center">
                                    <div class="col-xs-10">
                                        <knockout data-bind="if: App.game.keyItems.hasKeyItem(KeyItemController.inspectedItem)">
                                            <p data-bind="html: App.game.keyItems.itemList[KeyItemController.inspectedItem].description"></p>
                                        </knockout>
                                        <knockout data-bind="ifnot: App.game.keyItems.hasKeyItem(KeyItemController.inspectedItem)">
                                            <p>?????</p>
                                        </knockout>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>

</div>


<!--Templates -->
<script type="text/html" id="currencyTemplate">
    <span style="display: inline;">
        <!-- ko if: $data.currency == GameConstants.Currency.money -->
        <img alt="Money" src="assets/images/currency/money.png" data-bind="style: {height: $data.height || '24px', width: $data.width || $data.height || '24px'}"/>
        <!-- /ko -->
        <!-- ko if: $data.currency == GameConstants.Currency.dungeonToken -->
        <img alt="Dungeon Tokens" src="assets/images/currency/dungeonToken.png" data-bind="style: {height: $data.height || '24px', width: $data.width || $data.height || '24px'}"/>
        <!-- /ko -->
        <!-- ko if: $data.currency == GameConstants.Currency.questPoint -->
        <img alt="Quest Points" src="assets/images/currency/questPoint.png" data-bind="style: {height: $data.height || '24px', width: $data.width || $data.height || '24px'}"/>
        <!-- /ko -->
        <!-- ko if: $data.currency == GameConstants.Currency.diamond -->
        <img alt="Diamonds" src="assets/images/underground/diamond.svg" data-bind="style: {height: $data.height || '24px', width: $data.width || $data.height || '24px'}"/>
        <!-- /ko -->
        <!-- ko if: $data.currency == GameConstants.Currency.farmPoint -->
        <img alt="Farm Points" src="assets/images/currency/farmPoint.png" data-bind="style: {height: $data.height || '24px', width: $data.width || $data.height || '24px'}"/>
        <!-- /ko -->
        <!-- ko if: $data.currency == GameConstants.Currency.battlePoint -->
        <img alt="Battle Points" src="assets/images/currency/battlePoint.png" data-bind="style: {height: $data.height || '24px', width: $data.width || $data.height || '24px'}"/>
        <!-- /ko -->

        <span data-bind="text: ($data.reduced || ($data.amount > $data.reducedThreshold)) ? GameConstants.formatNumber($data.amount) : $data.amount.toLocaleString('en-US')">0</span>
    </span>
</script>

<script type="text/html" id="amountTemplate">
    <span data-bind="template: { name: 'currencyTemplate', data: {'amount': $data.amount, 'currency': $data.currency}}"></span>
</script>

<!-- Example usage -->
<!-- <span data-bind="template: { name: 'currencyTemplate', data: {'amount': FarmController.plotPrice(), 'currency': GameConstants.Currency.farmPoint}}"></span> -->

<script type="text/html" id="caughtStatusTemplate">
    <knockout style="display: inline;">
        <!-- ko if: $data.status == CaughtStatus.Caught -->
        <img title="You have captured this Pokémon!"
             class="pokeball-smallest"
             src="assets/images/pokeball/Pokeball-small.png"
        />
        <!-- /ko -->
        <!-- ko if: $data.status == CaughtStatus.CaughtShiny -->
        <img title="You have captured this Pokémon shiny!"
             class="pokeball-smallest"
             src="assets/images/pokeball/Pokeball-shiny-small.png"
        />
        <!-- /ko -->
    </knockout>
</script>

<!-- Example usage -->
<!-- <span data-bind="template: { name: 'caughtStatusTemplate', data: {'status': PartyController.getCaughtStatus(id)}}"></span> -->

<script type="text/html" id="eggSVGTemplate">
  <svg class="egg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 126.7 126.7" data-bind="attr: {'data-type1': PokemonType[$data.pokemonType1], 'data-type2': PokemonType[$data.pokemonType2]}">
    <defs>
      <filter id="b" width="1.193" height="1.123" x="-.096" y="-.061" color-interpolation-filters="sRGB">
        <feGaussianBlur stdDeviation=".402"/>
      </filter>
      <filter id="a" width="1.067" height="1.045" x="-.034" y="-.023" color-interpolation-filters="sRGB">
        <feGaussianBlur stdDeviation="1.168"/>
      </filter>
    </defs>
    <path class="egg-main" d="M111.5 76.2a48.2 47.7 0 11-96.3 0c0-26.3 21.5-74.7 48.1-74.7s48.2 48.4 48.2 74.7z"/>
    <g data-bind="html: BreedingController.getEggSpots($data.pokemon)"></g>
    <path fill-opacity=".1" d="M63.3 1.5s34.377 56.31 22.684 83.558c-11.693 27.25-58.004 25.939-58.004 25.939 37.3 33.053 83.737 5.438 83.52-33.997-.147-26.6-21.6-75.5-48.2-75.5z" filter="url(#a)"/>
    <path fill="#fff" fill-opacity=".3" d="M47.106 33.508a4.8 8 0 01-4.284 7.952 4.8 8 0 01-5.204-6.246 4.8 8 0 013.167-9.293 4.8 8 0 015.884 4.252" filter="url(#b)" transform="rotate(13.2 42.307 33.508)"/>
    <path fill="#111" d="M63.3 126.7A49.7 49.7 0 0113.7 77c0-14 5.6-33 14.3-48.5C38.3 10.1 50.8 0 63.3 0c12.5 0 25 10.1 35.4 28.5A109 109 0 01113 77a49.7 49.7 0 01-49.7 49.7zM63.3 3C48 3 36.3 20 30.6 30a105 105 0 00-14 47 46.7 46.7 0 0093.4 0c0-13.5-5.5-32-14-47C90.5 20 78.8 3 63.4 3z"/>
  </svg>
</script>

<script type="text/html" id="multiOptionTemplate">
    <div class="btn-group" data-bind="foreach: $data.optionValues">
        <button class="btn btn-secondary amount-button list-group-item-action"
                data-bind="click: function() {$parent.observable($data)},
                          text: $data,
                          css:{ 'pokemon-selected': $parent.observable() === $data}">
        </button>
    </div>
</script>

<div class="container">
    <div class="row justify-content-center">
        <!--The id title is needed for a default marker for money animation to display when not in a wild battle where the playerMoney span is not visible-->
        <h1 id="gameTitle">Pokéclicker</h1>
    </div>
    <div class="row justify-content-lg-center" style="text-align: center">

        <!--The next two divs switch around on large screens. This way, battle screen/map is on top on smaller screens-->
        <!--left column-->
        <div id="left-column" class="col-lg-3 col-md-6 order-lg-first">

            <!-- pokeball selector -->
            <div id="pokeballSelector" class="card sortable border-secondary mb-3" data-bind="visible: player.starter != GameConstants.Starter.None">
    <div class="card-header p-0" data-toggle="collapse" href="#pokeballSelectorBody">
        <span>Pokéballs</span>
    </div>
    <button type="button" class="btn btn-info"
            style="position: absolute; right: 0px; top: 0px; width: auto; height: 41px; padding: 4px;"
            data-bind="tooltip: { title: 'Select which Pokéball to use on Pokémon depending on their status', trigger: 'hover', placement:'left' }">
        ?
    </button>
    <div id="pokeballSelectorBody" class="card-body p-0 show table-responsive">
        <table class="table table-sm m-0">
            <thead>
                <tr>
                    <th width="20%" data-toggle="tooltip" title="Previously captured Pokémon will use this ball selection">Caught</th>
                    <th width="20%" data-toggle="tooltip" title="Previously captured Shiny Pokémon will use this ball selection">✨</th>
                    <th width="20%" data-toggle="tooltip" title="Uncaptured Pokémon will use this ball selection">New</th>
                    <th width="20%" data-toggle="tooltip" title="Uncaptured Shiny Pokémon will use this ball selection">✨</th>
                </tr>
                <tr>
                    <td data-bind="template: {name: 'selectedPokeballDisplayTemplate', data: { 'value': App.game.pokeballs.alreadyCaughtSelection, 'field': App.game.pokeballs._alreadyCaughtSelection, 'title': 'Already Caught Pokemon'}}"></td>
                    <td data-bind="template: {name: 'selectedPokeballDisplayTemplate', data: { 'value': App.game.pokeballs.alreadyCaughtShinySelection, 'field': App.game.pokeballs._alreadyCaughtShinySelection, 'title': 'Already Caught Shiny Pokemon'}}"></td>
                    <td data-bind="template: {name: 'selectedPokeballDisplayTemplate', data: { 'value': App.game.pokeballs.notCaughtSelection, 'field': App.game.pokeballs._notCaughtSelection, 'title': 'New Pokemon'}}"></td>
                    <td data-bind="template: {name: 'selectedPokeballDisplayTemplate', data: { 'value': App.game.pokeballs.notCaughtShinySelection, 'field': App.game.pokeballs._notCaughtShinySelection, 'title': 'New Shiny Pokemon'}}"></td>
                </tr>
                <tr>
                    <td data-bind="template: {name: 'selectedPokeballCountTemplate', data: App.game.pokeballs.getBallQuantity(App.game.pokeballs.alreadyCaughtSelection)}"></td>
                    <td data-bind="template: {name: 'selectedPokeballCountTemplate', data: App.game.pokeballs.getBallQuantity(App.game.pokeballs.alreadyCaughtShinySelection)}"></td>
                    <td data-bind="template: {name: 'selectedPokeballCountTemplate', data: App.game.pokeballs.getBallQuantity(App.game.pokeballs.notCaughtSelection)}"></td>
                    <td data-bind="template: {name: 'selectedPokeballCountTemplate', data: App.game.pokeballs.getBallQuantity(App.game.pokeballs.notCaughtShinySelection)}"></td>
                </tr>
            </thead>
        </table>
    </div>

    <script type="text/html" id="selectedPokeballDisplayTemplate">
        <img class="pokeball-small clickable pokeball-selected" 
            data-bind="attr: {src: 'assets/images/pokeball/' + GameConstants.Pokeball[$data.value] + ($data.value < 0 ? '.png' : '-small.png')}, click: function() {App.game.pokeballs.selectedSelection($data.field); App.game.pokeballs.selectedTitle($data.title); $('#pokeballSelectorModal').modal('show')}"/>
    </script>

    <script type="text/html" id="selectedPokeballCountTemplate">
        <span data-bind="text: $data ? GameConstants.formatNumber($data) : '-', tooltip: $data && {title: $data.toLocaleString('en-US'), trigger: 'hover', animation: false}"></span>
    </script>
</div>


            <!-- Battle Item container-->
            <div id="battleItemContainer" class="card sortable border-secondary mb-3">
    <div class="card-header p-0" data-toggle="collapse" href="#battleItemContainerBody">
      <span>Battle Items</span>
    </div>
    <button type="button" class="btn btn-sm btn-primary" 
            style="position: absolute; right: 0px; top: 0px; width: auto; height: 41px;" 
            data-bind="text: ItemHandler.multipliers[ItemHandler.multIndex()]"
            onclick="ItemHandler.incrementMultiplier()"
            oncontextmenu="ItemHandler.decrementMultiplier(); return false"
            title="Controls"
            data-toggle="popover"
            data-html="true"
            data-content="Left/right click to cycle amount<br/>Click on item image to use"
            data-placement="right"
            data-trigger="hover">1
    </button>
    <div id="battleItemContainerBody" class="card-body p-0 show">
      <table class="table table-bordered m-0">
        <tbody>
          <tr data-bind="foreach: Object.keys(ItemList).filter(i=>ItemList[i].constructor.name == 'BattleItem')">
            <td class="amount p-0" data-bind="text: GameHelper.formatAmount(player.itemList[$data]())"></td>
          </tr>
          <tr data-bind="foreach: Object.keys(ItemList).filter(i=>ItemList[i].constructor.name == 'BattleItem')">
            <td class="p-0" data-bind="attr: {
                                disabled: !player.itemList[$data]()
                            },
                            css: {
                                'bg-primary': EffectEngineRunner.getEffect($data) > 5,
                                'bg-warning': EffectEngineRunner.getEffect($data) <= 5 && EffectEngineRunner.getEffect($data) > 0,
                                'bg-secondary': !EffectEngineRunner.isActive($data)()
                            },
                            event: {
                                click: function(){ItemHandler.useItem($data)}
                            },
                            tooltip: {
                              title: $data.replace('_', ' ') + '<br/>' + ItemList[$data].description,
                              trigger: 'hover',
                              placement:'bottom',
                              html: true
                            }">
                <img src="" class="clickable" data-bind="attr: { src: 'assets/images/items/' + $data + '.png' }" width="26px">

            </td>
          </tr>
          <tr data-bind="foreach: Object.keys(ItemList).filter(i=>ItemList[i].constructor.name == 'BattleItem')">
            <td class="text-light p-0">
              <!-- ko if: EffectEngineRunner.getEffect($data) > 0 -->
                <code data-bind="text: player.effectTimer[$data]()"></code>
              <!-- /ko -->
            </td>
          </tr>
        </tbody>
      </table>
    </div>

</div>


            <!-- Pokemon List container-->
            <div id="pokemonListContainer" class="card sortable border-secondary mb-3" data-bind="visible: player.starter != GameConstants.Starter.None">
    <div class="card-header p-0" data-toggle="collapse" href="#pokemonListBody">
        <span>Pokémon List</span>
    </div>
    <div id="pokemonListBody" class="card-body p-0 show table-responsive">
        <div data-bind="template: { name: 'PartySortSettingTemplate', data: Settings.getSetting('partySort')}"></div>

        <table id="pokemonList" class="table table-striped table-hover table-sm m-0">
            <thead>

            <tr>
                <th>Name</th>
                <th>Atk</th>
                <th>Lvl</th>
            </tr>
            </thead>
            <tbody data-bind="template: { name: 'pokemonListTemplate', foreach: PartyController.getSortedList() }">

            </tbody>
        </table>
    </div>

    <script type="text/html" id="PartySortSettingTemplate">
        <div class="row no-gutters" style="align-items: center">
            <div class="col-2">Sort:</div>
            <select class="col-9" onchange="Settings.setSettingByName(this.name, SortOptions[SortOptions[this.value]])"
                    data-bind="foreach: $data.options, attr: {name}">
                <option data-bind="text: $data.text, value: $data.value, attr:{ selected: $parent.observableValue() == $data.value}"></option>
            </select>
            <div class="col-1">
                <label for="partySortDirection" class="clickable" style="font-size: 24px;" data-bind="text: Settings.getSetting('partySortDirection').observableValue() ? '⥄' : '⥂'">⥂</label>
                <input id="partySortDirection" style="vertical-align: middle" class="hidden" type='checkbox'
                       data-bind="checked: Settings.getSetting('partySortDirection').observableValue()"
                       onchange="Settings.setSettingByName('partySortDirection', this.checked)"/>
            </div>
        </div>
    </script>
</div>


        </div>

        <!--Middle column-->
        <div id="middle-column" class="col-lg-6 col-md-12 order-md-first">
            <div id="middle-top-sort-column">
                <!-- Achievement Tracker -->
                <div
  id="achivementTrackerContainer"
  class="card sortable border-secondary mb-3"
  data-bind="visible: App.game.achievementTracker.canAccess()"
>
  <div class="card-header p-0" data-toggle="collapse" href="#achievementTrackerBody">
    <span style="text-align: center">Achievement Tracker</span>
  </div>
  <button
    class="btn btn-sm btn-primary"
    style="position: absolute; right: 0px; top: 0px; width: auto; height: 41px;"
    data-toggle="modal"
    href="#achievementsModal"
  >
    List
  </button>
  <div
    id="achievementTrackerBody"
    class="card-body show p-0"
  >
    <!-- ko if: !App.game.achievementTracker.hasTrackedAchievement() -->
    <div
      class="clickable table-warning text-light p-2"
      href="#achievementsModal"
      data-toggle="modal"
    >
      Select an achievement to track!
    </div>
    <!-- /ko -->

    <!-- ko if: App.game.achievementTracker.hasTrackedAchievement()-->
    <table class="table table-sm m-0">
      <tbody>
        <tr>
          <td colspan="2" data-bind="text: App.game.achievementTracker.trackedAchievement().description">
            Achievement Description
          </td>
        </tr>
        <tr>
          <td class="p-0">
            <div class="progress p-0">
              <div
                class="progress-bar bg-primary"
                role="progressbar"
                aria-valuemin="0"
                aria-valuemax="100"
                data-bind="attr:{ style: 'width:' + App.game.achievementTracker.trackedAchievement().getProgressPercentage() + '%'}, css: {
                           'bg-success': App.game.achievementTracker.trackedAchievement().isCompleted(),
                           'bg-primary': !App.game.achievementTracker.trackedAchievement().isCompleted()
                         }">
                <span data-bind="text: App.game.achievementTracker.trackedAchievement().getProgressText">0 / 1000</span>
              </div>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
    <!-- /ko -->
  </div>
 </div>

            </div>

            <div id="battleContainer" class="card sortable-disabled border-secondary mb-3">

                <div class="card-header p-0" data-bind="visible: (App.game.gameState === GameConstants.GameState.fighting ||
                                     App.game.gameState === GameConstants.GameState.dungeon ||
                                     App.game.gameState === GameConstants.GameState.paused ||
                                     App.game.gameState === GameConstants.GameState.town ||
                                     App.game.gameState === GameConstants.GameState.shop ||
                                     App.game.gameState === GameConstants.GameState.gym ||
                                     App.game.gameState == GameConstants.GameState.battleFrontier)">
                    <table width="100%">
                        <tr>
                            <td width="33.33%">
                                <span style="display: inline;">
                                    <img title="Money" src="assets/images/currency/money.png" height="25px">
                                    <span id="playerMoney" data-bind="text: App.game.wallet.currencies[GameConstants.Currency.money].toLocaleString('en-US')">0</span>
                                </span>
                            </td>
                            <td width="33.33%">
                                <span style="display: inline;">
                                    <img title="Dungeon Tokens&#013;&#010;Gained by capturing Pokémon" src="assets/images/currency/dungeonToken.png" height="25px">
                                    <span id="playerMoneyDungeon" data-bind="text: App.game.wallet.currencies[GameConstants.Currency.dungeonToken].toLocaleString('en-US')">0</span>
                                </span>
                            </td>
                            <td width="33.33%">
                                <span style="display: inline;">
                                    <img title="Quest points" src="assets/images/currency/questPoint.png" height="25px">
                                    <span id="playerMoneyQuest" data-bind="text: App.game.wallet.currencies[GameConstants.Currency.questPoint].toLocaleString('en-US')">0</span>
                                </span>
                            </td>
                        </tr>
                    </table>
                </div>

                <!--RouteBattleView-->
                <!--Use the base battle layout for fighting, dungeons and battle frontier.-->

                <div class="battle-view card-body p-0 justify-content-center no-gutters no-select"
                    data-bind="if: (App.game.gameState === GameConstants.GameState.fighting || App.game.gameState === GameConstants.GameState.dungeon || App.game.gameState === GameConstants.GameState.paused || App.game.gameState === GameConstants.GameState.town || App.game.gameState === GameConstants.GameState.gym || App.game.gameState == GameConstants.GameState.battleFrontier),
                        class: MapHelper.calculateBattleCssClass()">

                    <!-- Route Battles -->
                    <div class="row justify-content-center no-gutters" data-bind="if: App.game.gameState === GameConstants.GameState.fighting">
                        <div class="col no-gutters clickable" data-bind="click: function() {Battle.clickAttack()}" style="height: 220px; display: block;">
                            <h2 class="pageItemTitle" style="display: block;">

                                <!-- ko if: App.game.statistics.routeKills[player.route()]() < GameConstants.ROUTE_KILLS_NEEDED -->
                                <knockout class="right" data-bind="text: App.game.statistics.routeKills[player.route()]() + ' / ' + GameConstants.ROUTE_KILLS_NEEDED">0/10</knockout>
                                <!-- /ko -->

                                <knockout class="left">
                                    Route <knockout data-bind="text: player.route">number</knockout>
                                    <!--If all Pokémon on the route are caught-->
                                    <knockout data-bind="if: (!RouteHelper.routeCompleted(player.route(), player.region, true) && RouteHelper.routeCompleted(player.route(), player.region, false))">
                                        <img title="You have captured all Pokémon on this route!" class="pokeball-smallest"
                                             src="assets/images/pokeball/Pokeball-small.png"/>
                                    </knockout>

                                    <!--If all Pokémon on the route are caught shiny-->
                                    <knockout data-bind="if: RouteHelper.routeCompleted(player.route(), player.region, true)">
                                        <img title="You have captured all Pokémon shiny on this route!" class="pokeball-smallest"
                                             src="assets/images/pokeball/Pokeball-shiny-small.png"/>
                                    </knockout>
                                </knockout>

                                <knockout>
                                    <knockout data-bind="text: Battle.enemyPokemon().name">Pokemon name</knockout>
                                    <knockout data-bind="template: { name: 'caughtStatusTemplate', data: {'status': PartyController.getCaughtStatus(Battle.enemyPokemon().id)}}"></knockout>
                                </knockout>

                            </h2>

                            <div>
                                <div data-bind="ifnot: Battle.catching">
                                    <img class="enemy"
                                         data-bind="attr:{ src: PokemonHelper.getImage(Battle.enemyPokemon(), Battle.enemyPokemon().shiny) }"
                                         src=""/>
                                </div>
                                <div data-bind="if: Battle.catching" class="catchChance">
                                    <img class="pokeball-animated"
                                         data-bind="attr:{ src: 'assets/images/pokeball/' + GameConstants.Pokeball[Battle.pokeball()] + '.png' }"
                                         src=""/>
                                    <br>
                                    Catch Chance:
                                    <knockout data-bind="text: Battle.catchRateActual() + '%'">Catch Rate</knockout>
                                </div>
                            </div>
                            <div class="progress hitpoints" style="height: 20px;">
                                <div class="progress-bar bg-danger" role="progressbar"
                                     data-bind="attr:{ style: 'width:' + Battle.enemyPokemon().healthPercentage() + '%' }"
                                     aria-valuemin="0" aria-valuemax="100">
                                     <span data-bind="text: Battle.enemyPokemon().health() + ' / ' + Battle.enemyPokemon().maxHealth()" style="font-size: 12px;"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Dungeon Battles -->
                    <div class="row justify-content-center no-gutters" data-bind="if: App.game.gameState === GameConstants.GameState.dungeon">
                        <div class="col no-gutters clickable" style="height: 220px; display: block;"
                            data-bind="click: function() {
                              if (DungeonRunner.fighting() && !DungeonBattle.catching()) {
                                DungeonBattle.clickAttack();
                              } else if (DungeonRunner.map.currentTile().type() === GameConstants.DungeonTile.chest) {
                                DungeonRunner.openChest();
                              } else if (DungeonRunner.map.currentTile().type() === GameConstants.DungeonTile.boss && !DungeonRunner.fightingBoss()) {
                                DungeonRunner.startBossFight();
                              }
                            }">
                            <h2 class="pageItemTitle" style="display: block;">
                                <knockout data-bind="if: DungeonBattle.enemyPokemon() && DungeonBattle.enemyPokemon().health()">
                                    <knockout data-bind="text: DungeonBattle.enemyPokemon().name">Pokemon name</knockout>
                                    <knockout data-bind="template: { name: 'caughtStatusTemplate', data: {'status': PartyController.getCaughtStatus(DungeonBattle.enemyPokemon().id)}}"></knockout>
                                </knockout>
                                <knockout data-bind="if: !DungeonBattle.enemyPokemon() || !DungeonBattle.enemyPokemon().health()">
                                    &nbsp;
                                </knockout>

                                <knockout class="left">
                                    <knockout data-bind="text: DungeonRunner.dungeon.name()">Dungeon name</knockout>

                                    <!--If all Pokémon in the dungeon are caught-->
                                    <knockout data-bind="if: (!DungeonRunner.dungeonCompleted(DungeonRunner.dungeon, true) && DungeonRunner.dungeonCompleted(DungeonRunner.dungeon, false))">
                                        <img title="You have captured all Pokémon on this route!" class="pokeball-smallest"
                                             src="assets/images/pokeball/Pokeball-small.png"/>
                                    </knockout>

                                    <!--If all Pokémon in the dungeon are caught shiny-->
                                    <knockout data-bind="if: DungeonRunner.dungeonCompleted(DungeonRunner.dungeon, true)">
                                        <img title="You have captured all Pokémon shiny on this route!"
                                             class="pokeball-smallest"
                                             src="assets/images/pokeball/Pokeball-shiny-small.png"/>
                                    </knockout>
                                </knockout>

                                <knockout class="right" data-bind="css: { 'text-danger': DungeonRunner.timeLeftSeconds() < 20, 'text-primary': DungeonRunner.timeLeftSeconds() >= 20 }">
                                    <h4><strong data-bind="text: DungeonRunner.timeLeftSeconds() + 's'"></strong></h4>
                                </knockout>

                                <div class="progress timer">
                                    <div class="progress-bar bg-danger" role="progressbar"
                                         data-bind="attr:{ style: 'width:' + DungeonRunner.timeLeftPercentage() + '%' },
                                         css: { 'bg-danger': DungeonRunner.timeLeftSeconds() < 20, 'bg-primary': DungeonRunner.timeLeftSeconds() >= 20 }"
                                         aria-valuemin="0" aria-valuemax="100">
                                         <span data-bind="text: DungeonRunner.timeLeftSeconds() + 's'" style="font-size: 12px;"></span>
                                    </div>
                                </div>
                            </h2>

                            <!-- ko if: (DungeonRunner.fighting() || DungeonBattle.catching)  -->
                            <div data-bind="if: DungeonBattle.enemyPokemon">
                                <div>
                                    <div data-bind="ifnot: DungeonBattle.catching">
                                        <img class="enemy"
                                             data-bind="attr:{ src: PokemonHelper.getImage(DungeonBattle.enemyPokemon(), DungeonBattle.enemyPokemon().shiny) }"
                                             src=""/>
                                    </div>
                                    <div data-bind="if: DungeonBattle.catching" class="catchChance">
                                        <img class="pokeball-animated"
                                             data-bind="attr:{ src: 'assets/images/pokeball/' + GameConstants.Pokeball[DungeonBattle.pokeball()] + '.png' }"
                                             src=""/>
                                        <br>
                                        Catch Chance:
                                        <knockout data-bind="text: DungeonBattle.catchRateActual() + '%'">Catch Rate</knockout>
                                    </div>
                                </div>
                                <div class="progress hitpoints" style="height: 20px;">
                                    <div class="progress-bar bg-danger" role="progressbar"
                                         data-bind="attr:{ style: 'width:' + DungeonBattle.enemyPokemon().healthPercentage() + '%'}, css: { 'healthbar-boss': DungeonRunner.fightingBoss(), 'bg-danger': !DungeonRunner.fightingBoss()}"
                                         aria-valuemin="0" aria-valuemax="100">
                                         <span data-bind="text: DungeonBattle.enemyPokemon().health() + ' / ' + DungeonBattle.enemyPokemon().maxHealth()" style="font-size: 12px;"></span>
                                    </div>
                                </div>
                            </div>
                            <!-- /ko -->
                            <!-- ko if: DungeonRunner.map.currentTile().type() === GameConstants.DungeonTile.chest -->
                            <div>
                                <img class="dungeon-chest" src="assets/images/dungeons/chest.png"/>
                            </div>
                            <!-- /ko -->
                            <!-- ko if: (DungeonRunner.map.currentTile().type() === GameConstants.DungeonTile.boss && !DungeonRunner.fightingBoss()) -->
                            <div>
                                <button class="btn btn-danger dungeon-boss-button">Start Bossfight</button>
                            </div>
                            <!-- /ko -->
                        </div>
                    </div>

                    <!-- Gym Battles -->
                    
<div class="row justify-content-center no-gutters" data-bind="if: App.game.gameState === GameConstants.GameState.gym">
    <div class="col no-gutters clickable" data-bind="click: function() {GymBattle.clickAttack()}" style="height: 220px; display: block;">
        <h2 class="pageItemTitle" style="display: block;">

            <knockout class="left">
                <knockout data-bind="text: GymBattle.gym.leaderName.replace(/\d/g,'')"></knockout>
            </knockout>

            <knockout>
                <knockout data-bind="text: GymBattle.enemyPokemon().name">Pokemon name</knockout>
            </knockout>
            
            <knockout class="right">
                <span data-bind="foreach: new Array(GymBattle.pokemonsDefeatedComputable())">
                    <img src="assets/images/pokeball/Pokeball-small.png" class="pokeball-smallest pokeball-defeated"/>
                </span>
                <span data-bind="foreach: new Array(GymBattle.pokemonsUndefeatedComputable())">
                    <img src="assets/images/pokeball/Pokeball-small.png" class="pokeball-smallest"/>
                </span>
            </knockout>

            <div class="progress timer">
                <div class="progress-bar bg-danger" role="progressbar"
                     data-bind="attr:{ style: 'width:' + GymRunner.timeLeftPercentage() + '%' },
                     css: { 'bg-danger': GymRunner.timeLeftSeconds() < 10, 'bg-primary': GymRunner.timeLeftSeconds() >= 10 }"
                     aria-valuemin="0" aria-valuemax="100">
                     <span data-bind="text: GymRunner.timeLeftSeconds() + 's'" style="font-size: 12px;"></span>
                </div>
            </div>
        </h2>

        <div id="gymCountdown">
          <div class="row" style="display: inline-block; vertical-align: middle;">
            <div class="col-sm-6 offset-sm-3">
              <img style="width:100%" id="gymGo" src="assets/gifs/go.gif">
            </div>
          </div>
        </div>

        <div>
            <img class="enemy" data-bind="attr:{ src: PokemonHelper.getImage(GymBattle.enemyPokemon(), GymBattle.enemyPokemon().shiny) }" src=""/>
            <!-- TODO: put this image somewhere
            <img height="56px" id="gymLeader" src="" data-bind="attr:{ src: 'assets/images/gymLeaders/' + GymBattle.gym.leaderName + '.png'}">
            -->
        </div>

        <div class="progress hitpoints" style="height: 20px;">
            <div class="progress-bar bg-danger" role="progressbar"
                    data-bind="attr:{ style: 'width:' + GymBattle.enemyPokemon().healthPercentage() + '%' }"
                    aria-valuemin="0" aria-valuemax="100">
                <span data-bind="text: GymBattle.enemyPokemon().health() + ' / ' + GymBattle.enemyPokemon().maxHealth()" style="font-size: 12px;"></span>
            </div>
        </div>
    </div>
</div>


                    <!-- Battle Frontier Battles -->
                    
<div class="row justify-content-center no-gutters" data-bind="if: App.game.gameState == GameConstants.GameState.battleFrontier">
    <div class="col no-gutters" data-bind="if: BattleFrontierBattle.enemyPokemon" style="height: 220px; display: block;">
        <h2 class="pageItemTitle" style="display: block;">

            <knockout class="left">
                Stage <knockout data-bind="text: BattleFrontierRunner.stage">0</knockout>
            </knockout>

            <knockout>
                <knockout data-bind="text: BattleFrontierBattle.enemyPokemon().name">Pokemon name</knockout>
            </knockout>

            <knockout class="right" data-bind="html: BattleFrontierRunner.pokemonLeftImages">
            </knockout>

            <div class="progress timer">
                <div class="progress-bar bg-danger" role="progressbar"
                        data-bind="attr:{ style: 'width:' + BattleFrontierRunner.timeLeftPercentage() + '%' },
                        css: { 'bg-danger': BattleFrontierRunner.timeLeftSeconds() < 20, 'bg-primary': BattleFrontierRunner.timeLeftSeconds() >= 20 }"
                        aria-valuemin="0" aria-valuemax="100">
                        <span data-bind="text: BattleFrontierRunner.timeLeftSeconds() + 's'" style="font-size: 12px;"></span>
                </div>
            </div>

        </h2>

        <div>
            <img class="enemy"
                    data-bind="attr:{ src: PokemonHelper.getImage(BattleFrontierBattle.enemyPokemon(), BattleFrontierBattle.enemyPokemon().shiny) }"
                    src=""/>
        </div>
        <div class="progress hitpoints" style="height: 20px;">
            <div class="progress-bar bg-danger" role="progressbar"
                    data-bind="attr:{ style: 'width:' + BattleFrontierBattle.enemyPokemon().healthPercentage() + '%' }"
                    aria-valuemin="0" aria-valuemax="100">
                    <span data-bind="text: BattleFrontierBattle.enemyPokemon().health() + ' / ' + BattleFrontierBattle.enemyPokemon().maxHealth()" style="font-size: 12px;"></span>
            </div>
        </div>
    </div>
</div>

                    <!--TownView-->
                    <knockout data-bind="if: App.game.gameState === GameConstants.GameState.town">
<div id="townView" data-bind="style: { backgroundImage: 'url(\'assets/images/towns/' + player.town().name() + '.png\')' }"
     class="justify-content-center no-gutters no-select">
    <div class="row justify-content-center no-gutters">
        <div class="col no-gutters">
            <button type="button" class="btn btn-outline-info" style="float: right;"
            data-bind="visible: player.town().gym() || player.town().shop(), tooltip: { title: 'In towns you can battle gymleaders to earn badges, or visit shops to buy items.', trigger: 'hover', placement:'left' }">?</button>
            <button type="button" class="btn btn-outline-info" style="float: right;"
            data-bind="visible: player.town() instanceof DungeonTown, tooltip: { title: 'Capture Pokémon to gain Dungeon Tokens in order to battle dungeons.', trigger: 'hover', placement:'left' }">?</button>
            <h2 class="pageItemTitle">
              <knockout data-bind="text: player.town().name()">Town Name</knockout>

              <knockout data-bind="if: player.town() instanceof DungeonTown && player.town().dungeon()">
                  <!--If all Pokémon in the dungeon are caught-->
                  <knockout data-bind="if: (!DungeonRunner.dungeonCompleted(player.town().dungeon(), true) && DungeonRunner.dungeonCompleted(player.town().dungeon(), false))">
                      <img title="You have captured all Pokémon on this route!" class="pokeball-smallest"
                           src="assets/images/pokeball/Pokeball-small.png"/>
                  </knockout>

                  <!--If all Pokémon in the dungeon are caught shiny-->
                  <knockout data-bind="if: DungeonRunner.dungeonCompleted(player.town().dungeon(), true)">
                      <img title="You have captured all Pokémon shiny on this route!"
                           class="pokeball-smallest"
                           src="assets/images/pokeball/Pokeball-shiny-small.png"/>
                  </knockout>
              </knockout>
            </h2>
        </div>
    </div>
    <div class="row no-gutters">
       <div class="col-3 no-gutters">
           <div class="list-group" data-bind="if: player.town() instanceof PokemonLeague">
              <!-- ko foreach: player.town().gymList -->
                   <button
                           data-bind="text: $data.leaderName.replace(/\d/g,''),
                                      disable: !Gym.isUnlocked($data),
                                      click: function() {GymRunner.startGym($data)},
                                      attr: { class: Gym.calculateCssClass($data)}">
                       E4 Leader
                   </button>
               <!-- /ko -->
           </div>
           <div class="list-group">
               <button data-bind="visible: player.town().gym, attr: { class: player.town().gym() ? Gym.calculateCssClass(player.town().gym()) : '' }"
                       onclick="GymRunner.startGym(player.town().gym())">
                   Gym
               </button>
               <a class="btn btn-secondary" href="#shopModal" data-bind="visible: player.town().shop" data-toggle="modal" onclick="ShopHandler.showShop(player.town().shop())">Shop</a>
               <button class="btn btn-warning"
                       href="#nextRegionModal" data-toggle="modal"
                       data-bind="visible: MapHelper.ableToTravel() && GameConstants.StartingTowns.includes(player.town().name()), text: `Travel to ${GameConstants.camelCaseToString(GameConstants.Region[player.highestRegion() + 1])}`">
                     Travel To Next Region
               </button>
               <button class="btn btn-info" onclick="MapHelper.openShipModal();" data-bind="visible: player.highestRegion() > 0 && GameConstants.DockTowns.includes(player.town().name())">
                     Dock
               </button>
               <button class="btn btn-secondary p-0"
                       onclick="DungeonRunner.initializeDungeon(player.town().dungeon())"
                       data-bind="visible: player.town() instanceof DungeonTown, if: player.town().dungeon(), attr: { class: player.town().dungeon() && App.game.wallet.currencies[GameConstants.Currency.dungeonToken] >= player.town().dungeon().tokenCost ? 'btn btn-success p-0' : 'btn btn-secondary p-0' }">
                   Start<br/>
                   <span data-bind="template: { name: 'currencyTemplate', data: {'amount': player.town().dungeon().tokenCost, 'currency': GameConstants.Currency.dungeonToken}}"></span>
               </button>
               <button class="btn btn-secondary"
                       onclick="MapHelper.moveToTown(player.town().dungeon().name())"
                       data-bind="visible: player.town().dungeon() && (!(player.town() instanceof DungeonTown) && player.town() instanceof Town), if: player.town().dungeon()">
                   <span data-bind="text: player.town().dungeon().name()"></span>
               </button>
               <button class="btn btn-primary"
                       onclick="BattleFrontier.enter()"
                       data-bind="visible: player.town().name() == 'Battle Frontier'">
                   Enter Battle Frontier
               </button>
           </div>
       </div>
       <div class="col-6"></div>
       <div class="col-3 no-gutters">
           <div class="list-group" data-bind="foreach: player.town().npcs()">
                <button class="btn btn-info"
                        data-bind="text: $data.name, click: $data.openDialog">
                    NPC
                </button>
           </div>
        </div>

    </div>
    <div style="flex-grow: 1;"></div>
    <knockout data-bind="if: (player.town().dungeon() && player.town() instanceof DungeonTown)">
      <div id="dungeonPokemonList" class="card">
        <!--Display all available Pokémon in this dungeon-->
        <ul class="list-inline"
          data-bind="foreach: player.town().dungeon().allPokemonNames">
          <li class="list-inline-item">
            <img class="dungeon-pokemon-preview" src=""
                data-bind="attr:{ src: 'assets/images/' + (App.game.party.alreadyCaughtPokemonByName($data, true) ? 'shiny' : '') + 'pokemon/' + pokemonMap[$data].id + '.png' }, css: { 'dungeon-pokemon-locked': !App.game.party.alreadyCaughtPokemonByName($data) }"/>
            <sup style="float:right; top:10px;" data-bind="visible: App.game.party.alreadyCaughtPokemonByName($data, true)">✨</sup>
          </li>
        </ul>
      </div>
    </knockout>
</div>
</knockout>

                </div>


                <!-- Display Pokemon Attack, Click Attack damge values-->
                <div class="card-footer p-0" data-bind="hidden: App.game.gameState === GameConstants.GameState.town">
                    <table width="100%">
                        <tr>
                            <!-- ko ifnot: App.game.gameState === GameConstants.GameState.battleFrontier -->
                            <td width="50%">
                              <span style="display: inline;">Pokémon Attack:
                                  <span data-bind="text: App.game.party.pokemonAttackObservable().toLocaleString('en-US')"></span>
                              </span>
                            </td>
                            <td width="50%">
                              <span style="display: inline;">Click Attack:
                                  <span data-bind="text: App.game.party.calculateClickAttack().toLocaleString('en-US')"></span>
                              </span>
                            </td>
                            <!-- /ko -->
                            <!-- ko if: App.game.gameState === GameConstants.GameState.battleFrontier -->
                            <td width="100%">
                                <span style="display: inline;">Pokémon Attack:
                                    <span data-bind="text: App.game.party.calculatePokemonAttack(PokemonType.None, PokemonType.None, true).toLocaleString('en-US');"></span>
                                </span>
                            </td>
                            <!-- /ko -->
                        </tr>
                    </table>
                </div>
            </div>

            <!-- ko if: App.game.gameState === GameConstants.GameState.dungeon -->
            <div id="dungeonMap" class="card sortable-disabled border-secondary mb-3 dungeon no-select">
                <div class="card-header p-0">
                    <span data-bind="text: DungeonRunner.dungeon.name()"></span>
                </div>
                <div class="card-body p-0 text-center">
                    <table class="dungeon-board">
                      <tbody data-bind="foreach: DungeonRunner.map.board()">
                        <tr data-bind="foreach: $data">
                            <td data-bind=" click: function(){DungeonRunner.map.moveToCoordinates($context.$index(), $parentContext.$index()) }, attr: { class: $data.cssClass}"></td>
                        </tr>
                      </tbody>
                    </table>
                </div>
            </div>
            <!-- /ko -->

            <!-- Battle Frontier Information Container  -->
            
<!-- ko if: App.game.gameState === GameConstants.GameState.battleFrontier -->
<div id="battleFrontierInformation" class="card sortable-disabled border-secondary mb-3 battle-frontier no-select">
    <div class="card-header p-0">
        <span>Battle Frontier</span>
    </div>
    <!-- ko ifnot: BattleFrontierRunner.started -->
    <div class="card-body text-center">
        <h5>Welcome to the Battle Frontier!</h5>
        <p>
            Here you will be battling through many stages to earn Battle Points.<br/>
            But be aware, if you leave early, You will not earn anything.<br/>
            You'll get special items if you reach special milestone stages.<br/>
            When you are ready, click Start!<br/>
            <i>Note: there is no click damage in the Battle Frontier</i>
        </p>
        <a class="btn btn-block btn-success text-light" onclick="BattleFrontierRunner.start()">Start</a>
        <a class="btn btn-block btn-danger text-light" onclick="BattleFrontier.leave()">Leave</a>
    </div>
    <!-- /ko -->
    <!-- ko if: BattleFrontierRunner.started -->
    <div class="card-body text-center p-0">
        <table class="table table-hover table-striped table-bordered table-sm m-0">
            <thead>
                <tr>
                    <th colspan="2">Upcoming Rewards</th>
                </tr>
                <tr>
                    <th>Stage</th>
                    <th class="text-left">Reward</th>
                </tr>
            </thead>
            <tbody data-bind="foreach: BattleFrontierMilestones.availableMilestones().slice(0, 4)">
                <tr>
                    <th class="tight" data-bind="text: $data.stage"></td>
                    <td class="text-left"><knockout data-bind="text: $data.description"></knockout> <knockout data-bind="if: $data.image"><img data-bind="attr:{ src: $data.image }" src="" width="20px" /></knockout></td>
                </tr>
            </tbody>
        </table>
        <a class="btn btn-block btn-danger text-light" onclick="BattleFrontierRunner.battleQuit()">Quit Battle</a>
    </div>
    <!-- /ko -->
</div>
<!-- /ko -->

            <div id="middle-bottom-sort-column">
                <div id="townMap" class="card sortable border-secondary mb-3" data-bind="visible: App.game.keyItems.hasKeyItem(KeyItems.KeyItem.Town_map) && (App.game.gameState === GameConstants.GameState.fighting || App.game.gameState === GameConstants.GameState.gym || App.game.gameState === GameConstants.GameState.town||
                    App.game.gameState === GameConstants.GameState.shop || App.game.gameState === GameConstants.GameState.farm || App.game.gameState === GameConstants.GameState.paused)">
                    <div class="card-header p-0" data-toggle="collapse" href="#mapBody">
                        <span data-bind="text: `Town Map (${GameConstants.camelCaseToString(GameConstants.Region[player.region])})`">Town Map</span>
                    </div>
                    <div id="mapBody" class="card-body p-0 show">
                        <p id="mapTooltip" class="btn btn-secondary" style="visibility: hidden;"></p>
                        <svg id="map" viewBox="0 0 1600 960" preserveAspectRatio="xMaxYMax meet">
                            <defs>
                                <lineargradient id="mx-gradient-f8cecc-1-ea583b-1-s-0" x1="0%" x2="0%" y1="0%"
                                                y2="100%">
                                    <stop offset="0%" style="stop-color:#909090"></stop>
                                    <stop offset="100%" style="stop-color:#c1c1c1"></stop>
                                </lineargradient>
                                <lineargradient id="mx-gradient-dae8fc-1-7ea6e0-1-s-0" x1="0%" x2="0%" y1="0%"
                                                y2="100%">
                                    <stop offset="0%" style="stop-color:#DAE8FC"></stop>
                                    <stop offset="100%" style="stop-color:#7EA6E0"></stop>
                                </lineargradient>
                            </defs>

                            <g data-bind='if: player.region == GameConstants.Region.kanto'>
    <image width="100%" xlink:href="assets/images/kanto.png"></image>

    <!-- ------ -->
    <!-- ROUTES -->
    <!-- ------ -->

    <!--Route 1-->
    

<g

    transform="rotate(90 ,304, 528)"

    data-bind="click:function(){ MapHelper.moveToRoute(1, 0); } ">
    <rect data-route='1'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(1, 0) }"
        height="48"
        width="104"
        x="304" y="480">
    </rect>

    <text style="font-size: 32px" x="348" y="514">1</text>

</g>


    <!--Route 2-->
    

<g

    transform="rotate(90 ,304, 416)"

    data-bind="click:function(){ MapHelper.moveToRoute(2, 0); } ">
    <rect data-route='2'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(2, 0) }"
        height="48"
        width="48"
        x="304" y="368">
    </rect>

    <text style="font-size: 32px" x="320" y="402">2</text>

</g>

     <!--Extra bit of Route 2-->
     

<g

    data-bind="click:function(){ MapHelper.moveToRoute(2, 0); } ">
    <rect data-route='2'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(2, 0) }"
        height="16"
        width="48"
        x="304" y="352">
    </rect>

</g>

      <!--Extra bit of Route 2-->
      

<g

    data-bind="click:function(){ MapHelper.moveToRoute(2, 0); } ">
    <rect data-route='2'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(2, 0) }"
        height="32"
        width="48"
        x="304" y="272">
    </rect>

</g>


    <!--Route 3-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(3, 0); } ">
    <rect data-route='3'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(3, 0) }"
        height="48"
        width="192"
        x="352" y="224">
    </rect>

    <text style="font-size: 32px" x="440" y="258">3</text>

</g>

     <!--Extra bit of Route 3-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(3, 0); } ">
    <rect data-route='3'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(3, 0) }"
        height="32"
        width="64"
        x="544" y="240">
    </rect>

</g>


    <!--Route 4-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(4, 0); } ">
    <rect data-route='4'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(4, 0) }"
        height="48"
        width="320"
        x="624" y="176">
    </rect>

    <text style="font-size: 32px" x="776" y="210">4</text>

</g>

     <!--Extra bit of Route 4-->
     

<g

    data-bind="click:function(){ MapHelper.moveToRoute(4, 0); } ">
    <rect data-route='4'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(4, 0) }"
        height="16"
        width="64"
        x="560" y="176">
    </rect>

</g>


    <!--Route 5-->
    

<g

    transform="rotate(90 ,960, 272)"

    data-bind="click:function(){ MapHelper.moveToRoute(5, 0); } ">
    <rect data-route='5'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(5, 0) }"
        height="48"
        width="64"
        x="960" y="224">
    </rect>

    <text style="font-size: 32px" x="984" y="258">5</text>

</g>

     <!--Extra bit of Route 5-->
    

<g

    transform="rotate(90 ,960, 224)"

    data-bind="click:function(){ MapHelper.moveToRoute(5, 0); } ">
    <rect data-route='5'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(5, 0) }"
        height="48"
        width="12.8"
        x="960" y="176">
    </rect>

</g>


    <!--Route 6-->
    

<g

    transform="rotate(90 ,960, 400)"

    data-bind="click:function(){ MapHelper.moveToRoute(6, 0); } ">
    <rect data-route='6'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(6, 0) }"
        height="48"
        width="112"
        x="960" y="352">
    </rect>

    <text style="font-size: 32px" x="1008" y="386">6</text>

</g>


    <!--Route 7-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(7, 0); } ">
    <rect data-route='7'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(7, 0) }"
        height="48"
        width="208"
        x="1008" y="352">
    </rect>

    <text style="font-size: 32px" x="1104" y="386">7</text>

</g>


    <!--Route 8-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(8, 0); } ">
    <rect data-route='8'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(8, 0) }"
        height="48"
        width="144"
        x="800" y="352">
    </rect>

    <text style="font-size: 32px" x="864" y="386">8</text>

</g>


    <!--Route 9-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(9, 0); } ">
    <rect data-route='9'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(9, 0) }"
        height="48"
        width="224"
        x="1008" y="176">
    </rect>

    <text style="font-size: 32px" x="1112" y="210">9</text>

</g>


    <!--Route 10-->
    

<g

    transform="rotate(90 ,1232, 272)"

    data-bind="click:function(){ MapHelper.moveToRoute(10, 0); } ">
    <rect data-route='10'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(10, 0) }"
        height="48"
        width="64"
        x="1232" y="224">
    </rect>

    <text style="font-size: 32px" x="1248" y="258">10</text>

</g>

     <!--Extra bit of Route 10-->
    

<g

    transform="rotate(90 ,1232, 192)"

    data-bind="click:function(){ MapHelper.moveToRoute(10, 0); } ">
    <rect data-route='10'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(10, 0) }"
        height="48"
        width="32"
        x="1232" y="144">
    </rect>

</g>


    <!--Route 11-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(11, 0); } ">
    <rect data-route='11'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(11, 0) }"
        height="48"
        width="144"
        x="1008" y="528">
    </rect>

    <text style="font-size: 32px" x="1064" y="562">11</text>

</g>

     <!--Extra bit of Route 11-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(11, 0); } ">
    <rect data-route='11'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(11, 0) }"
        height="16"
        width="48"
        x="1152" y="560">
    </rect>

</g>

    <!--Extra bit of Route 11-->
   

<g

    data-bind="click:function(){ MapHelper.moveToRoute(11, 0); } ">
    <rect data-route='11'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(11, 0) }"
        height="48"
        width="32"
        x="1200" y="528">
    </rect>

</g>


    <!--Route 12-->
    

<g

    transform="rotate(90 ,1232, 400)"

    data-bind="click:function(){ MapHelper.moveToRoute(12, 0); } ">
    <rect data-route='12'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(12, 0) }"
        height="48"
        width="128"
        x="1232" y="352">
    </rect>

    <text style="font-size: 32px" x="1280" y="386">12</text>

</g>


    <!--Route 13-->
    

<g

    transform="rotate(90 ,1232, 528)"

    data-bind="click:function(){ MapHelper.moveToRoute(13, 0); } ">
    <rect data-route='13'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(13, 0) }"
        height="48"
        width="176"
        x="1232" y="480">
    </rect>

    <text style="font-size: 32px" x="1304" y="514">13</text>

</g>


    <!--Route 14-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(14, 0); } ">
    <rect data-route='14'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(14, 0) }"
        height="48"
        width="160"
        x="1072" y="656">
    </rect>

    <text style="font-size: 32px" x="1136" y="690">14</text>

</g>


    <!--Route 15-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(15, 0); } ">
    <rect data-route='15'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(15, 0) }"
        height="48"
        width="192"
        x="880" y="720">
    </rect>

    <text style="font-size: 32px" x="960" y="754">15</text>

</g>

     <!--Extra bit of Route 15-->
     

<g

    data-bind="click:function(){ MapHelper.moveToRoute(15, 0); } ">
    <rect data-route='15'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(15, 0) }"
        height="16"
        width="48"
        x="1024" y="704">
    </rect>

</g>


    <!--Route 16-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(16, 0); } ">
    <rect data-route='16'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(16, 0) }"
        height="48"
        width="240"
        x="496" y="352">
    </rect>

    <text style="font-size: 32px" x="600" y="386">16</text>

</g>


    <!--Route 17-->
    

<g

    transform="rotate(90 ,496, 400)"

    data-bind="click:function(){ MapHelper.moveToRoute(17, 0); } ">
    <rect data-route='17'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(17, 0) }"
        height="48"
        width="320"
        x="496" y="352">
    </rect>

    <text style="font-size: 32px" x="640" y="386">17</text>

</g>


    <!--Route 18-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(18, 0); } ">
    <rect data-route='18'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(18, 0) }"
        height="48"
        width="320"
        x="496" y="720">
    </rect>

    <text style="font-size: 32px" x="640" y="754">18</text>

</g>


    <!--Route 19-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(19, 0); } ">
    <rect data-route='19'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(19, 0) }"
        height="48"
        width="256"
        x="624" y="832">
    </rect>

    <text style="font-size: 32px" x="736" y="866">19</text>

</g>

    <!--Extra bit of Route 19-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(19, 0); } ">
    <rect data-route='19'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(19, 0) }"
        height="64"
        width="48"
        x="832" y="768">
    </rect>

</g>

     <!--Extra bit of Route 19-->
     

<g

    data-bind="click:function(){ MapHelper.moveToRoute(19, 0); } ">
    <rect data-route='19'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(19, 0) }"
        height="16"
        width="64"
        x="560" y="864">
    </rect>

</g>


    <!--Route 20-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(20, 0); } ">
    <rect data-route='20'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(20, 0) }"
        height="48"
        width="208"
        x="352" y="832">
    </rect>

    <text style="font-size: 32px" x="440" y="866">20</text>

</g>


    <!--Route 21-->
    

<g

    transform="rotate(90 ,304, 704)"

    data-bind="click:function(){ MapHelper.moveToRoute(21, 0); } ">
    <rect data-route='21'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(21, 0) }"
        height="48"
        width="112"
        x="304" y="656">
    </rect>

    <text style="font-size: 32px" x="344" y="690">21</text>

</g>


    <!--Route 22-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(22, 0); } ">
    <rect data-route='22'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(22, 0) }"
        height="48"
        width="128"
        x="160" y="480">
    </rect>

    <text style="font-size: 32px" x="208" y="514">22</text>

</g>


    <!--Route 23-->
    

<g

    transform="rotate(90 ,160, 256)"

    data-bind="click:function(){ MapHelper.moveToRoute(23, 0); } ">
    <rect data-route='23'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(23, 0) }"
        height="48"
        width="224"
        x="160" y="208">
    </rect>

    <text style="font-size: 32px" x="256" y="242">23</text>

</g>

    <!--Extra bit of Route 23-->
    

<g

    transform="rotate(90 ,160, 128)"

    data-bind="click:function(){ MapHelper.moveToRoute(23, 0); } ">
    <rect data-route='23'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(23, 0) }"
        height="48"
        width="48"
        x="160" y="80">
    </rect>

</g>


    <!--Route 24-->
    

<g

    transform="rotate(90 ,960, 96)"

    data-bind="click:function(){ MapHelper.moveToRoute(24, 0); } ">
    <rect data-route='24'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(24, 0) }"
        height="48"
        width="64"
        x="960" y="48">
    </rect>

    <text style="font-size: 32px" x="976" y="82">24</text>

</g>


    <!--Route 25-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(25, 0); } ">
    <rect data-route='25'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(25, 0) }"
        height="48"
        width="192"
        x="960" y="48">
    </rect>

    <text style="font-size: 32px" x="1040" y="82">25</text>

</g>





    <!-- ----- -->
    <!-- TOWNS -->
    <!-- ----- -->

    <!--Pallet Town-->
    

<rect class="city"
    data-town="Pallet Town" 
    x="288"
    y="632"
    height="72"
    width="80"
    data-bind="
        click:function(){MapHelper.moveToTown('Pallet Town')},
        attr: { class: MapHelper.calculateTownCssClass('Pallet Town') },
        
            css: { flash: MapHelper.ableToTravel() }
        ">
</rect>

     <!--Viridian City-->
     

<rect class="city"
    data-town="Viridian City" 
    x="288"
    y="464"
    height="64"
    width="64"
    data-bind="
        click:function(){MapHelper.moveToTown('Viridian City')},
        attr: { class: MapHelper.calculateTownCssClass('Viridian City') },
        ">
</rect>

    <!--Pewter City-->
    

<rect class="city"
    data-town="Pewter City" 
    x="288"
    y="208"
    height="64"
    width="64"
    data-bind="
        click:function(){MapHelper.moveToTown('Pewter City')},
        attr: { class: MapHelper.calculateTownCssClass('Pewter City') },
        ">
</rect>

     <!--Cerulean City-->
     

<rect class="city"
    data-town="Cerulean City" 
    x="944"
    y="160"
    height="64"
    width="64"
    data-bind="
        click:function(){MapHelper.moveToTown('Cerulean City')},
        attr: { class: MapHelper.calculateTownCssClass('Cerulean City') },
        ">
</rect>

    <!--Vermillion City-->
    

<rect class="city"
    data-town="Vermillion City" 
    x="944"
    y="512"
    height="64"
    width="64"
    data-bind="
        click:function(){MapHelper.moveToTown('Vermillion City')},
        attr: { class: MapHelper.calculateTownCssClass('Vermillion City') },
        ">
</rect>

     <!--Lavender Town-->
     

<rect class="city"
    data-town="Lavender Town" 
    x="1216"
    y="336"
    height="64"
    width="64"
    data-bind="
        click:function(){MapHelper.moveToTown('Lavender Town')},
        attr: { class: MapHelper.calculateTownCssClass('Lavender Town') },
        ">
</rect>

    <!--Celadon City-->
    

<rect class="city"
    data-town="Celadon City" 
    x="736"
    y="336"
    height="64"
    width="64"
    data-bind="
        click:function(){MapHelper.moveToTown('Celadon City')},
        attr: { class: MapHelper.calculateTownCssClass('Celadon City') },
        ">
</rect>

    <!--Saffron City-->
    

<rect class="city"
    data-town="Saffron City" 
    x="944"
    y="336"
    height="64"
    width="64"
    data-bind="
        click:function(){MapHelper.moveToTown('Saffron City')},
        attr: { class: MapHelper.calculateTownCssClass('Saffron City') },
        ">
</rect>

    <!--Fuchsia City-->
    

<rect class="city"
    data-town="Fuchsia City" 
    x="816"
    y="704"
    height="64"
    width="64"
    data-bind="
        click:function(){MapHelper.moveToTown('Fuchsia City')},
        attr: { class: MapHelper.calculateTownCssClass('Fuchsia City') },
        ">
</rect>

    <!--Cinnabar Island-->
    

<rect class="city"
    data-town="Cinnabar Island" 
    x="288"
    y="816"
    height="64"
    width="64"
    data-bind="
        click:function(){MapHelper.moveToTown('Cinnabar Island')},
        attr: { class: MapHelper.calculateTownCssClass('Cinnabar Island') },
        ">
</rect>

    <!--Indigo Plateau Kanto-->
    

<rect class="city"
    data-town="Indigo Plateau Kanto" 
    x="96"
    y="0"
    height="128"
    width="176"
    data-bind="
        click:function(){MapHelper.moveToTown('Indigo Plateau Kanto')},
        attr: { class: MapHelper.calculateTownCssClass('Indigo Plateau Kanto') },
        ">
</rect>




    <!-- -------- -->
    <!-- DUNGEONS -->
    <!-- -------- -->

    <!--Viridian Forest-->
    

<rect class="city"
    data-town="Viridian Forest" 
    x="288"
    y="368"
    height="48"
    width="64"
    data-bind="click:function(){MapHelper.moveToTown('Viridian Forest')},
        attr: { class: MapHelper.calculateTownCssClass('Viridian Forest') }">
</rect>

    <!--Digletts Cave-->
    

<rect class="city"
    data-town="Digletts Cave" 
    x="288"
    y="304"
    height="48"
    width="64"
    data-bind="click:function(){MapHelper.moveToTown('Digletts Cave')},
        attr: { class: MapHelper.calculateTownCssClass('Digletts Cave') }">
</rect>

    <!--Mt. Moon-->
    

<rect class="city"
    data-town="Mt. Moon" 
    x="544"
    y="192"
    height="48"
    width="80"
    data-bind="click:function(){MapHelper.moveToTown('Mt. Moon')},
        attr: { class: MapHelper.calculateTownCssClass('Mt. Moon') }">
</rect>

    <!--Rock Tunnel-->
    

<rect class="city"
    data-town="Rock Tunnel" 
    x="1232"
    y="144"
    height="48"
    width="64"
    data-bind="click:function(){MapHelper.moveToTown('Rock Tunnel')},
        attr: { class: MapHelper.calculateTownCssClass('Rock Tunnel') }">
</rect>

    <!--Power Plant-->
    

<rect class="city"
    data-town="Power Plant" 
    x="1232"
    y="224"
    height="48"
    width="64"
    data-bind="click:function(){MapHelper.moveToTown('Power Plant')},
        attr: { class: MapHelper.calculateTownCssClass('Power Plant') }">
</rect>

    <!--Pokemon Tower-->
    

<rect class="city"
    data-town="Pokemon Tower" 
    x="1280"
    y="272"
    height="128"
    width="64"
    data-bind="click:function(){MapHelper.moveToTown('Pokemon Tower')},
        attr: { class: MapHelper.calculateTownCssClass('Pokemon Tower') }">
</rect>
    <!--Pokemon Tower Extension-->
    

<rect class="city"
    data-town="Pokemon Tower" 
    x="1296"
    y="256"
    height="16"
    width="32"
    data-bind="click:function(){MapHelper.moveToTown('Pokemon Tower')},
        attr: { class: MapHelper.calculateTownCssClass('Pokemon Tower') }">
</rect>

    <!--Seafoam Islands-->
    

<rect class="city"
    data-town="Seafoam Islands" 
    x="560"
    y="816"
    height="48"
    width="64"
    data-bind="click:function(){MapHelper.moveToTown('Seafoam Islands')},
        attr: { class: MapHelper.calculateTownCssClass('Seafoam Islands') }">
</rect>

    <!--Pokemon Mansion-->
    

<rect class="city"
    data-town="Pokemon Mansion" 
    x="208"
    y="800"
    height="80"
    width="80"
    data-bind="click:function(){MapHelper.moveToTown('Pokemon Mansion')},
        attr: { class: MapHelper.calculateTownCssClass('Pokemon Mansion') }">
</rect>

    <!--Victory Road-->
    

<rect class="city"
    data-town="Victory Road" 
    x="144"
    y="176"
    height="80"
    width="80"
    data-bind="click:function(){MapHelper.moveToTown('Victory Road')},
        attr: { class: MapHelper.calculateTownCssClass('Victory Road') }">
</rect>

    <!--Cerulean Cave-->
    

<rect class="city"
    data-town="Cerulean Cave" 
    x="880"
    y="128"
    height="32"
    width="80"
    data-bind="click:function(){MapHelper.moveToTown('Cerulean Cave')},
        attr: { class: MapHelper.calculateTownCssClass('Cerulean Cave') }">
</rect>
     <!--Cerulean Cave Extension-->
     

<rect class="city"
    data-town="Cerulean Cave" 
    x="880"
    y="160"
    height="16"
    width="64"
    data-bind="click:function(){MapHelper.moveToTown('Cerulean Cave')},
        attr: { class: MapHelper.calculateTownCssClass('Cerulean Cave') }">
</rect>




    <!-- ------------------ -->
    <!-- PLACES OF INTEREST -->
    <!-- ------------------ -->

    

<rect class="city"
    data-town="Pokemon Day Care" 
    x="960"
    y="236.8"
    height="35.2"
    width="48"
    data-bind="click:function(){BreedingController.openBreedingModal()}, attr: { class: App.game.breeding.canAccess() ? &#39;city unlockedTown&#39; : &#39;city lockedTown&#39; }">
</rect>

    

<rect class="city"
    data-town="Safari Zone" 
    x="832"
    y="640"
    height="64"
    width="48"
    data-bind="click:function(){Safari.openModal()}, attr: { class: Safari.canAccess() ? &#39;city unlockedTown&#39; : &#39;city lockedTown&#39; }">
</rect>

    

<rect class="city"
    data-town="Underground Entrance" 
    x="1152"
    y="496"
    height="64"
    width="48"
    data-bind="click:function(){Underground.openUndergroundModal()}, attr: { class: Underground.canAccess() ? &#39;city unlockedTown&#39; : &#39;city lockedTown&#39; }">
</rect>

    

<rect class="city"
    data-town="Farm" 
    x="1024"
    y="656"
    height="48"
    width="48"
    data-bind="click:function(){FarmController.openFarmModal()}, attr: { class: App.game.farming.canAccess() ? &#39;city unlockedTown&#39; : &#39;city lockedTown&#39; }">
</rect>

    

<rect class="city"
    data-town="Dock" 
    x="880"
    y="544"
    height="32"
    width="64"
    data-bind="click:function(){MapHelper.openShipModal()}, css:{ unlockedTown: player.highestRegion() &gt;= 1}">
</rect>
</g>

                            <g data-bind='if: player.region == GameConstants.Region.johto'>
    <image width="100%" xlink:href="assets/images/johto.png"></image>

    <!-- ------ -->
    <!-- ROUTES -->
    <!-- ------ -->

    <!--Route 27-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(27, 1); } ">
    <rect data-route='27'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(27, 1) }"
        height="48"
        width="304"
        x="1232" y="672">
    </rect>

    <text style="font-size: 32px" x="1368" y="706">27</text>

</g>


    <!--Route 26-->
    

<g

    transform="rotate(90 ,1488, 176)"

    data-bind="click:function(){ MapHelper.moveToRoute(26, 1); } ">
    <rect data-route='26'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(26, 1) }"
        height="48"
        width="496"
        x="1488" y="128">
    </rect>

    <text style="font-size: 32px" x="1720" y="162">26</text>

</g>


    <!--Route 28-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(28, 1); } ">
    <rect data-route='28'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(28, 1) }"
        height="48"
        width="192"
        x="1296" y="528">
    </rect>

    <text style="font-size: 32px" x="1376" y="562">28</text>

</g>


    <!--Route 29-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(29, 1); } ">
    <rect data-route='29'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(29, 1) }"
        height="48"
        width="288"
        x="864" y="672">
    </rect>

    <text style="font-size: 32px" x="992" y="706">29</text>

</g>


    <!--Route 30-->
    

<g

    transform="rotate(90 ,816, 352)"

    data-bind="click:function(){ MapHelper.moveToRoute(30, 1); } ">
    <rect data-route='30'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(30, 1) }"
        height="48"
        width="304"
        x="816" y="304">
    </rect>

    <text style="font-size: 32px" x="952" y="338">30</text>

</g>


    <!--Route 31-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(31, 1); } ">
    <rect data-route='31'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(31, 1) }"
        height="48"
        width="144"
        x="720" y="304">
    </rect>

    <text style="font-size: 32px" x="776" y="338">31</text>

</g>


    <!--Route 32-->
    

<g

    transform="rotate(90 ,672, 464)"

    data-bind="click:function(){ MapHelper.moveToRoute(32, 1); } ">
    <rect data-route='32'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(32, 1) }"
        height="48"
        width="288"
        x="672" y="416">
    </rect>

    <text style="font-size: 32px" x="800" y="450">32</text>

</g>

     <!--Extra bit of Route 32-->
     

<g

    transform="rotate(90 ,672, 352)"

    data-bind="click:function(){ MapHelper.moveToRoute(32, 1); } ">
    <rect data-route='32'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(32, 1) }"
        height="48"
        width="48"
        x="672" y="304">
    </rect>

</g>

      <!--Extra bit of Route 32-->
      

<g

    transform="rotate(90 ,672, 816)"

    data-bind="click:function(){ MapHelper.moveToRoute(32, 1); } ">
    <rect data-route='32'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(32, 1) }"
        height="48"
        width="64"
        x="672" y="768">
    </rect>

</g>


    <!--Route 33-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(33, 1); } ">
    <rect data-route='33'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(33, 1) }"
        height="48"
        width="208"
        x="512" y="880">
    </rect>

    <text style="font-size: 32px" x="600" y="914">33</text>

</g>


    <!--Route 34-->
    

<g

    transform="rotate(90 ,384, 656)"

    data-bind="click:function(){ MapHelper.moveToRoute(34, 1); } ">
    <rect data-route='34'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(34, 1) }"
        height="48"
        width="144"
        x="384" y="608">
    </rect>

    <text style="font-size: 32px" x="440" y="642">34</text>

</g>

     <!--Extra bit of Route 34-->
     

<g

    transform="rotate(90 ,384, 848)"

    data-bind="click:function(){ MapHelper.moveToRoute(34, 1); } ">
    <rect data-route='34'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(34, 1) }"
        height="48"
        width="80"
        x="384" y="800">
    </rect>

</g>

      <!--Extra bit of Route 34-->
      

<g

    transform="rotate(90 ,432, 880)"

    data-bind="click:function(){ MapHelper.moveToRoute(34, 1); } ">
    <rect data-route='34'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(34, 1) }"
        height="16"
        width="48"
        x="432" y="864">
    </rect>

</g>


    <!--Route 35-->
    

<g

    transform="rotate(90 ,384, 352)"

    data-bind="click:function(){ MapHelper.moveToRoute(35, 1); } ">
    <rect data-route='35'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(35, 1) }"
        height="48"
        width="152"
        x="384" y="304">
    </rect>

    <text style="font-size: 32px" x="444" y="338">35</text>

</g>


    <!--Route 36-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(36, 1); } ">
    <rect data-route='36'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(36, 1) }"
        height="48"
        width="272"
        x="384" y="304">
    </rect>

    <text style="font-size: 32px" x="504" y="338">36</text>

</g>


    <!--Route 37-->
    

<g

    transform="rotate(90 ,528, 208)"

    data-bind="click:function(){ MapHelper.moveToRoute(37, 1); } ">
    <rect data-route='37'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(37, 1) }"
        height="48"
        width="96"
        x="528" y="160">
    </rect>

    <text style="font-size: 32px" x="560" y="194">37</text>

</g>


    <!--Route 38-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(38, 1); } ">
    <rect data-route='38'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(38, 1) }"
        height="48"
        width="224"
        x="288" y="160">
    </rect>

    <text style="font-size: 32px" x="384" y="194">38</text>

</g>


    <!--Route 39-->
    

<g

    transform="rotate(90 ,240, 160)"

    data-bind="click:function(){ MapHelper.moveToRoute(39, 1); } ">
    <rect data-route='39'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(39, 1) }"
        height="48"
        width="144"
        x="240" y="112">
    </rect>

    <text style="font-size: 32px" x="296" y="146">39</text>

</g>


    <!--Route 40-->
    

<g

    transform="rotate(90 ,176, 368)"

    data-bind="click:function(){ MapHelper.moveToRoute(40, 1); } ">
    <rect data-route='40'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(40, 1) }"
        height="48"
        width="160"
        x="176" y="320">
    </rect>

    <text style="font-size: 32px" x="240" y="354">40</text>

</g>


    <!--Route 41-->
    

<g

    transform="rotate(90 ,176, 528)"

    data-bind="click:function(){ MapHelper.moveToRoute(41, 1); } ">
    <rect data-route='41'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(41, 1) }"
        height="48"
        width="96"
        x="176" y="480">
    </rect>

    <text style="font-size: 32px" x="208" y="514">41</text>

</g>

     <!--Extra bit of Route 41-->
     

<g

    transform="rotate(90 ,176, 624)"

    data-bind="click:function(){ MapHelper.moveToRoute(41, 1); } ">
    <rect data-route='41'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(41, 1) }"
        height="16"
        width="48"
        x="176" y="608">
    </rect>

</g>

    <!--Extra bit of Route 41-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(41, 1); } ">
    <rect data-route='41'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(41, 1) }"
        height="48"
        width="96"
        x="128" y="672">
    </rect>

</g>


    <!--Route 42-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(42, 1); } ">
    <rect data-route='42'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(42, 1) }"
        height="48"
        width="192"
        x="576" y="160">
    </rect>

    <text style="font-size: 32px" x="656" y="194">42</text>

</g>

     <!--Extra bit of Route 42-->
     

<g

    data-bind="click:function(){ MapHelper.moveToRoute(42, 1); } ">
    <rect data-route='42'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(42, 1) }"
        height="32"
        width="64"
        x="768" y="176">
    </rect>

</g>

     <!--Extra bit of Route 42-->
     

<g

    data-bind="click:function(){ MapHelper.moveToRoute(42, 1); } ">
    <rect data-route='42'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(42, 1) }"
        height="48"
        width="48"
        x="832" y="160">
    </rect>

</g>


    <!--Route 43-->
    

<g

    transform="rotate(90 ,896, 0)"

    data-bind="click:function(){ MapHelper.moveToRoute(43, 1); } ">
    <rect data-route='43'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(43, 1) }"
        height="48"
        width="144"
        x="896" y="-48">
    </rect>

    <text style="font-size: 32px" x="952" y="-14">43</text>

</g>


    <!--Route 44-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(44, 1); } ">
    <rect data-route='44'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(44, 1) }"
        height="48"
        width="160"
        x="944" y="160">
    </rect>

    <text style="font-size: 32px" x="1008" y="194">44</text>

</g>

     <!--Extra bit of Route 44-->
     

<g

    data-bind="click:function(){ MapHelper.moveToRoute(44, 1); } ">
    <rect data-route='44'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(44, 1) }"
        height="16"
        width="16"
        x="1104" y="192">
    </rect>

</g>


    <!--Route 45-->
    

<g

    transform="rotate(90 ,1120, 288)"

    data-bind="click:function(){ MapHelper.moveToRoute(45, 1); } ">
    <rect data-route='45'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(45, 1) }"
        height="48"
        width="144"
        x="1120" y="240">
    </rect>

    <text style="font-size: 32px" x="1176" y="274">45</text>

</g>

     <!--Extra bit of Route 45-->
    

<g

    transform="rotate(90 ,1120, 192)"

    data-bind="click:function(){ MapHelper.moveToRoute(45, 1); } ">
    <rect data-route='45'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(45, 1) }"
        height="48"
        width="32"
        x="1120" y="144">
    </rect>

</g>

    <!--Extra bit of Route 45-->
   

<g

    transform="rotate(90 ,1136, 432)"

    data-bind="click:function(){ MapHelper.moveToRoute(45, 1); } ">
    <rect data-route='45'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(45, 1) }"
        height="32"
        width="64"
        x="1136" y="400">
    </rect>

</g>


    <!--Route 46-->
    

<g

    transform="rotate(90 ,1040, 480)"

    data-bind="click:function(){ MapHelper.moveToRoute(46, 1); } ">
    <rect data-route='46'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(46, 1) }"
        height="48"
        width="192"
        x="1040" y="432">
    </rect>

    <text style="font-size: 32px" x="1120" y="466">46</text>

</g>

    <!--Extra bit of Route 46-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(46, 1); } ">
    <rect data-route='46'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(46, 1) }"
        height="16"
        width="32"
        x="1088" y="480">
    </rect>

</g>

    <!--Extra bit of Route 46-->
    

<g

    transform="rotate(90 ,1040, 448)"

    data-bind="click:function(){ MapHelper.moveToRoute(46, 1); } ">
    <rect data-route='46'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(46, 1) }"
        height="32"
        width="32"
        x="1040" y="416">
    </rect>

</g>


     <!--Route 47-->
    

<g

    transform="rotate(90 ,16, 608)"

    data-bind="click:function(){ MapHelper.moveToRoute(47, 1); } ">
    <rect data-route='47'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(47, 1) }"
        height="48"
        width="112"
        x="16" y="560">
    </rect>

    <text style="font-size: 32px" x="56" y="594">47</text>

</g>


    <!--Route 48-->
    

<g

    transform="rotate(90 ,16, 400)"

    data-bind="click:function(){ MapHelper.moveToRoute(48, 1); } ">
    <rect data-route='48'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(48, 1) }"
        height="48"
        width="208"
        x="16" y="352">
    </rect>

    <text style="font-size: 32px" x="104" y="386">48</text>

</g>





    <!-- ----- -->
    <!-- TOWNS -->
    <!-- ----- -->

    <!--New Bark Town-->
    

<rect class="city"
    data-town="New Bark Town" 
    x="1152"
    y="648"
    height="72"
    width="80"
    data-bind="
        click:function(){MapHelper.moveToTown('New Bark Town')},
        attr: { class: MapHelper.calculateTownCssClass('New Bark Town') },
        
            css: { flash: MapHelper.ableToTravel() }
        ">
</rect>

    <!--Cherrygrove City-->
    

<rect class="city"
    data-town="Cherrygrove City" 
    x="800"
    y="656"
    height="64"
    width="64"
    data-bind="
        click:function(){MapHelper.moveToTown('Cherrygrove City')},
        attr: { class: MapHelper.calculateTownCssClass('Cherrygrove City') },
        ">
</rect>

    <!--Violet City-->
    

<rect class="city"
    data-town="Violet City" 
    x="656"
    y="288"
    height="64"
    width="64"
    data-bind="
        click:function(){MapHelper.moveToTown('Violet City')},
        attr: { class: MapHelper.calculateTownCssClass('Violet City') },
        ">
</rect>

    <!--Azalea Town-->
    

<rect class="city"
    data-town="Azalea Town" 
    x="448"
    y="864"
    height="64"
    width="64"
    data-bind="
        click:function(){MapHelper.moveToTown('Azalea Town')},
        attr: { class: MapHelper.calculateTownCssClass('Azalea Town') },
        ">
</rect>

    <!--Goldenrod City-->
    

<rect class="city"
    data-town="Goldenrod City" 
    x="368"
    y="504"
    height="152"
    width="80"
    data-bind="
        click:function(){MapHelper.moveToTown('Goldenrod City')},
        attr: { class: MapHelper.calculateTownCssClass('Goldenrod City') },
        ">
</rect>

    <!--Ecruteak City-->
    

<rect class="city"
    data-town="Ecruteak City" 
    x="512"
    y="144"
    height="64"
    width="64"
    data-bind="
        click:function(){MapHelper.moveToTown('Ecruteak City')},
        attr: { class: MapHelper.calculateTownCssClass('Ecruteak City') },
        ">
</rect>

    <!--Olivine City-->
    

<rect class="city"
    data-town="Olivine City" 
    x="144"
    y="296"
    height="72"
    width="80"
    data-bind="
        click:function(){MapHelper.moveToTown('Olivine City')},
        attr: { class: MapHelper.calculateTownCssClass('Olivine City') },
        ">
</rect>
     <!--Olivine City Extension-->
     

<rect class="city"
    data-town="Olivine City" 
    x="224"
    y="304"
    height="64"
    width="64"
    data-bind="
        click:function(){MapHelper.moveToTown('Olivine City')},
        attr: { class: MapHelper.calculateTownCssClass('Olivine City') },
        ">
</rect>

    <!--Cianwood City-->
    

<rect class="city"
    data-town="Cianwood City" 
    x="64"
    y="656"
    height="64"
    width="64"
    data-bind="
        click:function(){MapHelper.moveToTown('Cianwood City')},
        attr: { class: MapHelper.calculateTownCssClass('Cianwood City') },
        ">
</rect>

    <!--Mahogany Town-->
    

<rect class="city"
    data-town="Mahogany Town" 
    x="880"
    y="144"
    height="64"
    width="64"
    data-bind="
        click:function(){MapHelper.moveToTown('Mahogany Town')},
        attr: { class: MapHelper.calculateTownCssClass('Mahogany Town') },
        ">
</rect>

    <!--Blackthorn City-->
    

<rect class="city"
    data-town="Blackthorn City" 
    x="1104"
    y="224"
    height="64"
    width="64"
    data-bind="
        click:function(){MapHelper.moveToTown('Blackthorn City')},
        attr: { class: MapHelper.calculateTownCssClass('Blackthorn City') },
        ">
</rect>

    <!--Indigo Plateau 2.0-->
    

<rect class="city"
    data-town="Indigo Plateau Johto" 
    x="1424"
    y="48"
    height="128"
    width="176"
    data-bind="
        click:function(){MapHelper.moveToTown('Indigo Plateau Johto')},
        attr: { class: MapHelper.calculateTownCssClass('Indigo Plateau Johto') },
        ">
</rect>




    <!-- -------- -->
    <!-- DUNGEONS -->
    <!-- -------- -->

    <!--Sprout Tower-->
    

<rect class="city"
    data-town="Sprout Tower" 
    x="704"
    y="216"
    height="72"
    width="64"
    data-bind="click:function(){MapHelper.moveToTown('Sprout Tower')},
        attr: { class: MapHelper.calculateTownCssClass('Sprout Tower') }">
</rect>
    <!--Sprout Tower Extension-->
    

<rect class="city"
    data-town="Sprout Tower" 
    x="720"
    y="288"
    height="16"
    width="48"
    data-bind="click:function(){MapHelper.moveToTown('Sprout Tower')},
        attr: { class: MapHelper.calculateTownCssClass('Sprout Tower') }">
</rect>

    <!--Ruins of Alph-->
    

<rect class="city"
    data-town="Ruins of Alph" 
    x="656"
    y="400"
    height="64"
    width="80"
    data-bind="click:function(){MapHelper.moveToTown('Ruins of Alph')},
        attr: { class: MapHelper.calculateTownCssClass('Ruins of Alph') }">
</rect>

    <!--Union Cave-->
    

<rect class="city"
    data-town="Union Cave" 
    x="656"
    y="752"
    height="64"
    width="64"
    data-bind="click:function(){MapHelper.moveToTown('Union Cave')},
        attr: { class: MapHelper.calculateTownCssClass('Union Cave') }">
</rect>

    <!--Slowpoke Well-->
    

<rect class="city"
    data-town="Slowpoke Well" 
    x="496"
    y="912"
    height="16"
    width="16"
    data-bind="click:function(){MapHelper.moveToTown('Azalea Town')},
        attr: { class: MapHelper.calculateTownCssClass('Slowpoke Well') }">
</rect>

    <!--Ilex Forest-->
    

<rect class="city"
    data-town="Ilex Forest" 
    x="384"
    y="800"
    height="48"
    width="64"
    data-bind="click:function(){MapHelper.moveToTown('Ilex Forest')},
        attr: { class: MapHelper.calculateTownCssClass('Ilex Forest') }">
</rect>

    <!--Burned Tower-->
    

<rect class="city"
    data-town="Burned Tower" 
    x="416"
    y="32"
    height="112"
    width="112"
    data-bind="click:function(){MapHelper.moveToTown('Burned Tower')},
        attr: { class: MapHelper.calculateTownCssClass('Burned Tower') }">
</rect>
     <!--Burned Tower Extension-->
     

<rect class="city"
    data-town="Burned Tower" 
    x="416"
    y="144"
    height="16"
    width="96"
    data-bind="click:function(){MapHelper.moveToTown('Burned Tower')},
        attr: { class: MapHelper.calculateTownCssClass('Burned Tower') }">
</rect>

    <!--Tin Tower-->
    

<rect class="city"
    data-town="Tin Tower" 
    x="560"
    y="0"
    height="144"
    width="112"
    data-bind="click:function(){MapHelper.moveToTown('Tin Tower')},
        attr: { class: MapHelper.calculateTownCssClass('Tin Tower') }">
</rect>
     <!--Tin Tower Extension-->
     

<rect class="city"
    data-town="Tin Tower" 
    x="576"
    y="144"
    height="16"
    width="96"
    data-bind="click:function(){MapHelper.moveToTown('Tin Tower')},
        attr: { class: MapHelper.calculateTownCssClass('Tin Tower') }">
</rect>

    <!--Whirl Islands-->
    

<rect class="city"
    data-town="Whirl Islands" 
    x="192"
    y="624"
    height="48"
    width="64"
    data-bind="click:function(){MapHelper.moveToTown('Whirl Islands')},
        attr: { class: MapHelper.calculateTownCssClass('Whirl Islands') }">
</rect>

    <!--Mt Mortar-->
    

<rect class="city"
    data-town="Mt Mortar" 
    x="768"
    y="128"
    height="48"
    width="64"
    data-bind="click:function(){MapHelper.moveToTown('Mt Mortar')},
        attr: { class: MapHelper.calculateTownCssClass('Mt Mortar') }">
</rect>
     <!--Mt Mortar Extension-->
     

<rect class="city"
    data-town="Mt Mortar" 
    x="832"
    y="96"
    height="64"
    width="32"
    data-bind="click:function(){MapHelper.moveToTown('Mt Mortar')},
        attr: { class: MapHelper.calculateTownCssClass('Mt Mortar') }">
</rect>

    <!--Ice Path-->
    

<rect class="city"
    data-town="Ice Path" 
    x="1104"
    y="144"
    height="48"
    width="64"
    data-bind="click:function(){MapHelper.moveToTown('Ice Path')},
        attr: { class: MapHelper.calculateTownCssClass('Ice Path') }">
</rect>
     <!--Ice Path Extension-->
     

<rect class="city"
    data-town="Ice Path" 
    x="1168"
    y="176"
    height="16"
    width="16"
    data-bind="click:function(){MapHelper.moveToTown('Ice Path')},
        attr: { class: MapHelper.calculateTownCssClass('Ice Path') }">
</rect>

    <!--Dark Cave-->
    

<rect class="city"
    data-town="Dark Cave" 
    x="1072"
    y="432"
    height="48"
    width="64"
    data-bind="click:function(){MapHelper.moveToTown('Dark Cave')},
        attr: { class: MapHelper.calculateTownCssClass('Dark Cave') }">
</rect>
     <!--Dark Cave Extension-->
     

<rect class="city"
    data-town="Dark Cave" 
    x="1120"
    y="480"
    height="16"
    width="16"
    data-bind="click:function(){MapHelper.moveToTown('Dark Cave')},
        attr: { class: MapHelper.calculateTownCssClass('Dark Cave') }">
</rect>

    <!--Mt Silver-->
    

<rect class="city"
    data-town="Mt Silver" 
    x="1184"
    y="496"
    height="80"
    width="112"
    data-bind="click:function(){MapHelper.moveToTown('Mt Silver')},
        attr: { class: MapHelper.calculateTownCssClass('Mt Silver') }">
</rect>
     <!--Mt Silver Extension-->
     

<rect class="city"
    data-town="Mt Silver" 
    x="1248"
    y="576"
    height="16"
    width="16"
    data-bind="click:function(){MapHelper.moveToTown('Mt Silver')},
        attr: { class: MapHelper.calculateTownCssClass('Mt Silver') }">
</rect>




    <!-- ------------------ -->
    <!-- PLACES OF INTEREST -->
    <!-- ------------------ -->

    

<rect class="city"
    data-town="Dock" 
    x="240"
    y="368"
    height="64"
    width="48"
    data-bind="click:function(){MapHelper.openShipModal()}, attr: { class: MapHelper.calculateTownCssClass(&#39;Olivine City&#39;) }">
</rect>

</g>

                            <g data-bind='if: player.region == GameConstants.Region.hoenn'>
    <image width="100%" xlink:href="assets/images/hoenn.png"></image>

    <!-- ------ -->
    <!-- ROUTES -->
    <!-- ------ -->

    <!--Route 101-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(101, 2); } ">
    <rect data-route='101'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(101, 2) }"
        height="40"
        width="48"
        x="240" y="656">
    </rect>

    <text style="font-size: 32px" x="240" y="686">101</text>

</g>


    <!--Route 102-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(102, 2); } ">
    <rect data-route='102'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(102, 2) }"
        height="48"
        width="96"
        x="128" y="608">
    </rect>

    <text style="font-size: 32px" x="152" y="642">102</text>

</g>


    <!--Route 103-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(103, 2); } ">
    <rect data-route='103'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(103, 2) }"
        height="48"
        width="224"
        x="240" y="544">
    </rect>

    <text style="font-size: 32px" x="328" y="578">103</text>

</g>


     <!--Route 104-->
     

<g

    transform="rotate(90 ,16, 512)"

    data-bind="click:function(){ MapHelper.moveToRoute(104, 2); } ">
    <rect data-route='104'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(104, 2) }"
        height="48"
        width="144"
        x="16" y="464">
    </rect>

    <text style="font-size: 32px" x="64" y="498">104</text>

</g>

    <!--Route 104 Extension-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(104, 2); } ">
    <rect data-route='104'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(104, 2) }"
        height="16"
        width="48"
        x="16" y="448">
    </rect>

</g>


    <!--Route 105-->
    

<g

    transform="rotate(90 ,16, 656)"

    data-bind="click:function(){ MapHelper.moveToRoute(105, 2); } ">
    <rect data-route='105'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(105, 2) }"
        height="48"
        width="160"
        x="16" y="608">
    </rect>

    <text style="font-size: 32px" x="72" y="642">105</text>

</g>


    <!--Route 106-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(106, 2); } ">
    <rect data-route='106'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(106, 2) }"
        height="48"
        width="176"
        x="16" y="816">
    </rect>

    <text style="font-size: 32px" x="80" y="850">106</text>

</g>


    <!--Route 107-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(107, 2); } ">
    <rect data-route='107'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(107, 2) }"
        height="48"
        width="160"
        x="192" y="880">
    </rect>

    <text style="font-size: 32px" x="248" y="914">107</text>

</g>


    <!--Route 108-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(108, 2); } ">
    <rect data-route='108'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(108, 2) }"
        height="48"
        width="160"
        x="352" y="880">
    </rect>

    <text style="font-size: 32px" x="408" y="914">108</text>

</g>


    <!--Route 109-->
    

<g

    transform="rotate(90 ,464, 768)"

    data-bind="click:function(){ MapHelper.moveToRoute(109, 2); } ">
    <rect data-route='109'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(109, 2) }"
        height="48"
        width="112"
        x="464" y="720">
    </rect>

    <text style="font-size: 32px" x="496" y="754">109</text>

</g>


    <!--Route 110-->
    

<g

    transform="rotate(90 ,464, 432)"

    data-bind="click:function(){ MapHelper.moveToRoute(110, 2); } ">
    <rect data-route='110'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(110, 2) }"
        height="48"
        width="184"
        x="464" y="384">
    </rect>

    <text style="font-size: 32px" x="532" y="418">110</text>

</g>


    <!--Route 111-->
    

<g

    transform="rotate(90 ,464, 64)"

    data-bind="click:function(){ MapHelper.moveToRoute(111, 2); } ">
    <rect data-route='111'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(111, 2) }"
        height="48"
        width="296"
        x="464" y="16">
    </rect>

    <text style="font-size: 32px" x="588" y="50">111</text>

</g>


    <!--Route 112-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(112, 2); } ">
    <rect data-route='112'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(112, 2) }"
        height="48"
        width="112"
        x="352" y="272">
    </rect>

    <text style="font-size: 32px" x="384" y="306">112</text>

</g>


    <!--Route 113-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(113, 2); } ">
    <rect data-route='113'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(113, 2) }"
        height="48"
        width="224"
        x="240" y="64">
    </rect>

    <text style="font-size: 32px" x="328" y="98">113</text>

</g>


    <!--Route 114-->
    

<g

    transform="rotate(90 ,112, 64)"

    data-bind="click:function(){ MapHelper.moveToRoute(114, 2); } ">
    <rect data-route='114'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(114, 2) }"
        height="48"
        width="144"
        x="112" y="16">
    </rect>

    <text style="font-size: 32px" x="160" y="50">114</text>

</g>

    <!--Route 114 Extension-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(114, 2); } ">
    <rect data-route='114'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(114, 2) }"
        height="48"
        width="16"
        x="160" y="64">
    </rect>

</g>


    <!--Route 115-->
    

<g

    transform="rotate(90 ,16, 208)"

    data-bind="click:function(){ MapHelper.moveToRoute(115, 2); } ">
    <rect data-route='115'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(115, 2) }"
        height="48"
        width="88"
        x="16" y="160">
    </rect>

    <text style="font-size: 32px" x="36" y="194">115</text>

</g>

     <!--Route 115 Extension-->
     

<g

    data-bind="click:function(){ MapHelper.moveToRoute(115, 2); } ">
    <rect data-route='115'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(115, 2) }"
        height="48"
        width="32"
        x="16" y="160">
    </rect>

</g>


    <!--Route 116-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(116, 2); } ">
    <rect data-route='116'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(116, 2) }"
        height="48"
        width="128"
        x="80" y="336">
    </rect>

    <text style="font-size: 32px" x="120" y="370">116</text>

</g>

     <!--Route 116 Extension-->
     

<g

    data-bind="click:function(){ MapHelper.moveToRoute(116, 2); } ">
    <rect data-route='116'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(116, 2) }"
        height="16"
        width="16"
        x="208" y="368">
    </rect>

</g>


    <!--Route 117-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(117, 2); } ">
    <rect data-route='117'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(117, 2) }"
        height="48"
        width="144"
        x="288" y="384">
    </rect>

    <text style="font-size: 32px" x="336" y="418">117</text>

</g>


    <!--Route 118-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(118, 2); } ">
    <rect data-route='118'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(118, 2) }"
        height="48"
        width="96"
        x="576" y="384">
    </rect>

    <text style="font-size: 32px" x="600" y="418">118</text>

</g>


    <!--Route 119-->
    

<g

    transform="rotate(90 ,624, 64)"

    data-bind="click:function(){ MapHelper.moveToRoute(119, 2); } ">
    <rect data-route='119'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(119, 2) }"
        height="48"
        width="320"
        x="624" y="16">
    </rect>

    <text style="font-size: 32px" x="760" y="50">119</text>

</g>


    <!--Route 120-->
    

<g

    transform="rotate(90 ,736, 64)"

    data-bind="click:function(){ MapHelper.moveToRoute(120, 2); } ">
    <rect data-route='120'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(120, 2) }"
        height="48"
        width="208"
        x="736" y="16">
    </rect>

    <text style="font-size: 32px" x="816" y="50">120</text>

</g>


    <!--Route 121-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(121, 2); } ">
    <rect data-route='121'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(121, 2) }"
        height="48"
        width="256"
        x="784" y="224">
    </rect>

    <text style="font-size: 32px" x="888" y="258">121</text>

</g>


    <!--Route 122-->
    

<g

    transform="rotate(90 ,880, 272)"

    data-bind="click:function(){ MapHelper.moveToRoute(122, 2); } ">
    <rect data-route='122'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(122, 2) }"
        height="48"
        width="112"
        x="880" y="224">
    </rect>

    <text style="font-size: 32px" x="912" y="258">122</text>

</g>

    <!--Route 122 Extension-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(122, 2); } ">
    <rect data-route='122'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(122, 2) }"
        height="16"
        width="48"
        x="928" y="272">
    </rect>

</g>

    <!--Route 122 Extension-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(122, 2); } ">
    <rect data-route='122'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(122, 2) }"
        height="32"
        width="48"
        x="928" y="352">
    </rect>

</g>


    <!--Route 123-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(123, 2); } ">
    <rect data-route='123'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(123, 2) }"
        height="48"
        width="336"
        x="672" y="384">
    </rect>

    <text style="font-size: 32px" x="816" y="418">123</text>

</g>


    <!--Route 124-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(124, 2); } ">
    <rect data-route='124'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(124, 2) }"
        height="224"
        width="144"
        x="1184" y="160">
    </rect>

    <text style="font-size: 32px" x="1232" y="282">124</text>

</g>

     <!--Route 124 Extension-->
     

<g

    data-bind="click:function(){ MapHelper.moveToRoute(124, 2); } ">
    <rect data-route='124'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(124, 2) }"
        height="48"
        width="16"
        x="1168" y="160">
    </rect>

</g>

     <!--Route 124 Extension-->
     

<g

    data-bind="click:function(){ MapHelper.moveToRoute(124, 2); } ">
    <rect data-route='124'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(124, 2) }"
        height="96"
        width="16"
        x="1168" y="288">
    </rect>

</g>


    <!--Route 125-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(125, 2); } ">
    <rect data-route='125'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(125, 2) }"
        height="48"
        width="160"
        x="1328" y="160">
    </rect>

    <text style="font-size: 32px" x="1384" y="194">125</text>

</g>

    <!--Route 125 Extension-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(125, 2); } ">
    <rect data-route='125'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(125, 2) }"
        height="48"
        width="64"
        x="1328" y="208">
    </rect>

</g>

    <!--Route 125 Extension-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(125, 2); } ">
    <rect data-route='125'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(125, 2) }"
        height="48"
        width="32"
        x="1456" y="208">
    </rect>

</g>

    <!--Route 125 Extension-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(125, 2); } ">
    <rect data-route='125'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(125, 2) }"
        height="40"
        width="80"
        x="1328" y="256">
    </rect>

</g>

    <!--Route 125 Extension-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(125, 2); } ">
    <rect data-route='125'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(125, 2) }"
        height="48"
        width="80"
        x="1408" y="256">
    </rect>

</g>


    <!--Route 126-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(126, 2); } ">
    <rect data-route='126'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(126, 2) }"
        height="128"
        width="128"
        x="1200" y="384">
    </rect>

    <text style="font-size: 32px" x="1240" y="458">126</text>

</g>

     <!--Route 126 Extension-->
     

<g

    data-bind="click:function(){ MapHelper.moveToRoute(126, 2); } ">
    <rect data-route='126'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(126, 2) }"
        height="48"
        width="32"
        x="1168" y="384">
    </rect>

</g>

     <!--Route 126 Extension-->
     

<g

    data-bind="click:function(){ MapHelper.moveToRoute(126, 2); } ">
    <rect data-route='126'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(126, 2) }"
        height="64"
        width="32"
        x="1168" y="480">
    </rect>

</g>

     <!--Route 126 Extension-->
     

<g

    data-bind="click:function(){ MapHelper.moveToRoute(126, 2); } ">
    <rect data-route='126'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(126, 2) }"
        height="96"
        width="64"
        x="1264" y="512">
    </rect>

</g>

     <!--Route 126 Extension-->
     

<g

    data-bind="click:function(){ MapHelper.moveToRoute(126, 2); } ">
    <rect data-route='126'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(126, 2) }"
        height="32"
        width="64"
        x="1200" y="576">
    </rect>

</g>


    <!--Route 127-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(127, 2); } ">
    <rect data-route='127'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(127, 2) }"
        height="224"
        width="112"
        x="1328" y="384">
    </rect>

    <text style="font-size: 32px" x="1360" y="506">127</text>

</g>

     <!--Route 127 Extension-->
     

<g

    data-bind="click:function(){ MapHelper.moveToRoute(127, 2); } ">
    <rect data-route='127'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(127, 2) }"
        height="32"
        width="48"
        x="1440" y="384">
    </rect>

</g>

     <!--Route 127 Extension-->
     

<g

    data-bind="click:function(){ MapHelper.moveToRoute(127, 2); } ">
    <rect data-route='127'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(127, 2) }"
        height="80"
        width="32"
        x="1440" y="528">
    </rect>

</g>

     <!--Route 127 Extension-->
     

<g

    data-bind="click:function(){ MapHelper.moveToRoute(127, 2); } ">
    <rect data-route='127'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(127, 2) }"
        height="16"
        width="16"
        x="1472" y="544">
    </rect>

</g>


    <!--Route 128-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(128, 2); } ">
    <rect data-route='128'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(128, 2) }"
        height="48"
        width="80"
        x="1392" y="608">
    </rect>

    <text style="font-size: 32px" x="1408" y="642">128</text>

</g>


    <!--Route 129-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(129, 2); } ">
    <rect data-route='129'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(129, 2) }"
        height="48"
        width="144"
        x="1344" y="656">
    </rect>

    <text style="font-size: 32px" x="1392" y="690">129</text>

</g>


    <!--Route 130-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(130, 2); } ">
    <rect data-route='130'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(130, 2) }"
        height="48"
        width="144"
        x="1200" y="656">
    </rect>

    <text style="font-size: 32px" x="1248" y="690">130</text>

</g>


    <!--Route 131-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(131, 2); } ">
    <rect data-route='131'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(131, 2) }"
        height="48"
        width="144"
        x="1056" y="656">
    </rect>

    <text style="font-size: 32px" x="1104" y="690">131</text>

</g>


    <!--Route 132-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(132, 2); } ">
    <rect data-route='132'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(132, 2) }"
        height="48"
        width="160"
        x="832" y="656">
    </rect>

    <text style="font-size: 32px" x="888" y="690">132</text>

</g>


    <!--Route 133-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(133, 2); } ">
    <rect data-route='133'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(133, 2) }"
        height="48"
        width="144"
        x="688" y="656">
    </rect>

    <text style="font-size: 32px" x="736" y="690">133</text>

</g>


    <!--Route 134-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(134, 2); } ">
    <rect data-route='134'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(134, 2) }"
        height="48"
        width="160"
        x="528" y="656">
    </rect>

    <text style="font-size: 32px" x="584" y="690">134</text>

</g>





    <!-- ----- -->
    <!-- TOWNS -->
    <!-- ----- -->

    <!--Littleroot Town-->
    

<rect class="city"
    data-town="Littleroot Town" 
    x="224"
    y="696"
    height="72"
    width="80"
    data-bind="
        click:function(){MapHelper.moveToTown('Littleroot Town')},
        attr: { class: MapHelper.calculateTownCssClass('Littleroot Town') },
        
            css: { flash: MapHelper.ableToTravel() }
        ">
</rect>

    <!--Oldale Town-->
    

<rect class="city"
    data-town="Oldale Town" 
    x="224"
    y="592"
    height="64"
    width="64"
    data-bind="
        click:function(){MapHelper.moveToTown('Oldale Town')},
        attr: { class: MapHelper.calculateTownCssClass('Oldale Town') },
        ">
</rect>

    <!--Petalburg City-->
    

<rect class="city"
    data-town="Petalburg City" 
    x="64"
    y="592"
    height="64"
    width="64"
    data-bind="
        click:function(){MapHelper.moveToTown('Petalburg City')},
        attr: { class: MapHelper.calculateTownCssClass('Petalburg City') },
        ">
</rect>

    <!--Rustboro City-->
    

<rect class="city"
    data-town="Rustboro City" 
    x="0"
    y="296"
    height="152"
    width="80"
    data-bind="
        click:function(){MapHelper.moveToTown('Rustboro City')},
        attr: { class: MapHelper.calculateTownCssClass('Rustboro City') },
        ">
</rect>

    <!--Dewford Town-->
    

<rect class="city"
    data-town="Dewford Town" 
    x="128"
    y="864"
    height="64"
    width="64"
    data-bind="
        click:function(){MapHelper.moveToTown('Dewford Town')},
        attr: { class: MapHelper.calculateTownCssClass('Dewford Town') },
        ">
</rect>

    <!--Slateport City-->
    

<rect class="city"
    data-town="Slateport City" 
    x="448"
    y="616"
    height="152"
    width="80"
    data-bind="
        click:function(){MapHelper.moveToTown('Slateport City')},
        attr: { class: MapHelper.calculateTownCssClass('Slateport City') },
        ">
</rect>

    <!--Mauville City-->
    

<rect class="city"
    data-town="Mauville City" 
    x="432"
    y="360"
    height="72"
    width="80"
    data-bind="
        click:function(){MapHelper.moveToTown('Mauville City')},
        attr: { class: MapHelper.calculateTownCssClass('Mauville City') },
        ">
</rect>
    <!--Mauville City Extension-->
    

<rect class="city"
    data-town="Mauville City" 
    x="512"
    y="368"
    height="64"
    width="64"
    data-bind="
        click:function(){MapHelper.moveToTown('Mauville City')},
        attr: { class: MapHelper.calculateTownCssClass('Mauville City') },
        ">
</rect>

    <!--Verdanturf Town-->
    

<rect class="city"
    data-town="Verdanturf Town" 
    x="224"
    y="368"
    height="64"
    width="64"
    data-bind="
        click:function(){MapHelper.moveToTown('Verdanturf Town')},
        attr: { class: MapHelper.calculateTownCssClass('Verdanturf Town') },
        ">
</rect>

    <!--Fallarbor Town-->
    

<rect class="city"
    data-town="Fallarbor Town" 
    x="176"
    y="48"
    height="64"
    width="64"
    data-bind="
        click:function(){MapHelper.moveToTown('Fallarbor Town')},
        attr: { class: MapHelper.calculateTownCssClass('Fallarbor Town') },
        ">
</rect>

    <!--Lavaridge Town-->
    

<rect class="city"
    data-town="Lavaridge Town" 
    x="288"
    y="256"
    height="64"
    width="64"
    data-bind="
        click:function(){MapHelper.moveToTown('Lavaridge Town')},
        attr: { class: MapHelper.calculateTownCssClass('Lavaridge Town') },
        ">
</rect>

    <!--Fortree City-->
    

<rect class="city"
    data-town="Fortree City" 
    x="672"
    y="48"
    height="64"
    width="64"
    data-bind="
        click:function(){MapHelper.moveToTown('Fortree City')},
        attr: { class: MapHelper.calculateTownCssClass('Fortree City') },
        ">
</rect>

    <!--LilyCove City-->
    

<rect class="city"
    data-town="LilyCove City" 
    x="1040"
    y="200"
    height="72"
    width="80"
    data-bind="
        click:function(){MapHelper.moveToTown('LilyCove City')},
        attr: { class: MapHelper.calculateTownCssClass('LilyCove City') },
        ">
</rect>
    <!--LilyCove City Extension-->
    

<rect class="city"
    data-town="LilyCove City" 
    x="1120"
    y="208"
    height="64"
    width="64"
    data-bind="
        click:function(){MapHelper.moveToTown('LilyCove City')},
        attr: { class: MapHelper.calculateTownCssClass('LilyCove City') },
        ">
</rect>

    <!--Mossdeep City-->
    

<rect class="city"
    data-town="Mossdeep City" 
    x="1328"
    y="296"
    height="72"
    width="80"
    data-bind="
        click:function(){MapHelper.moveToTown('Mossdeep City')},
        attr: { class: MapHelper.calculateTownCssClass('Mossdeep City') },
        ">
</rect>
    <!--Mossdeep City Extension-->
    

<rect class="city"
    data-town="Mossdeep City" 
    x="1408"
    y="304"
    height="64"
    width="64"
    data-bind="
        click:function(){MapHelper.moveToTown('Mossdeep City')},
        attr: { class: MapHelper.calculateTownCssClass('Mossdeep City') },
        ">
</rect>

    <!--Sootopolis City-->
    

<rect class="city"
    data-town="Sootopolis City" 
    x="1200"
    y="512"
    height="64"
    width="64"
    data-bind="
        click:function(){MapHelper.moveToTown('Sootopolis City')},
        attr: { class: MapHelper.calculateTownCssClass('Sootopolis City') },
        ">
</rect>

    <!--Pacifidlog Town-->
    

<rect class="city"
    data-town="Pacifidlog Town" 
    x="992"
    y="640"
    height="64"
    width="64"
    data-bind="
        click:function(){MapHelper.moveToTown('Pacifidlog Town')},
        attr: { class: MapHelper.calculateTownCssClass('Pacifidlog Town') },
        ">
</rect>

    <!--Ever Grande City-->
    

<rect class="city"
    data-town="Ever Grande City" 
    x="1488"
    y="640"
    height="64"
    width="64"
    data-bind="
        click:function(){MapHelper.moveToTown('Ever Grande City')},
        attr: { class: MapHelper.calculateTownCssClass('Ever Grande City') },
        ">
</rect>

    <!--Pokemon League Hoenn-->
    

<rect class="city"
    data-town="Pokemon League Hoenn" 
    x="1440"
    y="416"
    height="128"
    width="160"
    data-bind="
        click:function(){MapHelper.moveToTown('Pokemon League Hoenn')},
        attr: { class: MapHelper.calculateTownCssClass('Pokemon League Hoenn') },
        ">
</rect>

     <!--Battle Frontier-->
     

<rect class="city"
    data-town="Battle Frontier" 
    x="1232"
    y="744"
    height="72"
    width="112"
    data-bind="
        click:function(){MapHelper.moveToTown('Battle Frontier')},
        attr: { class: MapHelper.calculateTownCssClass('Battle Frontier') },
        ">
</rect>
    <!--Battle Frontier Extension-->
    

<rect class="city"
    data-town="Battle Frontier" 
    x="1272"
    y="736"
    height="8"
    width="32"
    data-bind="
        click:function(){MapHelper.moveToTown('Battle Frontier')},
        attr: { class: MapHelper.calculateTownCssClass('Battle Frontier') },
        ">
</rect>




    <!-- -------- -->
    <!-- DUNGEONS -->
    <!-- -------- -->

    <!--Petalburg Woods-->
    

<rect class="city"
    data-town="Petalburg Woods" 
    x="16"
    y="464"
    height="48"
    width="64"
    data-bind="click:function(){MapHelper.moveToTown('Petalburg Woods')},
        attr: { class: MapHelper.calculateTownCssClass('Petalburg Woods') }">
</rect>

    <!--Rusturf Tunnel-->
    

<rect class="city"
    data-town="Rusturf Tunnel" 
    x="208"
    y="320"
    height="48"
    width="80"
    data-bind="click:function(){MapHelper.moveToTown('Rusturf Tunnel')},
        attr: { class: MapHelper.calculateTownCssClass('Rusturf Tunnel') }">
</rect>

    <!--Granite Cave-->
    

<rect class="city"
    data-town="Granite Cave" 
    x="64"
    y="864"
    height="64"
    width="64"
    data-bind="click:function(){MapHelper.moveToTown('Granite Cave')},
        attr: { class: MapHelper.calculateTownCssClass('Granite Cave') }">
</rect>

    <!--New Mauville-->
    

<rect class="city"
    data-town="New Mauville" 
    x="512"
    y="432"
    height="48"
    width="64"
    data-bind="click:function(){MapHelper.moveToTown('New Mauville')},
        attr: { class: MapHelper.calculateTownCssClass('New Mauville') }">
</rect>

    <!--Meteor Falls-->
    

<rect class="city"
    data-town="Meteor Falls" 
    x="48"
    y="160"
    height="48"
    width="64"
    data-bind="click:function(){MapHelper.moveToTown('Meteor Falls')},
        attr: { class: MapHelper.calculateTownCssClass('Meteor Falls') }">
</rect>

    <!--Fiery Path-->
    

<rect class="city"
    data-town="Fiery Path" 
    x="400"
    y="224"
    height="48"
    width="64"
    data-bind="click:function(){MapHelper.moveToTown('Fiery Path')},
        attr: { class: MapHelper.calculateTownCssClass('Fiery Path') }">
</rect>

    <!--Jagged Pass-->
    

<rect class="city"
    data-town="Jagged Pass" 
    x="336"
    y="224"
    height="48"
    width="64"
    data-bind="click:function(){MapHelper.moveToTown('Jagged Pass')},
        attr: { class: MapHelper.calculateTownCssClass('Jagged Pass') }">
</rect>

    <!--Mt. Chimney-->
    

<rect class="city"
    data-town="Mt. Chimney" 
    x="336"
    y="176"
    height="48"
    width="64"
    data-bind="click:function(){MapHelper.moveToTown('Mt. Chimney')},
        attr: { class: MapHelper.calculateTownCssClass('Mt. Chimney') }">
</rect>

    <!--Mt. Pyre-->
    

<rect class="city"
    data-town="Mt. Pyre" 
    x="928"
    y="288"
    height="64"
    width="64"
    data-bind="click:function(){MapHelper.moveToTown('Mt. Pyre')},
        attr: { class: MapHelper.calculateTownCssClass('Mt. Pyre') }">
</rect>
    <!--Mt. Pyre Extension-->
    

<rect class="city"
    data-town="Mt. Pyre" 
    x="992"
    y="304"
    height="48"
    width="16"
    data-bind="click:function(){MapHelper.moveToTown('Mt. Pyre')},
        attr: { class: MapHelper.calculateTownCssClass('Mt. Pyre') }">
</rect>

    <!--Shoal Cave-->
    

<rect class="city"
    data-town="Shoal Cave" 
    x="1392"
    y="208"
    height="48"
    width="64"
    data-bind="click:function(){MapHelper.moveToTown('Shoal Cave')},
        attr: { class: MapHelper.calculateTownCssClass('Shoal Cave') }">
</rect>

    <!--Seafloor Cavern-->
    

<rect class="city"
    data-town="Seafloor Cavern" 
    x="1328"
    y="608"
    height="48"
    width="64"
    data-bind="click:function(){MapHelper.moveToTown('Seafloor Cavern')},
        attr: { class: MapHelper.calculateTownCssClass('Seafloor Cavern') }">
</rect>

    <!--Sky Pillar-->
    

<rect class="city"
    data-town="Sky Pillar" 
    x="1152"
    y="544"
    height="96"
    width="48"
    data-bind="click:function(){MapHelper.moveToTown('Sky Pillar')},
        attr: { class: MapHelper.calculateTownCssClass('Sky Pillar') }">
</rect>

    <!--Cave of Origin-->
    

<rect class="city"
    data-town="Cave of Origin" 
    x="1136"
    y="432"
    height="48"
    width="64"
    data-bind="click:function(){MapHelper.moveToTown('Cave of Origin')},
        attr: { class: MapHelper.calculateTownCssClass('Cave of Origin') }">
</rect>

    <!--Hoenn Victory Road-->
    

<rect class="city"
    data-town="Victory Road Hoenn" 
    x="1472"
    y="560"
    height="64"
    width="112"
    data-bind="click:function(){MapHelper.moveToTown('Victory Road Hoenn')},
        attr: { class: MapHelper.calculateTownCssClass('Victory Road Hoenn') }">
</rect>
    <!--Hoenn Victory Road Extension-->
    

<rect class="city"
    data-town="Victory Road Hoenn" 
    x="1520"
    y="544"
    height="16"
    width="48"
    data-bind="click:function(){MapHelper.moveToTown('Victory Road Hoenn')},
        attr: { class: MapHelper.calculateTownCssClass('Victory Road Hoenn') }">
</rect>

    <!--Sealed Chamber-->
    

<rect class="city"
    data-town="Sealed Chamber" 
    x="608"
    y="560"
    height="80"
    width="96"
    data-bind="click:function(){MapHelper.moveToTown('Sealed Chamber')},
        attr: { class: MapHelper.calculateTownCssClass('Sealed Chamber') }">
</rect>




    <!-- ------------------ -->
    <!-- PLACES OF INTEREST -->
    <!-- ------------------ -->

    

<rect class="city"
    data-town="Dock" 
    x="528"
    y="720"
    height="32"
    width="48"
    data-bind="click:function(){MapHelper.openShipModal()}, attr: { class: MapHelper.calculateTownCssClass(&#39;Slateport City&#39;) }">
</rect>



</g>

                            <g data-bind='if: player.region == GameConstants.Region.sinnoh'>
    <image width="100%" xlink:href="assets/images/sinnoh.png"></image>

    <!-- ------ -->
    <!-- ROUTES -->
    <!-- ------ -->

    <!--Route 201 extra (behind because of text)-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(201, 3); } ">
    <rect data-route='201'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(201, 3) }"
        height="40"
        width="80"
        x="112" y="800">
    </rect>

</g>

    <!--Route 201-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(201, 3); } ">
    <rect data-route='201'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(201, 3) }"
        height="48"
        width="80"
        x="192" y="800">
    </rect>

    <text style="font-size: 32px" x="168" y="834">201</text>

</g>


    <!--Route 202-->
    

<g

    transform="rotate(90 ,288, 720)"

    data-bind="click:function(){ MapHelper.moveToRoute(202, 3); } ">
    <rect data-route='202'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(202, 3) }"
        height="48"
        width="64"
        x="288" y="672">
    </rect>

    <text style="font-size: 32px" x="296" y="706">202</text>

</g>


    <!--Route 203-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(203, 3); } ">
    <rect data-route='203'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(203, 3) }"
        height="48"
        width="80"
        x="368" y="672">
    </rect>

    <text style="font-size: 32px" x="384" y="706">203</text>

</g>


    <!--Route 204-->
    

<g

    transform="rotate(90 ,288, 576)"

    data-bind="click:function(){ MapHelper.moveToRoute(204, 3); } ">
    <rect data-route='204'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(204, 3) }"
        height="48"
        width="72"
        x="288" y="528">
    </rect>

    <text style="font-size: 32px" x="300" y="562">204</text>

</g>

    <!--Route 204 Extension-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(204, 3); } ">
    <rect data-route='204'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(204, 3) }"
        height="8"
        width="32"
        x="304" y="648">
    </rect>

</g>


    <!--Route 205-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(205, 3); } ">
    <rect data-route='205'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(205, 3) }"
        height="48"
        width="144"
        x="352" y="432">
    </rect>

    <text style="font-size: 32px" x="400" y="466">205</text>

</g>

    <!--Route 205 Extension-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(205, 3); } ">
    <rect data-route='205'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(205, 3) }"
        height="32"
        width="96"
        x="288" y="480">
    </rect>

</g>

    <!--Route 205 Extension-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(205, 3); } ">
    <rect data-route='205'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(205, 3) }"
        height="64"
        width="48"
        x="336" y="512">
    </rect>

</g>

     <!--Route 205 Extension-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(205, 3); } ">
    <rect data-route='205'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(205, 3) }"
        height="48"
        width="32"
        x="384" y="528">
    </rect>

</g>


    <!--Route 206-->
    

<g

    transform="rotate(90 ,512, 480)"

    data-bind="click:function(){ MapHelper.moveToRoute(206, 3); } ">
    <rect data-route='206'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(206, 3) }"
        height="48"
        width="64"
        x="512" y="432">
    </rect>

    <text style="font-size: 32px" x="520" y="466">206</text>

</g>

    <!--Route 206 Extension-->
    

<g

    transform="rotate(90 ,512, 592)"

    data-bind="click:function(){ MapHelper.moveToRoute(206, 3); } ">
    <rect data-route='206'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(206, 3) }"
        height="48"
        width="64"
        x="512" y="544">
    </rect>

</g>


    <!--Route 207-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(207, 3); } ">
    <rect data-route='207'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(207, 3) }"
        height="48"
        width="96"
        x="512" y="656">
    </rect>

    <text style="font-size: 32px" x="536" y="690">207</text>

</g>


    <!--Route 208-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(208, 3); } ">
    <rect data-route='208'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(208, 3) }"
        height="48"
        width="96"
        x="608" y="656">
    </rect>

    <text style="font-size: 32px" x="632" y="690">208</text>

</g>


    <!--Route 208 extra-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(208, 3); } ">
    <rect data-route='208'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(208, 3) }"
        height="16"
        width="48"
        x="704" y="688">
    </rect>

</g>


    <!--Route 209-->
    

<g

    transform="rotate(90 ,864, 608)"

    data-bind="click:function(){ MapHelper.moveToRoute(209, 3); } ">
    <rect data-route='209'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(209, 3) }"
        height="48"
        width="96"
        x="864" y="560">
    </rect>

    <text style="font-size: 32px" x="888" y="594">209</text>

</g>


    <!--Route 209 extra bit-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(209, 3); } ">
    <rect data-route='209'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(209, 3) }"
        height="48"
        width="16"
        x="848" y="656">
    </rect>

</g>


    <!--Route 209 extra 1-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(209, 3); } ">
    <rect data-route='209'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(209, 3) }"
        height="16"
        width="48"
        x="800" y="688">
    </rect>

</g>


    <!--Route 210 extra-->
    

<g

    transform="rotate(90 ,864, 480)"

    data-bind="click:function(){ MapHelper.moveToRoute(210, 3); } ">
    <rect data-route='210'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(210, 3) }"
        height="48"
        width="64"
        x="864" y="432">
    </rect>

</g>


    <!--Route 210-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(210, 3); } ">
    <rect data-route='210'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(210, 3) }"
        height="48"
        width="96"
        x="816" y="432">
    </rect>

    <text style="font-size: 32px" x="840" y="466">210</text>

</g>


    <!--Route 211-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(211, 3); } ">
    <rect data-route='211'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(211, 3) }"
        height="48"
        width="64"
        x="560" y="432">
    </rect>

    <text style="font-size: 32px" x="568" y="466">211</text>

</g>


    <!--Route 211 extra-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(211, 3); } ">
    <rect data-route='211'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(211, 3) }"
        height="48"
        width="48"
        x="704" y="432">
    </rect>

</g>


    <!--Route 212-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(212, 3); } ">
    <rect data-route='212'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(212, 3) }"
        height="48"
        width="192"
        x="752" y="816">
    </rect>

    <text style="font-size: 32px" x="824" y="850">212</text>

</g>


    <!--Route 212 extra-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(212, 3); } ">
    <rect data-route='212'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(212, 3) }"
        height="128"
        width="48"
        x="752" y="688">
    </rect>

</g>


    <!--Route 213-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(213, 3); } ">
    <rect data-route='213'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(213, 3) }"
        height="48"
        width="160"
        x="1008" y="816">
    </rect>

    <text style="font-size: 32px" x="1064" y="850">213</text>

</g>


    <!--Route 214-->
    

<g

    transform="rotate(90 ,1120, 528)"

    data-bind="click:function(){ MapHelper.moveToRoute(214, 3); } ">
    <rect data-route='214'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(214, 3) }"
        height="48"
        width="288"
        x="1120" y="480">
    </rect>

    <text style="font-size: 32px" x="1240" y="514">214</text>

</g>


    <!--Route 214 extra-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(214, 3); } ">
    <rect data-route='214'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(214, 3) }"
        height="64"
        width="16"
        x="1168" y="640">
    </rect>

</g>


    <!--Route 215-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(215, 3); } ">
    <rect data-route='215'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(215, 3) }"
        height="48"
        width="112"
        x="912" y="480">
    </rect>

    <text style="font-size: 32px" x="944" y="514">215</text>

</g>


    <!--Route 216-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(216, 3); } ">
    <rect data-route='216'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(216, 3) }"
        height="48"
        width="160"
        x="480" y="272">
    </rect>

    <text style="font-size: 32px" x="536" y="306">216</text>

</g>


    <!--Route 216 extra-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(216, 3); } ">
    <rect data-route='216'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(216, 3) }"
        height="16"
        width="64"
        x="640" y="272">
    </rect>

</g>


    <!--Route 217-->
    

<g

    transform="rotate(90 ,480, 80)"

    data-bind="click:function(){ MapHelper.moveToRoute(217, 3); } ">
    <rect data-route='217'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(217, 3) }"
        height="48"
        width="192"
        x="480" y="32">
    </rect>

    <text style="font-size: 32px" x="552" y="66">217</text>

</g>


    <!--Route 217 extra-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(217, 3); } ">
    <rect data-route='217'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(217, 3) }"
        height="16"
        width="128"
        x="528" y="96">
    </rect>

</g>


    <!--Route 217 extra-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(217, 3); } ">
    <rect data-route='217'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(217, 3) }"
        height="32"
        width="16"
        x="464" y="80">
    </rect>

</g>


    <!--Route 218-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(218, 3); } ">
    <rect data-route='218'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(218, 3) }"
        height="48"
        width="80"
        x="144" y="672">
    </rect>

    <text style="font-size: 32px" x="160" y="706">218</text>

</g>


    <!--Route 219-->
    

<g

    transform="rotate(90 ,288, 848)"

    data-bind="click:function(){ MapHelper.moveToRoute(219, 3); } ">
    <rect data-route='219'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(219, 3) }"
        height="48"
        width="80"
        x="288" y="800">
    </rect>

    <text style="font-size: 32px" x="304" y="834">219</text>

</g>


    <!--Route 220-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(220, 3); } ">
    <rect data-route='220'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(220, 3) }"
        height="48"
        width="96"
        x="336" y="880">
    </rect>

    <text style="font-size: 32px" x="360" y="914">220</text>

</g>


    <!--Route 221-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(221, 3); } ">
    <rect data-route='221'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(221, 3) }"
        height="48"
        width="96"
        x="432" y="880">
    </rect>

    <text style="font-size: 32px" x="456" y="914">221</text>

</g>


    <!--Route 222-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(222, 3); } ">
    <rect data-route='222'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(222, 3) }"
        height="48"
        width="80"
        x="1168" y="784">
    </rect>

    <text style="font-size: 32px" x="1184" y="818">222</text>

</g>


    <!--Route 223-->
    

<g

    transform="rotate(90 ,1344, 544)"

    data-bind="click:function(){ MapHelper.moveToRoute(223, 3); } ">
    <rect data-route='223'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(223, 3) }"
        height="48"
        width="224"
        x="1344" y="496">
    </rect>

    <text style="font-size: 32px" x="1432" y="530">223</text>

</g>


    <!--Route 224-->
    

<g

    transform="rotate(90 ,1456, 384)"

    data-bind="click:function(){ MapHelper.moveToRoute(224, 3); } ">
    <rect data-route='224'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(224, 3) }"
        height="48"
        width="80"
        x="1456" y="336">
    </rect>

    <text style="font-size: 32px" x="1472" y="370">224</text>

</g>

    <!--Route 224 Extension-->
    

<g

    transform="rotate(90 ,1448, 416)"

    data-bind="click:function(){ MapHelper.moveToRoute(224, 3); } ">
    <rect data-route='224'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(224, 3) }"
        height="8"
        width="48"
        x="1448" y="408">
    </rect>

</g>

    <!--Route 224 Extension (Flower Path)-->
    

<g

    transform="rotate(90 ,1456, 48)"

    data-bind="click:function(){ MapHelper.moveToRoute(224, 3); } ">
    <rect data-route='224'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(224, 3) }"
        height="48"
        width="336"
        x="1456" y="0">
    </rect>

</g>


    <!--Route 225-->
    

<g

    transform="rotate(90 ,960, 112)"

    data-bind="click:function(){ MapHelper.moveToRoute(225, 3); } ">
    <rect data-route='225'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(225, 3) }"
        height="48"
        width="104"
        x="960" y="64">
    </rect>

    <text style="font-size: 32px" x="988" y="98">225</text>

</g>

    <!--Route 225 extra-->
    

<g

    transform="rotate(90 ,1008, 112)"

    data-bind="click:function(){ MapHelper.moveToRoute(225, 3); } ">
    <rect data-route='225'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(225, 3) }"
        height="16"
        width="48"
        x="1008" y="96">
    </rect>

</g>


    <!--Route 226-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(226, 3); } ">
    <rect data-route='226'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(226, 3) }"
        height="48"
        width="144"
        x="1088" y="112">
    </rect>

    <text style="font-size: 32px" x="1136" y="146">226</text>

</g>


    <!--Route 227-->
    

<g

    transform="rotate(90 ,1184, 48)"

    data-bind="click:function(){ MapHelper.moveToRoute(227, 3); } ">
    <rect data-route='227'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(227, 3) }"
        height="48"
        width="64"
        x="1184" y="0">
    </rect>

    <text style="font-size: 32px" x="1192" y="34">227</text>

</g>


    <!--Route 228-->
    

<g

    transform="rotate(90 ,1232, 112)"

    data-bind="click:function(){ MapHelper.moveToRoute(228, 3); } ">
    <rect data-route='228'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(228, 3) }"
        height="48"
        width="128"
        x="1232" y="64">
    </rect>

    <text style="font-size: 32px" x="1272" y="98">228</text>

</g>


    <!--Route 229-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(229, 3); } ">
    <rect data-route='229'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(229, 3) }"
        height="48"
        width="96"
        x="1232" y="240">
    </rect>

    <text style="font-size: 32px" x="1256" y="274">229</text>

</g>


    <!--Route 230-->
    

<g

    data-bind="click:function(){ MapHelper.moveToRoute(230, 3); } ">
    <rect data-route='230'
        data-bind="attr: { class: MapHelper.calculateRouteCssClass(230, 3) }"
        height="48"
        width="192"
        x="1040" y="240">
    </rect>

    <text style="font-size: 32px" x="1112" y="274">230</text>

</g>


    <!-- ----- -->
    <!-- TOWNS -->
    <!-- ----- -->

    <!--Twinleaf Town-->
    

<rect class="city"
    data-town="Twinleaf Town" 
    x="112"
    y="840"
    height="72"
    width="80"
    data-bind="
        click:function(){MapHelper.moveToTown('Twinleaf Town')},
        attr: { class: MapHelper.calculateTownCssClass('Twinleaf Town') },
        
            css: { flash: MapHelper.ableToTravel() }
        ">
</rect>

    <!--Sandgem Town-->
    

<rect class="city"
    data-town="Sandgem Town" 
    x="272"
    y="784"
    height="64"
    width="64"
    data-bind="
        click:function(){MapHelper.moveToTown('Sandgem Town')},
        attr: { class: MapHelper.calculateTownCssClass('Sandgem Town') },
        ">
</rect>

    <!--Canalave City-->
    

<rect class="city"
    data-town="Canalave City" 
    x="80"
    y="656"
    height="64"
    width="64"
    data-bind="
        click:function(){MapHelper.moveToTown('Canalave City')},
        attr: { class: MapHelper.calculateTownCssClass('Canalave City') },
        ">
</rect>

    <!--Jubilife City-->
    

<rect class="city"
    data-town="Jubilife City" 
    x="224"
    y="656"
    height="64"
    width="144"
    data-bind="
        click:function(){MapHelper.moveToTown('Jubilife City')},
        attr: { class: MapHelper.calculateTownCssClass('Jubilife City') },
        ">
</rect>
    <!--Jubilife City extra-->
    

<rect class="city"
    data-town="Jubilife City" 
    x="224"
    y="648"
    height="8"
    width="80"
    data-bind="
        click:function(){MapHelper.moveToTown('Jubilife City')},
        attr: { class: MapHelper.calculateTownCssClass('Jubilife City') },
        ">
</rect>

    <!--Oreburgh City-->
    

<rect class="city"
    data-town="Oreburgh City" 
    x="448"
    y="656"
    height="64"
    width="64"
    data-bind="
        click:function(){MapHelper.moveToTown('Oreburgh City')},
        attr: { class: MapHelper.calculateTownCssClass('Oreburgh City') },
        ">
</rect>

    <!--Floaroma Town-->
    

<rect class="city"
    data-town="Floaroma Town" 
    x="272"
    y="512"
    height="64"
    width="64"
    data-bind="
        click:function(){MapHelper.moveToTown('Floaroma Town')},
        attr: { class: MapHelper.calculateTownCssClass('Floaroma Town') },
        ">
</rect>

    <!--Eterna City-->
    

<rect class="city"
    data-town="Eterna City" 
    x="496"
    y="416"
    height="64"
    width="64"
    data-bind="
        click:function(){MapHelper.moveToTown('Eterna City')},
        attr: { class: MapHelper.calculateTownCssClass('Eterna City') },
        ">
</rect>

    <!--Hearthome City-->
    

<rect class="city"
    data-town="Hearthome City" 
    x="704"
    y="624"
    height="64"
    width="144"
    data-bind="
        click:function(){MapHelper.moveToTown('Hearthome City')},
        attr: { class: MapHelper.calculateTownCssClass('Hearthome City') },
        ">
</rect>

    <!--Hearthome City extra-->
    

<rect class="city"
    data-town="Hearthome City" 
    x="704"
    y="616"
    height="8"
    width="80"
    data-bind="
        click:function(){MapHelper.moveToTown('Hearthome City')},
        attr: { class: MapHelper.calculateTownCssClass('Hearthome City') },
        ">
</rect>

    <!--Celestic Town-->
    

<rect class="city"
    data-town="Celestic Town" 
    x="752"
    y="416"
    height="64"
    width="64"
    data-bind="
        click:function(){MapHelper.moveToTown('Celestic Town')},
        attr: { class: MapHelper.calculateTownCssClass('Celestic Town') },
        ">
</rect>

    <!--Veilstone City-->
    

<rect class="city"
    data-town="Veilstone City" 
    x="1024"
    y="464"
    height="64"
    width="144"
    data-bind="
        click:function(){MapHelper.moveToTown('Veilstone City')},
        attr: { class: MapHelper.calculateTownCssClass('Veilstone City') },
        ">
</rect>

    <!--Veilstone City extra-->
    

<rect class="city"
    data-town="Veilstone City" 
    x="1024"
    y="456"
    height="8"
    width="80"
    data-bind="
        click:function(){MapHelper.moveToTown('Veilstone City')},
        attr: { class: MapHelper.calculateTownCssClass('Veilstone City') },
        ">
</rect>

    <!--Solaceon Town-->
    

<rect class="city"
    data-town="Solaceon Town" 
    x="848"
    y="544"
    height="64"
    width="64"
    data-bind="
        click:function(){MapHelper.moveToTown('Solaceon Town')},
        attr: { class: MapHelper.calculateTownCssClass('Solaceon Town') },
        ">
</rect>

    <!--Pastoria City-->
    

<rect class="city"
    data-town="Pastoria City" 
    x="944"
    y="800"
    height="64"
    width="64"
    data-bind="
        click:function(){MapHelper.moveToTown('Pastoria City')},
        attr: { class: MapHelper.calculateTownCssClass('Pastoria City') },
        ">
</rect>

    <!--Sunyshore City-->
    

<rect class="city"
    data-town="Sunyshore City" 
    x="1248"
    y="768"
    height="64"
    width="144"
    data-bind="
        click:function(){MapHelper.moveToTown('Sunyshore City')},
        attr: { class: MapHelper.calculateTownCssClass('Sunyshore City') },
        ">
</rect>

    <!--Sunyshore City extra-->
    

<rect class="city"
    data-town="Sunyshore City" 
    x="1248"
    y="760"
    height="8"
    width="80"
    data-bind="
        click:function(){MapHelper.moveToTown('Sunyshore City')},
        attr: { class: MapHelper.calculateTownCssClass('Sunyshore City') },
        ">
</rect>

    <!--Snowpoint City-->
    

<rect class="city"
    data-town="Snowpoint City" 
    x="528"
    y="24"
    height="72"
    width="80"
    data-bind="
        click:function(){MapHelper.moveToTown('Snowpoint City')},
        attr: { class: MapHelper.calculateTownCssClass('Snowpoint City') },
        ">
</rect>

    <!--Fight Area-->
    

<rect class="city"
    data-town="Fight Area" 
    x="960"
    y="216"
    height="72"
    width="80"
    data-bind="
        click:function(){MapHelper.moveToTown('Fight Area')},
        attr: { class: MapHelper.calculateTownCssClass('Fight Area') },
        ">
</rect>

    <!--Survival Area-->
    

<rect class="city"
    data-town="Survival Area" 
    x="1024"
    y="96"
    height="64"
    width="64"
    data-bind="
        click:function(){MapHelper.moveToTown('Survival Area')},
        attr: { class: MapHelper.calculateTownCssClass('Survival Area') },
        ">
</rect>

    <!--Resort Area-->
    

<rect class="city"
    data-town="Resort Area" 
    x="1264"
    y="288"
    height="64"
    width="64"
    data-bind="
        click:function(){MapHelper.moveToTown('Resort Area')},
        attr: { class: MapHelper.calculateTownCssClass('Resort Area') },
        ">
</rect>

    <!--Pal Park-->
    

<rect class="city"
    data-town="Pal Park" 
    x="528"
    y="864"
    height="64"
    width="64"
    data-bind="
        click:function(){MapHelper.moveToTown('Pal Park')},
        attr: { class: MapHelper.calculateTownCssClass('Pal Park') },
        ">
</rect>

    <!--Pokemon League Sinnoh-->
    

<rect class="city"
    data-town="Pokemon League Sinnoh" 
    x="1288"
    y="387.2"
    height="108.8"
    width="160"
    data-bind="
        click:function(){MapHelper.moveToTown('Pokemon League Sinnoh')},
        attr: { class: MapHelper.calculateTownCssClass('Pokemon League Sinnoh') },
        ">
</rect>

    <!-- -------- -->
    <!-- DUNGEONS -->
    <!-- -------- -->

    <!--Lake Verity-->
    

<rect class="city"
    data-town="Lake Verity" 
    x="48"
    y="784"
    height="64"
    width="64"
    data-bind="click:function(){MapHelper.moveToTown('Lake Verity')},
        attr: { class: MapHelper.calculateTownCssClass('Lake Verity') }">
</rect>

    <!--Ravaged Path-->
    

<rect class="city"
    data-town="Ravaged Path" 
    x="224"
    y="592"
    height="48"
    width="64"
    data-bind="click:function(){MapHelper.moveToTown('Ravaged Path')},
        attr: { class: MapHelper.calculateTownCssClass('Ravaged Path') }">
</rect>

    <!--Eterna Forest-->
    

<rect class="city"
    data-town="Eterna Forest" 
    x="288"
    y="432"
    height="48"
    width="64"
    data-bind="click:function(){MapHelper.moveToTown('Eterna Forest')},
        attr: { class: MapHelper.calculateTownCssClass('Eterna Forest') }">
</rect>

    <!--Old Chateau-->
    

<rect class="city"
    data-town="Old Chateau" 
    x="224"
    y="464"
    height="48"
    width="64"
    data-bind="click:function(){MapHelper.moveToTown('Old Chateau')},
        attr: { class: MapHelper.calculateTownCssClass('Old Chateau') }">
</rect>

    <!--Oreburgh Gate-->
    

<rect class="city"
    data-town="Oreburgh Gate" 
    x="384"
    y="624"
    height="48"
    width="64"
    data-bind="click:function(){MapHelper.moveToTown('Oreburgh Gate')},
        attr: { class: MapHelper.calculateTownCssClass('Oreburgh Gate') }">
</rect>

    <!--Wayward Cave-->
    

<rect class="city"
    data-town="Wayward Cave" 
    x="512"
    y="544"
    height="48"
    width="48"
    data-bind="click:function(){MapHelper.moveToTown('Wayward Cave')},
        attr: { class: MapHelper.calculateTownCssClass('Wayward Cave') }">
</rect>

    <!--Mt. Coronet North-->
    

<rect class="city"
    data-town="Mt. Coronet North" 
    x="640"
    y="352"
    height="64"
    width="96"
    data-bind="click:function(){MapHelper.moveToTown('Mt. Coronet North')},
        attr: { class: MapHelper.calculateTownCssClass('Mt. Coronet North') }">
</rect>

    <!--Mt. Coronet North extra-->
    

<rect class="city"
    data-town="Mt. Coronet North" 
    x="704"
    y="416"
    height="16"
    width="32"
    data-bind="click:function(){MapHelper.moveToTown('Mt. Coronet North')},
        attr: { class: MapHelper.calculateTownCssClass('Mt. Coronet North') }">
</rect>

    <!--Mt. Coronet North extra 2-->
    

<rect class="city"
    data-town="Mt. Coronet North" 
    x="640"
    y="288"
    height="64"
    width="64"
    data-bind="click:function(){MapHelper.moveToTown('Mt. Coronet North')},
        attr: { class: MapHelper.calculateTownCssClass('Mt. Coronet North') }">
</rect>

    <!--Spear Pillar-->
    

<rect class="city"
    data-town="Spear Pillar" 
    x="640"
    y="496"
    height="96"
    width="64"
    data-bind="click:function(){MapHelper.moveToTown('Spear Pillar')},
        attr: { class: MapHelper.calculateTownCssClass('Spear Pillar') }">
</rect>

    <!--Hall of Origin-->
    

<rect class="city"
    data-town="Hall of Origin" 
    x="624"
    y="416"
    height="80"
    width="80"
    data-bind="click:function(){MapHelper.moveToTown('Hall of Origin')},
        attr: { class: MapHelper.calculateTownCssClass('Hall of Origin') }">
</rect>

    <!--Mt. Coronet South-->
    

<rect class="city"
    data-town="Mt. Coronet South" 
    x="592"
    y="528"
    height="128"
    width="48"
    data-bind="click:function(){MapHelper.moveToTown('Mt. Coronet South')},
        attr: { class: MapHelper.calculateTownCssClass('Mt. Coronet South') }">
</rect>

    <!--Mt. Coronet South extra-->
    

<rect class="city"
    data-town="Mt. Coronet South" 
    x="640"
    y="592"
    height="64"
    width="16"
    data-bind="click:function(){MapHelper.moveToTown('Mt. Coronet South')},
        attr: { class: MapHelper.calculateTownCssClass('Mt. Coronet South') }">
</rect>

    <!--Lake Valor-->
    

<rect class="city"
    data-town="Lake Valor" 
    x="1056"
    y="752"
    height="64"
    width="64"
    data-bind="click:function(){MapHelper.moveToTown('Lake Valor')},
        attr: { class: MapHelper.calculateTownCssClass('Lake Valor') }">
</rect>

    <!--Distortion World-->
    

<rect class="city"
    data-town="Distortion World" 
    x="1184"
    y="624"
    height="80"
    width="80"
    data-bind="click:function(){MapHelper.moveToTown('Distortion World')},
        attr: { class: MapHelper.calculateTownCssClass('Distortion World') }">
</rect>

    <!--Lake Acuity-->
    

<rect class="city"
    data-town="Lake Acuity" 
    x="464"
    y="16"
    height="64"
    width="64"
    data-bind="click:function(){MapHelper.moveToTown('Lake Acuity')},
        attr: { class: MapHelper.calculateTownCssClass('Lake Acuity') }">
</rect>

    <!--Snowpoint Temple-->
    

<rect class="city"
    data-town="Snowpoint Temple" 
    x="608"
    y="0"
    height="96"
    width="48"
    data-bind="click:function(){MapHelper.moveToTown('Snowpoint Temple')},
        attr: { class: MapHelper.calculateTownCssClass('Snowpoint Temple') }">
</rect>

    <!--Fullmoon Island-->
    

<rect class="city"
    data-town="Fullmoon Island" 
    x="64"
    y="96"
    height="48"
    width="48"
    data-bind="click:function(){MapHelper.moveToTown('Fullmoon Island')},
        attr: { class: MapHelper.calculateTownCssClass('Fullmoon Island') }">
</rect>

    <!--Newmoon Island-->
    

<rect class="city"
    data-town="Newmoon Island" 
    x="240"
    y="96"
    height="48"
    width="48"
    data-bind="click:function(){MapHelper.moveToTown('Newmoon Island')},
        attr: { class: MapHelper.calculateTownCssClass('Newmoon Island') }">
</rect>

    <!--Iron Island-->
    

<rect class="city"
    data-town="Iron Island" 
    x="160"
    y="384"
    height="48"
    width="48"
    data-bind="click:function(){MapHelper.moveToTown('Iron Island')},
        attr: { class: MapHelper.calculateTownCssClass('Iron Island') }">
</rect>

    <!--Flower Paradise-->
    

<rect class="city"
    data-town="Flower Paradise" 
    x="1456"
    y="0"
    height="48"
    width="64"
    data-bind="click:function(){MapHelper.moveToTown('Flower Paradise')},
        attr: { class: MapHelper.calculateTownCssClass('Flower Paradise') }">
</rect>

    <!--Stark Mountain-->
    

<rect class="city"
    data-town="Stark Mountain" 
    x="1104"
    y="0"
    height="48"
    width="160"
    data-bind="click:function(){MapHelper.moveToTown('Stark Mountain')},
        attr: { class: MapHelper.calculateTownCssClass('Stark Mountain') }">
</rect>

    <!--Victory Road Sinnoh-->
    

<rect class="city"
    data-town="Victory Road Sinnoh" 
    x="1344"
    y="496"
    height="48"
    width="48"
    data-bind="click:function(){MapHelper.moveToTown('Victory Road Sinnoh')},
        attr: { class: MapHelper.calculateTownCssClass('Victory Road Sinnoh') }">
</rect>

    <!-- ------------------ -->
    <!-- PLACES OF INTEREST -->
    <!-- ------------------ -->

    

<rect class="city"
    data-town="Dock" 
    x="96"
    y="592"
    height="64"
    width="48"
    data-bind="click: function(){MapHelper.openShipModal()}, attr: { class: MapHelper.calculateTownCssClass(&#39;Canalave City&#39;) }">
</rect>
</g>


                        </svg>
                    </div>
                </div>
            </div>
        </div>

        <!--Right column-->
        <div id="right-column" class="col-lg-3 col-md-6">

            <!-- Oak Items -->
            <div id="oakItemsContainer" class="card sortable border-secondary mb-3" data-bind="visible: App.game.oakItems.canAccess()">
    <div class="card-header p-0" data-toggle="collapse" href="#oakItemsBody">
        <span style="text-align:center">Oak Items</span>
    </div>
    <button class='btn btn-sm btn-primary' style="position: absolute; right: 0px; top: 0px; width: auto; height: 41px;" href="#oakItemsModal" data-toggle="modal">
        List
    </button>
    <div id="oakItemsBody" class="card-body show p-0">
      <table class="table table-bordered table-striped m-0">
        <!--
        <thead>
          <tr>
            <td class="clickable table-primary p-0" colspan="2" href="#oakItemsModal" data-toggle="modal">
              Open menu
            </td>
          <tr>
        </thead>
        -->
        <tbody data-bind="foreach: App.game.oakItems.itemList">
          <tr data-bind="if: $data.isActive, tooltip: { html: true, title: $data.tooltip, trigger: 'hover', placement:'bottom' }">
            <td class="tight p-1">
              <img class="clickable" href="#oakItemsModal" data-toggle="modal" src="" data-bind="attr:{ src: 'assets/images/oakitems/' + OakItems.OakItem[$data.name] + '.png'}" width="32px">
            </td>
            <td class="p-0">
              <div class="progress" style="height: 40px;">
                  <div class="progress-bar bg-primary" role="progressbar"
                      data-bind="attr:{ style: 'width:' + ($data.isMaxLevel() ? 100 : $data.expPercentage) + '%' },
                         css: {
                           'bg-success': $data.hasEnoughExp() && !$data.isMaxLevel(),
                           'bg-primary': !$data.hasEnoughExp() || $data.isMaxLevel(),
                         }"
                      aria-valuemin="0" aria-valuemax="100">
                      <!-- ko if: !$data.hasEnoughExp() && !$data.isMaxLevel() -->
                      <span data-bind="text: $data.progressString" style="font-size: 15px;"></span>
                      <!-- /ko -->
                      <!-- ko if: $data.hasEnoughExp() && !$data.isMaxLevel() -->
                      <span class="clickable" data-bind="html: 'Upgrade (' + $data.calculateCost().amount.toLocaleString('en-US') + ' <img src=assets/images/currency/money.png height=18px/>)',
                        click: function(){ $data.buy(); }" style="font-size: 15px;">
                        Upgrade
                      </span>
                      <!-- /ko -->
                      <!-- ko if: $data.isMaxLevel() -->
                      <span style="font-size: 15px;">MAX LEVEL!</span>
                      <!-- /ko -->
                  </div>
              </div>
            </td>
          </tr>
        </tbody>
        <!-- ko if: App.game.oakItems.hasAvailableSlot() -->
        <tfoot>
          <tr>
            <td class="clickable table-warning text-light" colspan="2" href="#oakItemsModal" data-toggle="modal">
              Equip another oak item!
            </td>
          </tr>
        </tfoot>
        <!-- /ko -->
      </table>
    </div>

</div>


            <!-- Current Quest -->
            <div id="questDisplayContainer" class="card sortable border-secondary mb-3">
    <!-- ko if: QuestLineHelper.isTutorialCompleted() -->
        <div class="card-header p-0" data-toggle="collapse" href="#questDisplayBody">
            <span data-bind='text: "Quests (" + App.game.quests.currentQuests().length + "/" + App.game.quests.questSlots() + ")"'></span>
        </div>
        <button class="btn btn-sm btn-primary" style="position: absolute; right: 0px; top: 0px; width: auto; height: 41px;"
                data-bind="click: function(){$('#QuestModal').modal('show')}">
            List
        </button>
    <!-- /ko -->

    <div id="questDisplayBody" class="card-body p-0 show">
        <!-- ko if: App.game.quests.currentQuests().length == 0 && QuestLineHelper.isTutorialCompleted()-->
            <span class="pt-2 pb-2">No active quest</span>
        <!-- /ko -->
        <table width="100%">
            <!-- List of player quests -->
            <tbody data-bind="foreach: App.game.quests.currentQuests()">
                <tr class="text-center">
                    <td colspan="2" data-bind="text: $data.description"></td>
                </tr>
                <tr>
                    <td width="70%" class="p-0">
                        <div class="progress p-0">
                            <div class="progress-bar bg-primary" role="progressbar"
                                data-bind="attr:{ style: 'width:' + ($data.progress() * 100) + '%'}"
                                aria-valuemin="0" aria-valuemax="100">
                                <span data-bind="text: $data.progressText">0 / 1000</span>
                            </div>
                        </div>
                    </td>
                    <td width="30%" class="p-0">
                        <!-- ko ifnot: $data.isCompleted() -->
                        <button class="btn btn-danger btn-sm btn-block p-0" data-bind="click: () => { App.game.quests.quitQuest($data.index, true) }">
                            Quit
                        </button>
                        <!-- /ko -->
                        <!-- ko if: $data.isCompleted() -->
                        <button class="btn btn-success btn-sm btn-block p-0" data-bind="click: () => { App.game.quests.claimQuest($data.index) }">
                            claim
                        </button>
                        <!-- /ko -->
                    </td>
                </tr>
            </tbody>
            <!-- List of quest line quests -->
            <tbody id="questLines" data-bind="foreach: App.game.quests.questLines()">
                <!-- ko if: $data.state() == QuestLineState.started -->
                <tr>
                    <td colspan="2">
                        <div class="card-header">
                            <knockout data-bind="text: $data.name"></knockout>
                            <knockout class="info text-primary" data-bind="tooltip: { title: $data.description, trigger: 'hover', placement:'left' }">ⓘ</knockout>
                        </div>
                    </td>
                </tr>
                <tr class="text-center">
                    <td colspan="2" data-bind="text: $data.curQuestObject().description"></td>
                </tr>
                <tr>
                    <td colspan="2" class="p-0">
                        <div class="progress p-0">
                            <div class="progress-bar bg-success" role="progressbar"
                                data-bind="attr:{ style: 'width:' + ($data.curQuestObject().progress() * 100) + '%'}"
                                aria-valuemin="0" aria-valuemax="100">
                                <span data-bind="text: ko.pureComputed(function(){return $data.curQuestObject().progressText()})">0/1000</span>
                            </div>
                        </div>
                    </td>
                </tr>
                <!-- /ko -->
            </tbody>
        </table>
  </div>
</div>


            <!-- Egg Slots/Breeding-->
            <div id="breedingDisplay" class="card sortable border-secondary mb-3" data-bind="visible: App.game.breeding.canAccess()">
    <div class="card-header p-0" data-toggle="collapse" href="#eggList">
        <span>Hatchery</span>
    </div>
    <button class='btn btn-sm btn-primary' style="position: absolute; right: 0px; top: 0px; width: auto; height: 41px;"
            data-bind='click: function(){ BreedingController.openBreedingModal(); BreedingController.filterBreedableList() }'>
        List
    </button>
    <div id='eggList' class="card-body p-0 show">
      <div class="row m-0" data-bind="foreach: App.game.breeding.eggList">
        <div class="col-3 col-md-6 p-0 eggSlot">
          <div class="content">
            <div data-bind="if: $index() === App.game.breeding.eggSlots">
                <p>
                  <br/>
                  <span data-bind="template: { name: 'currencyTemplate', data: {'amount': App.game.breeding.nextEggSlotCost().amount, 'currency': GameConstants.Currency.questPoint}}"></span>
                </p>
                <button class='btn btn-primary' onclick='App.game.breeding.buyEggSlot()'
                        data-bind='css: {disabled: App.game.wallet.currencies[GameConstants.Currency.questPoint] <= App.game.breeding.nextEggSlotCost().amount}'>Unlock</button>
            </div>
            <div data-bind="visible: $index() > App.game.breeding.eggSlots" style="margin-top: 20px;">
                <img src="assets/images/breeding/lock.svg">
            </div>
            <!-- ko ifnot: $data.isNone() -->
            <div style="margin-top: 20px;" class="clickable" data-bind="click: function(){ if (progress() >= 100) App.game.breeding.hatchPokemonEgg($index()) }">
                <!-- ko if: $data.type == EggType.Fossil -->
                <img data-bind="attr: {src: BreedingController.getEggImage($data)}, class: BreedingController.getEggCssClass($data)"/>
                <!-- /ko -->
                <!-- ko ifnot: $data.type == EggType.Fossil -->
                <div data-bind="template: { name: 'eggSVGTemplate', data: $data}, class: BreedingController.getEggCssClass($data)"></div>
                <!-- /ko -->

                <div class="progress" data-bind='visible: progress() < 100'>
                    <div class="progress-bar bg-success" role="progressbar"
                         data-bind="attr:{ style: 'width:' + $data.progress() + '%' }"
                         aria-valuemin="0" aria-valuemax="100">
                        <!-- ko if: Settings.getSetting('breedingDisplay').observableValue() == 'stepCount' -->
                        <span data-bind="text: $data.progressText()"></span>
                        <!-- /ko -->
                        <!-- ko if: Settings.getSetting('breedingDisplay').observableValue() == 'percentage' -->
                        <span data-bind="text: Math.floor($data.progress()) + '%'"></span>
                        <!-- /ko -->
                    </div>
                </div>
                <div class="progress" data-bind='visible: progress() >= 100'>
                    <div class="progress-bar bg-success" role="progressbar"
                    data-bind="attr:{ style: 'width: 100%; cursor: pointer;' }, text: 'Hatch!'"
                    aria-valuemin="0" aria-valuemax="100">
                    </div>
                </div>
            </div>
            <!-- /ko -->
          </div>
        </div>
      </div>
    </div>
</div>


            <!-- Shortcuts Menu -->
            <div id="shortcutsContainer" class="card sortable border-secondary mb-3" data-bind="visible: player.highestRegion">
    <div class="card-header p-0" data-toggle="collapse" href="#shortcutsBody">
        <span style="text-align:center">Shortcuts</span>
    </div>
    <div id="shortcutsBody" class="card-body show p-0">
      <table class="table table-sm m-0">
        <tbody>
          <tr data-bind="visible: Underground.canAccess">
            <td class="p-0">
              <button class="btn btn-block btn-primary m-0" onclick="Underground.openUndergroundModal()">
                  Underground
              </button>
            </td>
          </tr>
          <tr data-bind="visible: App.game.farming.canAccess">
            <td class="p-0">
              <button class="btn btn-block btn-primary m-0" onclick="FarmController.openFarmModal()">
                  Farm
              </button>
            </td>
          </tr>
          <tr data-bind="visible: App.game.statistics.gymsDefeated[GameConstants.getGymIndex('Champion Lance')]">
            <td class="p-0">
              <button class="btn btn-block btn-primary m-0" onclick="ShopHandler.showShop(pokeMartShop);player.currentTown('Poké Mart');" href="#shopModal" data-toggle="modal">
                  Poké Mart
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
</div>

        </div>

    </div>
</div>

<!--ShopModal-->
<div class="modal fade noselect" id="shopModal" tabindex="-1" role="dialog"
     aria-labelledby="shopModalLabel">
    <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header text-center">
                <h4 data-bind="text: player.currentTown().endsWith('Mart') ? player.currentTown() : player.currentTown() + ' Shop'">Shop</h4>
                <button type="button" class="btn btn-primary" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="row justify-content-center" data-bind="foreach: [...new Set(ShopHandler.shopObservable().items().map(i => i.currency))]">
                    <h4 class="col-6 col-sm-4 col-lg-2">
                        <span data-bind="template: { name: 'currencyTemplate', data: { amount: App.game.wallet.currencies[$data], currency: $data, reduced: true }}"></span>
                    </h4>
                </div>
                <div class="row justify-content-center" data-bind="foreach: ShopHandler.shopObservable().items">
                    <div class="col-6 col-sm-4 col-lg-3">
                       <button class="shopItem clickable btn btn-block btn-secondary"
                           data-bind="click: function() {ShopHandler.setSelected($index())},
                           css: { active: ShopHandler.selected() == $index() },
                           attr: { disabled: !$data.isAvailable() },
                           tooltip: {
                              title: $data.description ? $data.name().replace('_', ' ') + '<br/>' + $data.description : '',
                              trigger: 'hover',
                              placement:'bottom',
                              html: true
                            }">
                           <knockout data-bind="if: ($data instanceof CaughtIndicatingItem)">
                               <span style="position: absolute; top: 15px; right: 20px;" 
                                     data-bind="template: { name: 'caughtStatusTemplate', data: {'status': $data.getCaughtStatus()}}">
                               </span>
                           </knockout>
                           <img src="" height="36px" data-bind="attr:{ src: 'assets/images/items/' + name().replace(/[^\w.-\\(\\)]/g, '_') + '.png' }">
                           <p data-bind="text: GameConstants.humanifyString(name())">Item Name</p>
                           <div data-bind="if: $data.isAvailable()">
                                <span data-bind="template: { name: 'currencyTemplate', data: {'amount': totalPrice(ShopHandler.amount()), 'currency': currency, 'reducedThreshold': 1e10}}"></span>
                            </div>
                            <div data-bind="ifnot: $data.isAvailable()">
                                <span>Sold Out</span>
                            </div>
                        </button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="row justify-content-center">
                    <div class="input-group m-0" style="margin-bottom: 6px; margin-top: 6px">
                        <div class="input-group-prepend">
                            <button class="btn btn-warning btn-outline-dark smallButton smallFont" onclick="ShopHandler.resetAmount()">
                                Reset
                            </button>
                        </div>
                        <input id="amountOfItems" type="number" class="outline-dark form-control form-control-number"
                                value="1" min="1" required name="amountOfItems"
                                oninput="ShopHandler.amount(parseInt($(this).val().toString(), 10) || 0);"
                                onchange="ShopHandler.amount(parseInt($(this).val().toString(), 10) || 0);" title=""/>
                        <div class="input-group-append">
                            <!-- ko if: Settings.getSetting('shopButtons').observableValue() == 'original' -->
                                <button class="btn btn-secondary smallButton smallFont" type="button" onclick="ShopHandler.increaseAmount(10)">
                                    +10
                                </button>
                                <button class="btn btn-secondary smallButton smallFont" type="button" onclick="ShopHandler.increaseAmount(100)">
                                    +100
                                </button>
                            <!-- /ko -->
                            <!-- ko if: Settings.getSetting('shopButtons').observableValue() == 'multiplication' -->
                                <button class="btn btn-secondary smallButton smallFont" type="button" onclick="ShopHandler.multiplyAmount(10)">
                                    &times;10
                                </button>
                                <button class="btn btn-secondary smallButton smallFont" type="button" onclick="ShopHandler.multiplyAmount(0.1)">
                                    &div;10
                                </button>
                            <!-- /ko -->
                            <!-- ko if: Settings.getSetting('shopButtons').observableValue() == 'bigplus' -->
                                <button class="btn btn-secondary smallButton smallFont" type="button" onclick="ShopHandler.increaseAmount(100)">
                                    +100
                                </button>
                                <button class="btn btn-secondary smallButton smallFont" type="button" onclick="ShopHandler.increaseAmount(1000)">
                                    +1000
                                </button>
                            <!-- /ko -->
                            <button class="btn btn-primary smallButton smallFont" type="button" onclick="ShopHandler.maxAmount()">
                                Max
                            </button>
                            <button class="btn-outline-dark" data-bind="attr: {class: ShopHandler.calculateButtonCss()}" onclick="ShopHandler.buyItem()">
                                Buy
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- Receive gym badge Modal -->
<div class="modal fade" data-keyboard="false" data-backdrop="static" id="receiveBadgeModal" tabindex="-1" role="dialog"
aria-labelledby="receiveBadgeModalLabel" aria-hidden="true">
<div class="modal-dialog modal-dialog-scrollable" role="document">
   <div class="modal-content">
       <div class="modal-header">
           <div style="width: 100%;">
               <img src=""
                    data-bind="attr:{ src: 'assets/images/gymLeaders/' + GymRunner.gymObservable().leaderName + '.png'}">
               <h5 class="modal-title" id="receiveBadgeModalLabel"
                   data-bind="text: GymRunner.gymObservable().leaderName.replace(/\d/g,'')">Modal title</h5>

           </div>
       </div>
       <div class="modal-body">
           <p data-bind="text: GymRunner.gymObservable().defeatMessage"></p>
           <!-- ko if: !BadgeTypes[GymRunner.gymObservable().badgeReward].startsWith('Elite') -->
           <img src="" width="56px" data-bind="attr:{ src: 'assets/images/badges/' + BadgeTypes[GymRunner.gymObservable().badgeReward] + '.png'}">
           <!-- /ko -->

       </div>
       <div data-bind="ifnot: GymRunner.gymObservable() instanceof Champion">
           <div class="modal-footer">
               <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
           </div>
       </div>
       <div data-bind="if: GymRunner.gymObservable() instanceof Champion">
           <div class="modal-footer">
               <button type="button" class="btn btn-primary" data-dismiss="modal"
                       onclick="$('#hallOfFameModal').modal('show')">
                   Next
               </button>
           </div>
       </div>

   </div>
</div>
</div>


<!-- Achievements Modal -->
<div class="modal  fade" id="achievementsModal" tabindex="-1" role="dialog"
aria-labelledby="AchievementsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 data-bind="tooltip: { title: 'As you earn achievements, you gain up to 100% (per region) more money and xp from all sources.', trigger: 'hover', placement:'right' }">Achievements Bonus: <u class="text-primary" data-bind="text: AchievementHandler.achievementBonusPercent()"></u></h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <div class="modal-body table-responsive p-0">
                <div class="tab-content p-3">
                    <div class="tab-pane active">
                        <div class="text-left">
                            <div class="form-row">
                                <div class="form-group col-md-4 col-4">
                                    <label>Status</label>
                                    <select class="custom-select" onchange="AchievementHandler.filter.status(this.value)">
                                        <option value="all" selected>All</option>
                                        <option value="false">Incomplete</option>
                                        <option value="true">Completed</option>
                                    </select>
                                </div>
                                <div class="form-group col-md-4 col-4">
                                    <label>Type</label>
                                    <select class="custom-select" onchange="AchievementHandler.filter.type(this.value)">
                                        <option value="all" selected>All</option>
                                        <!-- ko foreach: AchievementHandler.achievementTypes() -->
                                        <option data-bind="value: $data, text: GameConstants.camelCaseToString($data.replace(/Requirement$/i, ''))">Type</option>
                                        <!-- /ko -->
                                    </select>
                                </div>
                                <div class="form-group col-md-4 col-4">
                                    <label>Region</label>
                                    <select class="custom-select" onchange="AchievementHandler.filter.region(this.value)">
                                        <option value="all" selected>All</option>
                                        <!-- ko foreach: GameHelper.enumStrings(GameConstants.Region).filter(r => GameConstants.Region[r] <= player.highestRegion()) -->
                                        <option data-bind="value: GameConstants.Region[$data], text: GameConstants.camelCaseToString($data)">Region</option>
                                        <!-- /ko -->
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <table class="table table-hover table-striped table-sm m-0">
                    <tbody data-bind="template: { name: 'achievementListTemplate', foreach: AchievementHandler.getAchievementListWithIndex()}">
                    </tbody>
                </table>
            </div>

            <div class="modal-footer justify-content-center">
                <button
                  class="btn btn-secondary"
                  onclick="AchievementHandler.navigateIndex(0)"
                  data-bind="
                      disable: AchievementHandler.isNavigateDirectionDisabled(true),
                      css: { disabled: AchievementHandler.isNavigateDirectionDisabled(true) }
                  "
                >
                  <img src="assets/images/arrow-double.svg" style="transform: scaleX(-1);" height="20">
                </button>
                <button
                  class="btn btn-secondary"
                  onclick="AchievementHandler.navigateLeft()"
                  data-bind="
                      disable: AchievementHandler.isNavigateDirectionDisabled(true),
                      css: { disabled: AchievementHandler.isNavigateDirectionDisabled(true) }
                  "
                >
                  <img src="assets/images/arrow.svg" style="transform: scaleX(-1);" height="20">
                </button>
                <div data-bind="text: AchievementHandler.navigateIndex()+1 + '/' + AchievementHandler.numberOfTabs()"></div>
                <button
                  class="btn btn-secondary"
                  onclick="AchievementHandler.navigateRight()"
                  data-bind="
                      disable: AchievementHandler.isNavigateDirectionDisabled(false),
                      css: { disabled: AchievementHandler.isNavigateDirectionDisabled(false) }
                  "
                >
                  <img src="assets/images/arrow.svg" height="20">
                </button>
                <button
                  class="btn btn-secondary"
                  onclick="AchievementHandler.navigateIndex(AchievementHandler.numberOfTabs() - 1)"
                  data-bind="
                      disable: AchievementHandler.isNavigateDirectionDisabled(false),
                      css: { disabled: AchievementHandler.isNavigateDirectionDisabled(false) }
                  "
                >
                  <img src="assets/images/arrow-double.svg" height="20">
                </button>
            </div>
        </div>
    </div>

    <script type="text/html" id="achievementListTemplate">
        <tr
            class="achievement-row"
            data-bind="css: { 'table-success': isCompleted() , 'table-danger': !isCompleted() }, click: () => {App.game.achievementTracker.trackAchievement($data); $('#achievementsModal').modal('hide');}">
            <td style="text-align:left;vertical-align:middle;"><b><span data-bind="text: name">Name</span></b><br>
                <small><span data-bind="text: description">Description</span></small>
            </td>

            <td style="vertical-align:middle;"><span data-bind="text: getProgress()">1</span>/<span
                    data-bind="text: property.requiredValue">2</span>
            </td>
            <td style="vertical-align:middle;"><span data-bind="text: getProgressPercentage()"></span>%</td>

            <td style="vertical-align:middle;">+<span data-bind="text: getBonus()"></span>%</td>
        </tr>
    </script>
</div>


<!-- Oak Items Modal-->
<div class="modal fade noselect" id="oakItemsModal" tabindex="-1" role="dialog" aria-badgeledby="oakItemsModal">
    <div class="modal-dialog modal-dialog-scrollable modal-sm" role="document">
       <div class="modal-content">
           <div class="modal-header">
               <h5 data-bind="text: 'Oak Items Equipped: ' + App.game.oakItems.activeCount() + '/' + App.game.oakItems.maxActiveCount()">Oak Items</h5>
               <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                   <span aria-hidden="true">&times;</span>
               </button>
           </div>
           <div class="modal-body">
              <div class="row" data-bind="foreach: App.game.oakItems.itemList">
                  <div class="col p-0">
                      <button class="p-0 btn"
                          data-bind="css: {
                             'btn-primary': $data.isActive,
                             'btn-outline-secondary': !$data.isActive
                           }">
                          <img class="clickable" style="height: 32px;" src=""
                               data-bind="attr:{ src: 'assets/images/oakitems/' + OakItems.OakItem[$data.name] + '.png'},
                                css: {
                                  'oak-item-locked': !App.game.oakItems.isUnlocked($data.name)
                                },
                                event: {
                                  mouseover: function(){OakItemController.hover($data.name)},
                                  click: function(){OakItemController.click($data.name)},
                                }">
                        </button>
                  </div>
              </div>
          </div>
          <div class="modal-footer p-0">
              <table class="table table-bordered text-center m-0">
                <thead>
                  <th colspan="2">
                    <strong data-bind="text: GameConstants.humanifyString(OakItems.OakItem[OakItemController.inspectedItem])"></strong>
                  </th>
                </thead>
                <tbody>
                  <!-- ko if: App.game.oakItems.isUnlocked(OakItemController.inspectedItem) -->
                  <tr>
                    <td colspan="2" data-bind="text: App.game.oakItems.itemList[OakItemController.inspectedItem].description"></td>
                  </tr>
                  <tr>
                    <td colspan="2" class="p-0">
                      <div class="progress" style="height: 40px;">
                          <div class="progress-bar bg-primary" role="progressbar"
                              data-bind="attr:{ style: 'width:' + (App.game.oakItems.itemList[OakItemController.inspectedItem].isMaxLevel() ? 100 : App.game.oakItems.itemList[OakItemController.inspectedItem].expPercentage) + '%' },
                                 css: {
                                   'bg-success': App.game.oakItems.itemList[OakItemController.inspectedItem].hasEnoughExp() && !App.game.oakItems.itemList[OakItemController.inspectedItem].isMaxLevel(),
                                   'bg-primary': !App.game.oakItems.itemList[OakItemController.inspectedItem].hasEnoughExp() || App.game.oakItems.itemList[OakItemController.inspectedItem].isMaxLevel(),
                                 }"
                              aria-valuemin="0" aria-valuemax="100">
                              <!-- ko if: !App.game.oakItems.itemList[OakItemController.inspectedItem].hasEnoughExp() && !App.game.oakItems.itemList[OakItemController.inspectedItem].isMaxLevel() -->
                              <span data-bind="text: App.game.oakItems.itemList[OakItemController.inspectedItem].progressString" style="font-size: 15px;"></span>
                              <!-- /ko -->
                              <!-- ko if: App.game.oakItems.itemList[OakItemController.inspectedItem].hasEnoughExp() && !App.game.oakItems.itemList[OakItemController.inspectedItem].isMaxLevel() -->
                              <span class="clickable" data-bind="html: 'Upgrade (' + App.game.oakItems.itemList[OakItemController.inspectedItem].calculateCost().amount.toLocaleString('en-US') + ' <img src=assets/images/currency/money.png height=18px/>)',
                                click: function(){ App.game.oakItems.itemList[OakItemController.inspectedItem].buy(); }" style="font-size: 15px;">
                                Upgrade
                              </span>
                              <!-- /ko -->
                              <!-- ko if: App.game.oakItems.itemList[OakItemController.inspectedItem].isMaxLevel() -->
                              <span style="font-size: 15px;">MAX LEVEL!</span>
                              <!-- /ko -->
                          </div>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td class="table-dark" style="width: 50%">
                      Level: <span data-bind="text: App.game.oakItems.itemList[OakItemController.inspectedItem].level"></span>
                    </td>
                    <td class="table-dark" style="width: 50%">
                      <!-- ko if: OakItemController.inspectedItem === OakItems.OakItem.Magic_Ball -->
                      Bonus: <span data-bind="text: App.game.oakItems.itemList[OakItemController.inspectedItem].calculateBonusIfActive()"></span>%
                      <!-- /ko -->
                      <!-- ko ifnot: OakItemController.inspectedItem === OakItems.OakItem.Magic_Ball -->
                      Bonus: <span data-bind="text: App.game.oakItems.itemList[OakItemController.inspectedItem].calculateBonusIfActive()"></span>x
                      <!-- /ko -->
                    </td>
                  </tr>
                  <!-- /ko -->
                  <!-- ko ifnot: App.game.oakItems.isUnlocked(OakItemController.inspectedItem) -->
                  <tr>
                    <td colspan="2">Locked!<br/>Capture <span data-bind="text: App.game.oakItems.itemList[OakItemController.inspectedItem].unlockReq - App.game.party.caughtPokemon.length"></span> more unique Pokémon</td>
                  </tr>
                  <tr>

                  </tr>
                  <!-- /ko -->
                </tbody>
              </table>
          </div>
      </div>
  </div>
</div>


<!-- Statistics Modal-->
<div class="modal noselect fade" id="statisticsModal" tabindex="-1" role="dialog" aria-labelledby="statisticsModal">
    <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header" style='justify-content: space-around;'>
                <h5 class="modal-title">Statistics</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body p-0">
                <table class="table table-striped table-hover table-bordered table-sm m-0">
                    <thead>
                      <tr>
                        <th>Statistic</th>
                        <th>Amount</th>
                      </tr>
                    </thead>
                    <tbody data-bind="foreach: App.game.statistics.observables">
                      <tr>
                        <td class="text-left" data-bind="text: GameConstants.camelCaseToString($data)">-</td>
                        <td class="text-left tight"><code data-bind="text:App.game.statistics[$data]().toLocaleString('en-US')">-</code></td>
                      </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>


<!-- Log Book Modal-->
<div class="modal noselect fade" id="logBookModal" tabindex="-1" role="dialog" aria-labelledby="logBookModalLabel">
    <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header" style='justify-content: space-around;'>
                <h5 class="modal-title">Log Book</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            
            <div class="modal-body p-0">
                <table class="table table-striped table-hover table-bordered table-sm m-0">
                    <thead>
                      <tr>
                        <th>Type</th>
                        <th>Message</th>
                        <th>Date</th>
                      </tr>
                    </thead>
                    <tbody data-bind="foreach: App.game.logbook.logs">
                      <tr>
                        <td class="tight" data-bind="html:type.label, class: 'table-' + type.display"></td>
                        <td class="text-left" data-bind="text:description">-</td>
                        <td class="text-left"><code data-bind="text:new Date(date).toLocaleString()">-</code></td>
                      </tr>
                    </tbody>
                </table>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>


<!-- Settings Modal-->
<div class="modal noselect fade" id="settingsModal" tabindex="-1" role="dialog" aria-labelledby="settingsModalLabel">
    <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header" style='justify-content: space-around;'>
                <h5 class="modal-title">Settings</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            
            <div class="modal-body p-0">
                <ul class="nav nav-tabs nav-fill">
                    <li class="nav-item"><a class="nav-link active" href="#settings-display" data-toggle="tab">Display</a></li>
                    <li class="nav-item"><a class="nav-link" href="#settings-sound" data-toggle="tab">Sound</a></li>
                    <li class="nav-item"><a class="nav-link" href="#settings-notifications" data-toggle="tab">Notifications</a></li>
                    <li class="nav-item"><a class="nav-link" href="#settings-other" data-toggle="tab">Other</a></li>
                </ul>

                <div class="tab-content">
                    <div class="tab-pane active" id="settings-display">
                        <table class="table table-striped table-hover m-0">
                            <!-- <thead>
                              <tr>
                                <th>Setting</th>
                                <th>Option</th>
                              </tr>
                            </thead> -->
                            <tbody>
                                <tr data-bind="template: { name: 'MultipleChoiceSettingTemplate', data: Settings.getSetting('theme')}"></tr>
                                <tr data-bind="template: { name: 'MultipleChoiceSettingTemplate', data: Settings.getSetting('backgroundImage')}"></tr>
                                <tr data-bind="template: { name: 'MultipleChoiceSettingTemplate', data: Settings.getSetting('breedingDisplay')}"></tr>
                                <tr data-bind="template: { name: 'MultipleChoiceSettingTemplate', data: Settings.getSetting('shopButtons')}"></tr>
                                <tr data-bind="template: { name: 'MultipleChoiceSettingTemplate', data: Settings.getSetting('eggAnimation')}"></tr>
                                <tr data-bind="template: { name: 'BooleanSettingTemplate', data: Settings.getSetting('showCurrencyGainedAnimation')}"></tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="tab-pane" id="settings-sound">
                        <div data-bind="template: {name: 'RangeSettingTemplate', data: Settings.getSetting('sound.volume')}"></div>
                        <table class="table table-striped table-hover m-0">
                            <tbody data-bind="foreach: Object.values(NotificationConstants.NotificationSound)">
                              <tr data-bind="template: { name: 'BooleanSettingTemplate', data: Settings.getSetting(`sound.${$data.name}`)}"></tr>
                            </tbody>
                        </table>
                    </div> 

                    <div class="tab-pane" id="settings-notifications">
                        <table class="table table-striped table-hover m-0">
                            <tbody data-bind="foreach: Object.values(NotificationConstants.NotificationSetting)">
                                <tr data-bind="template: { name: 'BooleanSettingTemplate', data: $data}"></tr>
                            </tbody>
                        </table>
                    </div> 

                    <div class="tab-pane" id="settings-other">
                        <table class="table table-striped table-hover m-0">
                            <tbody>
                                <tr data-bind="template: { name: 'BooleanSettingTemplate', data: Settings.getSetting('disableAutoDownloadBackupSaveOnUpdate')}"></tr>
                            </tbody>
                        </table>
                    </div> 
                </div>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>


<script type="text/html" id="MultipleChoiceSettingTemplate">
    <td data-bind="text: $data.displayName">setting name</td>
    <td>
        <select class="form-control" onchange="Settings.setSettingByName(this.name, this.value)" data-bind="foreach: $data.options, attr: {name}">
            <option data-bind="text: $data.text, value: $data.value, attr:{ selected: $parent.observableValue() == $data.value}"></option>
        </select>
    </td>
</script>

<script type="text/html" id="BooleanSettingTemplate">
    <td>
        <label data-bind="attr: { for: 'checkbox-' + $data.name }, text: $data.displayName">
            setting name
        </label>
    </td>
    <td>
        <input class="clickable" type="checkbox"
            data-bind="checked: Settings.getSetting($data.name).observableValue(), attr: {name, id: 'checkbox-' + $data.name }"
            onchange="Settings.setSettingByName(this.name, this.checked)"/>
    </td>
</script>

<script type="text/html" id="RangeSettingTemplate">
    <label data-bind="text: `${$data.displayName}: ${$data.observableValue()}`, attr: { for: `setting-${$data.name}` }">setting name</label>
    <input type="range" class="custom-range pl-3 pr-3"
            data-bind="attr: { name: $data.name, id: `setting-${$data.name}`, min: $data.minValue, max: $data.maxValue, step: $data.step},
                       value: $data.observableValue"
            oninput="Settings.setSettingByName(this.name, this.value)">
</script>


<!-- Changelog Modal -->
<div class="modal fade noselect" id="changelogModal" tabindex="-1" role="dialog" aria-badgeledby="changelogModal">
    <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
       <div class="modal-content">
           <div class="modal-header">
               <h5>Changelog</h5>
               <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                   <span aria-hidden="true">&times;</span>
               </button>
           </div>

           <div class="modal-body p-0">
               <table class="table table-striped table-hover table-bordered table-sm m-0">
                   <thead>
                     <tr>
                       <th>Type</th>
                       <th>Message</th>
                     </tr>
                   </thead>
                   <tbody data-bind="foreach: changelogItems">
                     <tr data-bind="css: { 'table-dark': type.label == 'UPDATE' }">
                       <td class="tight" data-bind="html: type.label, class: 'table-' + type.display"></td>
                       <td class="text-left" data-bind="html: description">-</td>
                     </tr>
                   </tbody>
               </table>
           </div>

           <div class="modal-footer">
               <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
           </div>
       </div>
    </div>
</div>


<!-- Changelog Modal -->
<div class="modal fade noselect" id="eventsModal" tabindex="-1" role="dialog" aria-badgeledby="eventsModal">
    <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
       <div class="modal-content">
           <div class="modal-header">
               <h5>Events</h5>
               <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                   <span aria-hidden="true">&times;</span>
               </button>
           </div>

           <div class="modal-body p-0">
               <table class="table table-striped table-hover table-bordered table-sm m-0">
                   <thead>
                     <tr>
                       <th>Event</th>
                       <th>Description</th>
                       <th>Start Time</th>
                       <th>End Time</th>
                     </tr>
                   </thead>
                   <tbody data-bind="foreach: SpecialEvents.events">
                     <!-- ko if: Date.now() < endTime -->
                     <tr>
                       <td data-bind="text: title"></td>
                       <td class="text-left" data-bind="text: description"></td>
                       <td class="text-left"><code data-bind="text: startTime.toLocaleString()">-</code></td>
                       <td class="text-left"><code data-bind="text: endTime.toLocaleString()">-</code></td>
                     </tr>
                     <!-- /ko -->
                   </tbody>
               </table>
           </div>

           <div class="modal-footer">
               <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
           </div>
       </div>
    </div>
</div>


<!-- Start Sequence Modal-->
<div class="modal" id="startSequenceModal" tabindex="-1" role="dialog"
aria-labelledby="startSequenceModalLabel" aria-hidden="true">
<div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
   <div class="modal-content">
       <div class="modal-header">
           <div style="width: 100%;">
               <img src="assets/images/oak.png">
               <h5 class="modal-title" id="startSequenceModalLabel">Professor Oak</h5>
           </div>
       </div>
       <div class="modal-body">
           <p>
               Hello, there! Welcome to the world of Pokémon!<br/>
               My name is Oak, People affectionately refer to me as the Pokémon Professor.<br/>
               This world is inhabited by creatures called Pokémon!<br/>
               For some people, Pokémon are pets. Other use them for battling.<br/>
               As for myself… I study Pokémon as a profession.<br/>
               However, your very own Pokémon legend is about to unfold!<br/>
               A world of dreams and adventures with Pokémon awaits! Let's go!
           </p>
       </div>
       <div class="modal-footer">
           <button type="button" class="btn btn-primary" data-dismiss="modal">Next</button>
       </div>
   </div>
</div>
</div>


<!-- Pick Starter Modal-->
<div class="modal" id="pickStarterModal" tabindex="-1" role="dialog"
aria-labelledby="pickStarterModalLabel" aria-hidden="true">
<div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
   <div class="modal-content">
       <div class="modal-header">
           <div style="width: 100%;">
               <img src="assets/images/oak.png">
               <h5 class="modal-title" id="pickStarterModalLabel">Professor Oak</h5>
           </div>
       </div>
       <div class="modal-body">
           <p id="pickStarterModalText">Oh No! We got ambushed by these pokémon!<br>
               I can only hold off two! Pick the one you want to fight!</p>
           <div class="row justify-content-center">
               <div class="col-lg-8">
                   <div id="starterSelection" class="row">
                       <div class="col">
                           <input class="image-starter" type="image"
                                  src="assets/images/pokemon/1.png"
                                  onclick="StartSequenceRunner.pickStarter(GameConstants.Starter.Bulbasaur)">
                       </div>
                       <div class="col">
                           <input class="image-starter" type="image"
                                  src="assets/images/pokemon/4.png"
                                  onclick="StartSequenceRunner.pickStarter(GameConstants.Starter.Charmander)">
                       </div>
                       <div class="col">
                           <input class="image-starter" type="image"
                                  src="assets/images/pokemon/7.png"
                                  onclick="StartSequenceRunner.pickStarter(GameConstants.Starter.Squirtle)">
                       </div>
                   </div>
               </div>
           </div>
           <p>You can click on it to inflict damage</p>
       </div>
   </div>
</div>
</div>

<!-- Starter Caught Modal-->
<div class="modal" id="starterCaughtModal" tabindex="-1" role="dialog"
aria-labelledby="starterCaughtModalLabel" aria-hidden="true">
<div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
   <div class="modal-content">
       <div class="modal-header">
           <div style="width: 100%;">
               <img src="assets/images/oak.png">
               <h5 class="modal-title" id="starterCaughtModalLabel">Professor Oak</h5>
           </div>
       </div>
       <div class="modal-body">
           <p>
               Hm! Excellent! You have caught your first pokémon!<br>
               This is where your journey begins. <br>
               You can progress to the next route after you have defeated 10 pokémon.<br>
               To help you on your journey, I will give you these <b>Key items</b>!<br>
               You can view all your <b>Key items</b> in the start menu.<br>
           </p>
           <div class="row justify-content-center">
               <div class="col-sm-3">
                   <img
                           title="A television set that is tuned to a program with useful tips for novice TRAINERS"
                           class="key-item"
                           src="assets/images/keyitems/Teachy_tv.png"/>
                   <br>
                   <p>Teachy tv</p>
               </div>
               <div class="col-sm-3">
                   <img
                           title="A case for holding money. It can hold up to 1,000,000 coins"
                           class="key-item"
                           src="assets/images/keyitems/Coin_case.png"/>
                   <br>
                   <p>Coin case</p>
               </div>
               <div class="col-sm-3">
                   <img
                           title="A tiny bag that can hold up to 4 different types of PokéBalls"
                           class="key-item"
                           src="assets/images/keyitems/Pokeball_bag.png"/>
                   <br>
                   <p>PokéBall bag</p>
               </div>

           </div>

       </div>
       <div class="modal-footer">
           <button type="button" class="btn btn-primary" data-dismiss="modal">Next</button>
       </div>
   </div>
</div>
</div>


<!-- Hall of Fame Modal -->
<div class="modal fade" data-keyboard="false" data-backdrop="static" id="hallOfFameModal" tabindex="-1" role="dialog"
aria-labelledby="hallOfFameModalLabel" aria-hidden="true">
<div class="modal-dialog modal-dialog-scrollable" role="document">
   <div class="modal-content">
       <div class="modal-header">
           <div style="width: 100%;">
               <img src="assets/images/oak.png">
               <h5 class="modal-title" id="hallOfFameModalLabel">Professor Oak</h5>
           </div>
       </div>
       <div class="modal-body">
           <p>
               So, you won! Congratulations!<br/>
               You are the new Pokémon League champion!<br/>
               You have grown up so much since you first left with <span data-bind="text: GameConstants.Starter[player.starter]">starter</span>!<br/>
               <br/>
               There are many more regions to explore,<br/>
               In order to move on you will need to capture all available Pokémon from the current region!
           </p>
       </div>
       <div class="modal-footer">
           <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
       </div>
   </div>
</div>
</div>


<!-- Log Book Modal-->
<div class="modal noselect fade" id="nextRegionModal" tabindex="-1" role="dialog" aria-labelledby="nextRegionModal">
    <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-md" role="document">
        <div class="modal-content">
           <div class="modal-header">
               <h5 class="modal-title" data-bind="text: `Travel to ${GameConstants.camelCaseToString(GameConstants.Region[player.highestRegion() + 1])}`">Travel to next region</h5>
               <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                   <span aria-hidden="true">&times;</span>
               </button>
           </div>
           <div class="modal-body">
               <p>
                   <strong>Congratulations on completing the <span data-bind="text: GameConstants.camelCaseToString(GameConstants.Region[player.highestRegion()])"></span> Pokédex!</strong><br/>
                   You can now travel on to <span data-bind="text: GameConstants.camelCaseToString(GameConstants.Region[player.highestRegion() + 1])"></span>!<br/>
                   <br/>
                   <strong>There are a few things you should know before you depart:</strong><br/>
                   When Pokémon are in a Region they're not native to, they will only retain <strong data-bind="text: App.game.party.getRegionAttackMultiplier(player.highestRegion() + 1).toLocaleString(undefined,{style: 'percent'})"></strong> of their total attack.<br/>
                   You will also have to progress to the Dock in <span data-bind="text: GameConstants.camelCaseToString(GameConstants.Region[player.highestRegion() + 1])"></span> before you are able to travel between regions again.
               </p>
               <button class="btn btn-success btn-block" onclick="MapHelper.travelToNextRegion()" data-dismiss="modal">Lets go!</button>
           </div>
       </div>
    </div>
</div>


<!-- Shards Modal -->
<div class="modal fade noselect" id="shardModal" tabindex="-1" role="dialog" aria-badgeledby="shardModal">
    <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
       <div class="modal-content">
            <div class="modal-header">
                <h5>Shards</h5>
                <button type="button" class="btn btn-info"
                        style="position: absolute; right: 0px; top: 0px; width: auto; height: 63px; padding: 10px;"
                        data-bind="tooltip: { title: 'Use shards to upgrade the type effectiveness of your Pokémon. When you defeat a Pokémon, you get shards based on its type.', trigger: 'hover', placement:'left' }">
                    ?
                </button>

            </div>
            <div class="modal-body p-0">
                <table class='table table-sm table-hover m-0'>
                    <!-- ko foreach: Array(Shards.nTypes) -->
                        <thead>
                            <tr>
                                <th colspan="4" class="clickable text-left table-dark text-light" data-toggle="collapse" data-bind="attr: { 'href': '#collapse-shard-' + $index() }">
                                    <h3>
                                        <knockout data-bind="text: PokemonType[$index()]"></knockout>
                                        <div class="float-right">
                                            <img data-bind='attr: { src: "assets/images/shards/" + $index() + ".png" }'/>
                                            <knockout data-bind="text: App.game.shards.shardWallet[$index()].toLocaleString('en-US')"></knockout>
                                        </div>
                                    </h3>
                                </th>
                            </tr>
                        </thead>
                        <tbody class="collapse show" data-bind="attr: { id: 'collapse-shard-' + $index() }">
                            <!-- ko foreach: Array(Shards.nEffects) -->
                                <tr>
                                    <td data-bind='text: GameConstants.TypeEffectiveness[$index()]'></td>
                                    <td width='50%'>
                                        <div class="progress"
                                            data-bind="style: { 'background-color': '#' + TypeHelper.typeColorsLocked[$parentContext.$index()] }">
                                            <div class='progress-bar' role="progressbar"
                                                data-bind="style: { width: (App.game.shards.getShardUpgrade($parentContext.$index(), $index()) * 10) + '%',
                                                                        'background-color': '#' + TypeHelper.typeColors[$parentContext.$index()] }"
                                                aria-valuemin="0" aria-valuemax="100">
                                            </div>
                                            <div class='cell-container' data-bind='foreach: new Array(9)'>
                                                <div class='progress-cell' style='width: 10%'></div>
                                            </div>
                                        </div>
                                    </td>
                                    <td data-bind='text: (GameConstants.TypeEffectivenessValue[GameConstants.TypeEffectiveness[$index()]] 
                                        + (App.game.shards.getShardUpgrade($parentContext.$index(), $index()) * Shards.SHARD_UPGRADE_STEP)).toFixed(1) + "x"'></td>
                                    <td>
                                        <button class='btn btn-block btn-primary'
                                                data-bind='click: function(){App.game.shards.buyShardUpgrade($parentContext.$index(), $index())},
                                                    css: {disabled: !App.game.shards.canBuyShardUpgrade($parentContext.$index(), $index())},
                                                    text: (App.game.shards.hasMaxUpgrade($parentContext.$index(), $index()) ?  "MAXED" : "Buy (" + App.game.shards.getShardUpgradeCost($parentContext.$index(), $index()) + ")")'>
                                        </button>
                                    </td>
                                </tr>
                            <!-- /ko -->
                        </tbody>
                    <!-- /ko -->
                </table>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>


<!-- Breeding Modal-->
<div class="modal fade" id="breedingModal" tabindex="-1" role="dialog"
aria-labelledby="breedingModalLabel" aria-hidden="true">
<div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
   <div class="modal-content">
       <div class="modal-header">
            <h5 class="modal-title" id="breedingModalLabel" data-bind="tooltip: { title: `You can trade your level 100 pokémon for an egg of the same pokémon. Hatched pokémon will gain a ${GameConstants.BREEDING_ATTACK_BONUS}% bonus of their base attack and have a higher chance of becoming shiny!`, trigger: 'hover', placement:'right' }">Day Care <span class="text-primary">ⓘ</span></h5>
            <button class="btn btn-secondary" type="button" data-toggle="collapse" style="margin-left: 25px;"
                    data-target="#breeding-filter" aria-expanded="false" aria-controls="breeding-filter">
                Filters
            </button>
            <button class="btn btn-secondary" type="button" data-toggle="collapse" style="margin-left: 25px;"
                    data-target="#breeding-sort" aria-expanded="false" aria-controls="breeding-sort">
                Sort
            </button>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
       </div>
       <div class="modal-body p-0">
           <ul class="nav nav-tabs nav-fill">
                <li class="nav-item"><a class="nav-link active" href="#breeding-pokemon" data-toggle="tab">Pokemon</a></li>
                <li class="nav-item"><a class="nav-link" href="#breeding-eggs" data-toggle="tab">Eggs</a></li>
                <li class="nav-item"><a class="nav-link" href="#breeding-fossils" data-toggle="tab">Fossils</a></li>
            </ul>

            <div class="tab-content p-3">
                <div class="tab-pane active" id="breeding-pokemon">
                    <div class="text-left">
                        <div class="form-row collapse" id="breeding-filter">
                            <div class="form-group col-md-6 col-6">
                                <label>Search</label>
                                <input autocomplete="off" class="form-control" oninput="BreedingController.filter.search(new RegExp(`(${this.value})`, 'i'))" placeholder="search here"/>
                            </div>
                            <div class="form-group col-md-6 col-6">
                                <label>Display Value</label>
                                <select autocomplete="off" class="custom-select" onchange="BreedingController.displayValue(this.value)">
                                    <option value="attack" selected>Attack</option>
                                    <option value="attackBonus">Attack Bonus</option>
                                    <option value="baseAttack">Base Attack</option>
                                    <option value="eggSteps">Egg Steps</option>
                                </select>
                            </div>
                            <div class="form-group col-md-3 col-6">
                                <label>Region</label>
                                <select autocomplete="off" class="custom-select" onchange="BreedingController.filter.region(+this.value)">
                                    <option value="-2">All</option>
                                    <!-- ko foreach: GameHelper.enumStrings(GameConstants.Region).filter(r => r != 'none' && GameConstants.Region[r] <= player.highestRegion()) -->
                                    <option data-bind="attr: { value: GameConstants.Region[$data] }, text: GameConstants.camelCaseToString($data)">Region</option>
                                    <!-- /ko -->
                                    <option value="-1">None</option>
                                </select>
                            </div>
                            <div class="form-group col-md-3 col-6">
                                <label>Shiny Status</label>
                                <select autocomplete="off" class="custom-select" onchange="BreedingController.filter.shinyStatus(+this.value)">
                                    <option value="-1">All</option>
                                    <option value="0">Not Shiny</option>
                                    <option value="1">Shiny</option>
                                </select>
                            </div>
                            <div class="form-group col-md-3 col-6">
                                <label>Type</label>
                                <select autocomplete="off" class="custom-select" onchange="BreedingController.filter.type1(+this.value)">
                                    <option value="-2">All</option>
                                    <!-- ko foreach: GameHelper.enumStrings(PokemonType).filter(t => t != 'None') -->
                                    <option data-bind="attr: { value: PokemonType[$data] }, text: $data">Type</option>
                                    <!-- /ko -->
                                    <option value="-1">None</option>
                                </select>
                            </div>
                            <div class="form-group col-md-3 col-6">
                                <label>Type</label>
                                <select autocomplete="off" class="custom-select" onchange="BreedingController.filter.type2(+this.value)">
                                    <option value="-2">All</option>
                                    <!-- ko foreach: GameHelper.enumStrings(PokemonType).filter(t => t != 'None') -->
                                    <option data-bind="attr: { value: PokemonType[$data] }, text: $data">Type</option>
                                    <!-- /ko -->
                                    <option value="-1">None</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row collapse" id="breeding-sort">
                            <div class="form-group col" data-bind="with: Settings.getSetting('partySort')">
                                <label>Sort</label>
                                <div class="input-group">
                                    <select autocomplete="off" class="custom-select" onchange="Settings.setSettingByName(this.name, SortOptions[SortOptions[this.value]])"
                                        data-bind="foreach: $data.options, attr: {name}, selectedOptions: [$data.observableValue()]">
                                        <option data-bind="text: $data.text, value: $data.value"></option>
                                    </select>
                                    <div class="input-group-append bg-primary text-light">
                                        <label for="hatcheryPartySortDirection" class="clickable m-0 pl-2 pr-2" style="font-size: 22px;" data-bind="text: Settings.getSetting('partySortDirection').observableValue() ? '⥄' : '⥂'">⥂</label>
                                        <input id="hatcheryPartySortDirection" style="vertical-align: middle" class="hidden" type='checkbox'
                                            data-bind="checked: Settings.getSetting('partySortDirection').observableValue()"
                                            onchange="Settings.setSettingByName('partySortDirection', this.checked)"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div data-bind="visible: App.game.breeding.hasFreeEggSlot()">
                        <!-- Check if the player has any level 100 Pokemon or if they have any eggs -->
                        <p class="text-danger" data-bind="visible: !App.game.party.hasMaxLevelPokemon()">
                            Unfortunately, you don't have any pokémon of level 100 to breed.
                        </p>
                        <!-- ko if: App.game.party.hasMaxLevelPokemon() -->
                        <ul class="row justify-content-center p-0" data-bind="foreach: BreedingController.breedableList()">
                            <li class="col-sm-4 col-md-3 col-lg-2 pokedexEntry text-nowrap" data-bind="style:{background: PokedexHelper.getBackgroundColors($data.name)}">
                                <span style="top: 0; border-top-left-radius: 6px; border-top-right-radius: 6px;" data-bind="text: $data.name">name</span>
                                <div data-bind="visible: App.game.party.alreadyCaughtPokemon($data.id, true)" style="position: absolute;right: 0px;top: 0px;">✨</div>
                                <img src="" width="80px" data-bind="attr:{ src: PokedexHelper.getImage($data.id)}">
                                <span style="bottom: 0; border-bottom-left-radius: 6px; border-bottom-right-radius: 6px" data-bind="text: BreedingController.getDisplayValue($data)">value</span>
                                <a class="overlay" href="#breed" data-bind="click: function() { App.game.breeding.gainPokemonEgg($data); BreedingController.filterBreedableList();if (!App.game.breeding.hasFreeEggSlot()) {$('#breedingModal').modal('hide');}}"></a>
                            </li>
                        </ul>
                        <!-- /ko -->
                    </div>
                    <p class="text-danger" data-bind="visible: !App.game.breeding.hasFreeEggSlot()">
                        Unfortunately, you don't have any free eggslots.
                    </p>
                </div>

                <div class="tab-pane" id="breeding-eggs">
                    <p class="text-danger" data-bind="visible: !App.game.breeding.hasFreeEggSlot()">
                        Unfortunately, you don't have any free eggslots.
                    </p>

                    <p class="text-danger" data-bind="visible: !Object.keys(GameConstants.EggItemType).filter(e=>isNaN(e)).filter(x=>player._itemList[x]()).length">
                        <span data-bind="text: App.game.breeding.hasFreeEggSlot() ? 'Unfortunately,' : 'Even more unfortunately,'"></span> you don't have any eggs to breed.
                    </p>
                    <!-- ko if: Object.keys(GameConstants.EggItemType).filter(e=>isNaN(e)).filter(x=>player._itemList[x]()).length -->
                    <ul class="row justify-content-center p-0" data-bind="foreach: Object.keys(GameConstants.EggItemType).filter(e=>isNaN(e)).filter(x=>player._itemList[x]())">
                        <li class="eggSlot col-sm-4 col-md-3 col-lg-2 pokedexEntry text-nowrap" data-bind="class: App.game.breeding.hasFreeEggSlot() ? '' : 'disabled'">
                            <span style="top: 0; border-top-left-radius: 6px; border-top-right-radius: 6px;" data-bind="text: GameConstants.humanifyString($data)">egg</span>
                            <img src="" width="80px" data-bind="attr:{ src: `assets/images/breeding/${$data}.png` }">
                            <span style="bottom: 0; border-bottom-left-radius: 6px; border-bottom-right-radius: 6px" data-bind="text: 'Amount: ' + player._itemList[$data]()">amount</span>
                            <a class="overlay" href="#breed" data-bind="click: function() { ItemList[$data].use(); if (!App.game.breeding.hasFreeEggSlot()) {$('#breedingModal').modal('hide'); } }"></a>
                            <knockout style="position: absolute; right: 2px; top: -14px;"
                                data-bind="template: { name: 'caughtStatusTemplate', data: { status: ItemList[$data].getCaughtStatus() }, if: (ItemList[$data] instanceof CaughtIndicatingItem) }"/>
                        </li>
                    </ul>
                    <!-- /ko -->
                </div> 

                <div class="tab-pane" id="breeding-fossils">
                    <p class="text-danger" data-bind="visible: !App.game.breeding.hasFreeEggSlot()">
                        Unfortunately, you don't have any free eggslots.
                    </p>

                    <p class="text-danger" data-bind="visible: !Object.keys(GameConstants.FossilToPokemon).filter(f => player.mineInventory.find(i => i.name == f && i.amount())).length">
                        <span data-bind="text: App.game.breeding.hasFreeEggSlot() ? 'Unfortunately,' : 'Even more unfortunately,'"></span> you don't have any fossils to breed.
                    </p>

                    <!-- ko if: Object.keys(GameConstants.FossilToPokemon).filter(f => player.mineInventory.find(i => i.name == f && i.amount())).length -->
                    <ul class="row justify-content-center p-0" data-bind="foreach: Object.keys(GameConstants.FossilToPokemon).map(f => player.mineInventory.find(i => i.name == f)).filter(f => f ? f.amount() : false)">
                        <li class="eggSlot col-sm-4 col-md-3 col-lg-2 pokedexEntry text-nowrap" data-bind="class: App.game.breeding.hasFreeEggSlot() ? '' : 'disabled'">
                            <span style="top: 0; border-top-left-radius: 6px; border-top-right-radius: 6px;" data-bind="text: GameConstants.humanifyString($data.name)">fossil</span>
                            <img src="" width="80px" data-bind="attr:{ src: `assets/images/breeding/${$data.name}.png` }">
                            <span style="bottom: 0; border-bottom-left-radius: 6px; border-bottom-right-radius: 6px" data-bind="text: 'Amount: ' + $data.amount()">amount</span>
                            <a class="overlay" href="#breed" data-bind="click: function() { Underground.sellMineItem($data.id); if (!App.game.breeding.hasFreeEggSlot()) {$('#breedingModal').modal('hide'); } }"></a>
                        </li>
                    </ul>
                    <!-- /ko -->
                </div>
            </div>
       </div>
       <div class="modal-footer">
           <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
       </div>
   </div>
</div>
</div>


<!-- Underground Modal -->
<div aria-labelledby="myModalLabel" class="modal fade noselect" id="mineModal" role="dialog"
style="cursor:default" tabindex="-1">
    <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header p-0">
                <ul class="nav nav-tabs nav-fill">
                    <li class="nav-item"><a data-toggle='tab' class='nav-link active' href="#dig">Dig</a></li>
                    <li class='nav-item'><a data-toggle='tab' class='nav-link' href="#treasures">Treasures</a>
                    </li>
                    <li class='nav-item'><a data-toggle='tab' class='nav-link' href="#upgrades">Upgrades</a>
                    </li>
                    <li class='nav-item'><a data-toggle='tab' class='nav-link' href="#dailyDeals">Daily
                        deals</a></li>
                    <li class='nav-item'><a data-toggle='tab' class='nav-link' href="#help">Help</a></li>
                    <btn class="btn btn-primary">
                        <span id="diamondCounter" data-bind='text: App.game.wallet.currencies[GameConstants.Currency.diamond]'>x</span>
                        <img src='assets/images/underground/diamond.svg' width="20px'">
                    </btn>
                </ul>
            </div>

            <div class="modal-body tab-content p-0">
                <div id="dig" class="tab-pane fade in active show pl-3 pr-3" data-bind="class: Mine.itemsFound() === Mine.itemsBuried() ? 'disabled' : ''">
                    <div class="row" data-bind="foreach: ['SmallRestore','MediumRestore','LargeRestore']">
                        <button class="col-4 btn btn-secondary" data-bind="
                                                        click: function(){  ItemList[$data].use();},
                                                        css: { disabled: player._itemList[$data]() <= 0}"
                        >
                            <span data-bind="text: '(' + player._itemList[$data]() + ')'">(?)</span>
                            <img class="restore-item" data-bind="attr: { src: 'assets/images/items/' + $data + '.png'}">
                            <span data-bind="text: ' +' + Underground.calculateItemEffect(GameConstants.EnergyRestoreSize[$data])">&nbsp;+? energy</span>
                        </button>
                    </div>
                    <div class='row' style="text-align:center;">
                        <div class='progress'>
                            <div id='mineEnergyBar' class='progress-bar bg-warning' role='progressbar'
                                aria-valuemin='0' aria-valuemax='100'
                                data-bind="style: { width: Math.floor(Underground.energy/Underground.getMaxEnergy()*100) + '%' }">
                                <span data-bind="text: 'Energy: ' + Math.floor(Underground.energy) + ' / ' + Underground.getMaxEnergy() + (Math.floor(Underground.energy) < Underground.getMaxEnergy() ? ' (' + Underground.energyTick() + 's)' : '')"></span>
                            </div>
                        </div>
                    </div>
                    <div id="mineBody" style="margin:auto">
                    </div>
                    <div class='row'>
                        <button class='col-12 col-md-4 btn btn-primary' onClick='Mine.toolSelected(Mine.Tool.Hammer)'>Hammer (<knockout data-bind="text: Underground.HAMMER_ENERGY"></knockout> energy)</button>
                        <button class='col-12 col-md-4 btn btn-info' onClick='Mine.toolSelected(Mine.Tool.Chisel)'>Chisel (<knockout data-bind="text: Underground.CHISEL_ENERGY"></knockout> energy)</button>
                        <div class='col-12 col-md-4'>
                            <button class='btn' data-bind="text: Mine.itemsFound() + ' / ' + Mine.itemsBuried() + ' items found'"></button>
                            <button id="mine-prospect-result" type="button" class="btn btn-info" data-html="true"
                                    style="position: absolute; right: 0px; top: 0px; width: auto; height: 41px; padding: 4px;"
                                    data-bind="tooltip: { title: () => Mine.prospectResult() || 'Prospect to get more details', trigger: 'hover', placement:'left' }">
                                ?
                            </button>
                        </div>
                        <button class='col-12 col-md-4 btn btn-success' onClick='Mine.prospect()'>Prospect (<knockout data-bind="text: Underground.PROSPECT_ENERGY"></knockout> energy)</button>
                        <button class='col-12 col-md-4 btn btn-warning' onClick='Mine.bomb()'>Bomb (<knockout data-bind="text: Underground.BOMB_ENERGY"></knockout> energy)</button>
                        <button class='col-12 col-md-4 btn btn-danger' onClick='Mine.skipLayer(true)'>Skip (<knockout data-bind="text: `${Mine.skipsRemaining()} / ${Mine.maxSkips}`"></knockout>)</button>
                      </div>
                </div>
                <div id="treasures" class="tab-pane fade">
                    <div data-bind="if: player.hasMineItems()">
                        <table class="table table-sm table-hover table-striped m-0">
                            <thead>
                                <tr>
                                    <th class="clickable" onclick="Underground.sortMineItems(this.dataset.undergroundsort)" data-undergroundsort="Amount">Amount</th>
                                    <th class="clickable" onclick="Underground.sortMineItems(this.dataset.undergroundsort)" data-undergroundsort="Item">Item</th>
                                    <th class="clickable" onclick="Underground.sortMineItems(this.dataset.undergroundsort)" data-undergroundsort="Value">Value</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody data-bind="template: { name: 'treasureListTemplate', foreach: player.mineInventory}">
                            </tbody>
                        </table>
                    </div>
                    <div data-bind="ifnot:player.hasMineItems()">
                        You don't have any treasures yet...
                    </div>
                </div>
                <div id="upgrades" class="tab-pane fade">
                    <table class="table table-sm table-hover table-striped m-0">
                        <thead>
                            <tr>
                            <th>Upgrade</th>
                            <th>Amount</th>
                            <th>Cost</th>
                            <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr data-bind="template: { name: 'undergroundUpgradeTemplate',
                                'data': {'totalBonus': Underground.getMaxEnergy(), 'upgrade': Underground.getUpgrade(Underground.Upgrades.Energy_Max)}}"></tr>
                            <tr data-bind="template: { name: 'undergroundUpgradeTemplate',
                                'data': {'totalBonus': Underground.getMaxItems(), 'upgrade': Underground.getUpgrade(Underground.Upgrades.Items_Max)}}"></tr>
                            <tr data-bind="template: { name: 'undergroundUpgradeTemplate',
                                'data': {'totalBonus': Underground.getEnergyGain(), 'upgrade': Underground.getUpgrade(Underground.Upgrades.Energy_Gain)}}"></tr>
                            <tr data-bind="template: { name: 'undergroundUpgradeTemplate',
                                'data': {'totalBonus': Underground.getEnergyRegenTime(), 'upgrade': Underground.getUpgrade(Underground.Upgrades.Energy_Regen_Time)}}"></tr>
                            <tr data-bind="template: { name: 'undergroundUpgradeTemplate',
                                'data': {'totalBonus': Underground.getDailyDealsMax(), 'upgrade': Underground.getUpgrade(Underground.Upgrades.Daily_Deals_Max)}}"></tr>
                            <tr data-bind="template: { name: 'undergroundUpgradeTemplate',
                                'data': {'totalBonus': Underground.getBombEfficiency(), 'upgrade': Underground.getUpgrade(Underground.Upgrades.Bomb_Efficiency)}}"></tr>
                        </tbody>
                    </table>
                </div>
                <div id="help" class="tab-pane fade pl-5 pr-5">
                    <h4><u>Dig</u></h4>
                    <p>In the underground you can mine for hidden treasures.</p>
                    <p>There are 3 ways of breaking tiles: Chisel will mine two layers on a single tile; Hammer will mine 1 layer on all nine tiles of a 3x3 square; and Bomb will mine 2 layers of 10 random tiles.</p>
                    <p>You can spend some mining energy to Prospect. This will give you some rough information on what can be found in this mine level.</p>
                    <p>If you don't think this level is worth mining, you can Skip it. Skipping will use up one of your maximum of 5 charges. Every time you mine out all items in a level, you will recover one Skip charge.</p>

                    <h4><u>Treasures</u></h4>
                    <p>Sell your treasures for shards or diamonds!</p>
                    <p>If you have found any fossils, you can hatch the pokemon they contain from the Treasures tab, or from the Day Care.</p>

                    <h4><u>Upgrades</u></h4>
                    <p>You can use your diamonds to buy all kinds of upgrades that will help you explore the underground even further!</p>

                    <h4><u>Daily deals</u></h4>
                    <p>In the Daily deals tab you can trade your items.</p>
                    <p>These trades will change at midnight (your local time).</p>
                </div>
                <div id="dailyDeals" class="tab-pane fade">
                    <div class="table-responsive" id="dailyDealsBody">
                        <table class="table table-sm table-hover table-striped m-0 text-left">
                            <thead>
                                <tr>
                                    <th class="text-center">Inv</th>
                                    <th></th>
                                    <th>Item</th>
                                    <th></th>
                                    <th></th>
                                    <th>Item</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody data-bind='foreach: DailyDeal.list'>
                                <tr>
                                    <td class='vertical-middle text-center' data-bind='text: player.getUndergroundItemAmount(item1.id)'></td>
                                    <td class='vertical-middle'>
                                        <img class='mineInventoryItem' data-bind='attr: {src: "assets/images/underground/"+item1.id+".png"}'>
                                    </td>
                                    <td class='vertical-middle' data-bind='text: amount1 + " × " + item1.name'></td>
                                    <td class='vertical-middle'>→</td>
                                    <td class='vertical-middle'>
                                        <img class='mineInventoryItem' data-bind='attr: {src: "assets/images/underground/"+item2.id+".png"}'>
                                    </td>
                                    <td class='vertical-middle' data-bind='text: amount2 + " × " + item2.name'></td>
                                    <td class='vertical-middle'>
                                        <div class="btn-group btn-block" data-bind="let: { tradeAmount: ko.observable(1) }">
                                            <button class='btn btn-success btn-block' data-bind='click: function(){DailyDeal.use($index(), tradeAmount())}, css: { disabled: !DailyDeal.canUse($index()) }'>
                                                Trade
                                            </button>
                                            <button type="button" data-bind="text: tradeAmount() + '&nbsp;', css: { disabled: !DailyDeal.canUse($index()) }" class="btn btn-success dropdown-toggle dropdown-toggle-split active" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                            </button>
                                            <div class="dropdown-menu" data-bind="foreach: [1, 10, 100, 1000, Infinity]">
                                                <button class="dropdown-item" type="button" data-bind="click: function(){tradeAmount($data)}, text: $data"></button>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>

    <script type="text/html" id="undergroundUpgradeTemplate">
            <td class='vertical-middle' data-bind='text: upgrade.displayName + ": " + totalBonus'></td>
            <td class='vertical-middle'
                data-bind='text: upgrade.isMaxLevel() ? "" : "(" + (upgrade.increasing ? "+" : "-") + upgrade.upgradeBonus() + ")"'></td>
            <td class='vertical-middle'
                data-bind='text: upgrade.isMaxLevel() ? "" : upgrade.calculateCost().amount + " diamonds"'></td>
            <td class='vertical-middle'>
                <button class='btn btn-success btn-block'
                        data-bind='css: { disabled: !upgrade.canBuy() },
                                text: upgrade.isMaxLevel() ? "Max" : "Upgrade",
                                click: function(){upgrade.buy(); DailyDeal.generateDeals(Underground.getDailyDealsMax(), new Date());}'>
                </button>
            </td>
    </script>

    <script type="text/html" id="treasureListTemplate">
        <tr data-bind='if: amount() > 0'>
            <td class='vertical-middle'>
                <img class='mineInventoryItem' data-bind='attr:{ src: "assets/images/underground/"+id+".png" }'>
                <span data-bind='text: "("+$data.amount()+")"'></span>
            </td>
            <td class='vertical-middle' data-bind='text: name'></td>
            <!-- ko if: valueType == "Mine Egg" -->
            <td></td>
            <!-- /ko -->
            <!-- ko ifnot: valueType == "Mine Egg" -->
            <td class='vertical-middle' data-bind='text: value + " " + UndergroundItem.getFullResourceName(valueType, value)'></td>
            <!-- /ko -->
            <td class='vertical-middle'>
                <div class="btn-group btn-block" data-bind="let: { sellAmount: ko.observable(1) }">
                    <button class='btn btn-success btn-block'
                            data-bind="attr: { 'data-itemid': id },
                                    css: { disabled: amount() <= 0 || (valueType === 'Mine Egg' && !App.game.breeding.hasFreeEggSlot()) },
                                    text: valueType === 'Mine Egg' ? 'Breed' : 'Sell',
                                    click: function(){Underground.sellMineItem($element.dataset.itemid, sellAmount() || 1)}">
                    </button>
                    <!-- ko if: valueType !== 'Mine Egg' -->
                    <button type="button" data-bind="text: sellAmount() + '&nbsp;'" class="btn btn-success dropdown-toggle dropdown-toggle-split active" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    </button>
                    <div class="dropdown-menu" data-bind="foreach: [1, 10, 100, 1000, Infinity]">
                        <button class="dropdown-item" type="button" data-bind="click: function(){sellAmount($data)}, text: $data"></button>
                    </div>
                    <!-- /ko -->
                </div>
            </td>
        </tr>
    </script>
</div>


<!-- Pokedex Modal-->
<div class="modal noselect" id="pokedexModal" tabindex="-1" role="dialog"
aria-labelledby="pokedexModalLabel">
<div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
   <div class="modal-content">
       <div class="modal-header">
           <h4 style="margin-bottom: 0">Pokédex</h4>
           <button style="float:right;" class="btn btn-secondary" type="button" data-toggle="collapse"
                   data-target="#pokedex-filter-container" aria-expanded="false" aria-controls="pokedex-filter-container">
               Filters
           </button>
       </div>
       <div class="modal-body">
            <div class="collapse" id="pokedex-filter-container">
                <div class="container-fluid" style="border-bottom: 1px solid #eceeef">
                    <div class="form-row text-left">

                        <!--Name-->
                        <div class="form-group col-md-6 col-6">
                            <label>Name</label>
                            <input id="nameFilter" class="form-control" placeholder="Bulbasaur" value=""
                                   oninput="PokedexHelper.updateList()">
                        </div>

                        <!--Region-->
                        <div class="form-group col-md-6 col-6">
                            <label>Region</label>
                            <select id="pokedex-filter-region" class="custom-select"
                                    oninput="PokedexHelper.updateList()" style="margin-right: 8px">
                                <option value="" selected>All</option>
                            </select>
                        </div>

                        <!--Types-->
                        <div class="form-group col-md-6 col-6">
                            <label>Type</label>
                            <select id="pokedex-filter-type1" class="custom-select"
                                    oninput="PokedexHelper.updateList()" style="margin-right: 8px">
                                <option value="" selected>All</option>
                            </select>
                        </div>
                        <div class="form-group col-md-6 col-6">
                            <label>Type</label>
                            <select id="pokedex-filter-type2" class="custom-select"
                                    oninput="PokedexHelper.updateList()">
                                <option value="" selected>All</option>
                            </select>
                        </div>

                    </div>

                    <div class="form-group row justify-content-center">
                       <!--Uncaught-->
                       <div class="col-sm-2">
                           <label class="form-check-label">
                               <input class="form-check-input" type="checkbox" id="pokedex-filter-uncaught"
                                      value="false" onclick="PokedexHelper.updateList()"> Uncaught
                           </label>
                       </div>
                       <!--Caught-->
                       <div class="col-sm-2">
                           <label class="form-check-label">
                               <input class="form-check-input" type="checkbox" id="pokedex-filter-caught"
                                      value="false" onclick="PokedexHelper.updateList()"> Caught
                           </label>
                       </div>
                       <!--Shiny-->
                       <div class="col-sm-2">
                           <label class="form-check-label">
                               <input class="form-check-input" type="checkbox" id="pokedex-filter-shiny"
                                      value="false" onclick="PokedexHelper.updateList()"> Shiny
                           </label>
                       </div>
                       <!--Not Shiny-->
                       <div class="col-sm-2">
                           <label class="form-check-label">
                               <input class="form-check-input" type="checkbox" id="pokedex-filter-not-shiny"
                                      value="false" onclick="PokedexHelper.updateList()"> Not Shiny
                           </label>
                       </div>
                       <!--Rare Hold Item-->
                       <div class="col-sm-2">
                           <label class="form-check-label">
                               <input class="form-check-input" type="checkbox" id="pokedex-filter-held-item"
                                      value="false" onclick="PokedexHelper.updateList()"> Rare Hold Item
                           </label>
                       </div>

                   </div>

                   <div class="row justify-content-center">
                      <h4 data-bind="text: `Showing ${PokedexHelper.filteredList().length} Pokémon`"></h4>
                   </div>
               </div>

           </div>
           <div>
               <ul class="row justify-content-center p-0" data-bind="foreach: PokedexHelper.filteredList()"
                   style="max-width: 100%; padding:0; margin:0;">
                   <li class="col-sm-4 col-md-3 col-lg-2 pokedexEntry"
                        data-bind="style:{background: PokedexHelper.getBackgroundColors($data.name)}">
                        <span class="id" style="top: 0; border-top-left-radius: 6px; border-top-right-radius: 6px;" data-bind="text: (Math.floor($data.id) + '').padStart(3, 0)">number</span>
                            <div data-bind="visible: App.game.party.alreadyCaughtPokemonByName(name)" style="position: absolute;right: 2px;top: -15px;">
                                <img width="18px" src="" data-bind="attr: { src: `assets/images/pokeball/Pokeball${App.game.party.alreadyCaughtPokemon($data.id, true) ? '-shiny' : ''}-small.png`}"/>
                            </div>
                            <img src="" width="80px" data-bind="css: { 'pokemon-not-seen': !PokedexHelper.pokemonSeen($data.id)() }, attr:{ src: PokedexHelper.getImage($data.id)}">
                            <!-- ko if: PokedexHelper.pokemonSeen($data.id) -->
                            <span style="bottom: 0; border-bottom-left-radius: 6px; border-bottom-right-radius: 6px" data-bind="text: $data.name">name</span>
                            <a class="overlay" href="#pokemonStatisticsModal" data-toggle="modal" data-bind="click: ()=>{App.game.statistics.selectedPokemonID($data.id)}, tooltip: { html: true, title: `<u>Information:</u><br/>Base Attack: <strong>${$data.attack}</strong><br/>Catch Rate: <strong>${PokemonFactory.catchRateHelper($data.catchRate, true)}%</strong><br/>Hatch Steps: <strong>${App.game.breeding.getSteps($data.eggCycles).toLocaleString('en-US')}</strong>`, trigger: 'hover', placement:'bottom' }"></a>
                            <!-- /ko -->
                   </li>
               </ul>
           </div>
       </div>

       <div class="modal-footer">
           <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
       </div>
   </div>
</div>
</div>


<!-- Statistics Modal-->
<div class="modal noselect fade" id="pokemonStatisticsModal" tabindex="-1" role="dialog" aria-labelledby="pokemonStatisticsModal">
    <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-sm" role="document">
        <div class="modal-content" data-bind="with: App.game.statistics.selectedPokemonID()">
            <div class="modal-header bg-dark text-light" style='justify-content: space-around;'>
                <h5 class="modal-title text-muted" data-bind="text: `#${pokemonMap[$data].id.toString().padStart(3,0)}&nbsp;&nbsp;`"></h5>
                <h5 class="modal-title text-light" data-bind="text: pokemonMap[$data].name">Pokemon Statistics</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body p-0">
                <img data-bind="attr:{ src: 'assets/images/' + (App.game.party.alreadyCaughtPokemon($data, true) ? 'shiny' : '') + 'pokemon/' + $data + '.png' }" src=""/>
                <table class="table table-striped table-hover table-bordered table-sm m-0">
                  <thead>
                    <tr class="text-light">
                      <th class="text-left bg-dark">Type</th>
                      <th class="text-left bg-dark">Amount</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td class="text-left">Base Attack</td>
                      <td class="text-left tight"><code data-bind="text: pokemonMap[$data].attack.toLocaleString('en-US')">-</code></td>
                    </tr>
                    <tr>
                      <td class="text-left">Current Attack</td>
                      <td class="text-left tight"><code data-bind="text: (App.game.party.getPokemon($data) ? App.game.party.getPokemon($data).attack : 0).toLocaleString('en-US')">-</code></td>
                    </tr>
                    <tr>
                      <td class="text-left">Type</td>
                      <td class="text-left tight">
                        <span class="badge text-light"
                          data-bind="visible: pokemonMap[$data].type[0] >= 0,
                          style: { 'background-color': TypeColor[pokemonMap[$data].type[0]] }">
                          <small><strong data-bind="text: PokemonType[pokemonMap[$data].type[0]].toUpperCase()"></strong></small>
                        </span>
                        <span class="badge text-light"
                          data-bind="if: pokemonMap[$data].type[1] >= 0,
                          style: { 'background-color': TypeColor[pokemonMap[$data].type[1]] }">
                          <small><strong data-bind="text: PokemonType[pokemonMap[$data].type[1]].toUpperCase()"></strong></small>
                        </span>
                      </td>
                    </tr>
                    <tr>
                      <td class="text-left">Catch Rate</td>
                      <td class="text-left tight"><code data-bind="text: PokemonFactory.catchRateHelper(pokemonMap[$data].catchRate, true) + '%'">-</code></td>
                    </tr>
                    <tr>
                      <td class="text-left">Hatch Steps</td>
                      <td class="text-left tight"><code data-bind="text: App.game.breeding.getSteps(pokemonMap[$data].eggCycles).toLocaleString('en-US')">-</code></td>
                    </tr>
                    <tr data-bind="if: ItemList[pokemonMap[$data].heldItem]">
                      <td class="text-left">Rare Hold Item</td>
                      <td class="text-left tight"><code data-bind="text: GameConstants.humanifyString(ItemList[pokemonMap[$data].heldItem].name())"></code></td>
                    </tr>
                  </tbody>
                  <thead>
                    <tr class="text-light">
                      <th class="text-left bg-dark">Statistic</th>
                      <th class="text-left bg-dark">Amount</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td class="text-left">Encountered</td>
                      <td class="text-left tight"><code data-bind="text: App.game.statistics.pokemonEncountered[$data]().toLocaleString('en-US')">-</code></td>
                    </tr>
                    <tr>
                      <td class="text-left">Defeated</td>
                      <td class="text-left tight"><code data-bind="text: App.game.statistics.pokemonDefeated[$data]().toLocaleString('en-US')">-</code></td>
                    </tr>
                    <tr>
                      <td class="text-left">Captured</td>
                      <td class="text-left tight"><code data-bind="text: App.game.statistics.pokemonCaptured[$data]().toLocaleString('en-US')">-</code></td>
                    </tr>
                    <tr>
                      <td class="text-left">Hatched</td>
                      <td class="text-left tight"><code data-bind="text: App.game.statistics.pokemonHatched[$data]().toLocaleString('en-US')">-</code></td>
                    </tr>
                    <tr>
                      <td class="text-left">Shinies Encountered</td>
                      <td class="text-left tight"><code data-bind="text: App.game.statistics.shinyPokemonEncountered[$data]().toLocaleString('en-US')">-</code></td>
                    </tr>
                    <tr>
                      <td class="text-left">Shinies Defeated</td>
                      <td class="text-left tight"><code data-bind="text: App.game.statistics.shinyPokemonDefeated[$data]().toLocaleString('en-US')">-</code></td>
                    </tr>
                    <tr>
                      <td class="text-left">Shinies Captured</td>
                      <td class="text-left tight"><code data-bind="text: App.game.statistics.shinyPokemonCaptured[$data]().toLocaleString('en-US')">-</code></td>
                    </tr>
                    <tr>
                      <td class="text-left">Shinies Hatched</td>
                      <td class="text-left tight"><code data-bind="text: App.game.statistics.shinyPokemonHatched[$data]().toLocaleString('en-US')">-</code></td>
                    </tr>
                  </tbody>
                </table>
            </div>
        </div>
    </div>
</div>


<!-- Badge Case Modal-->
<div class="modal fade noselect" id="badgeCaseModal" tabindex="-1" role="dialog"
aria-labelledby="badgeCaseModalLabel">
<div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
   <div class="modal-content">
       <div class="modal-header">
           <h5 class="modal-title">Badge Case</h5>
           <button type="button" class="close" data-dismiss="modal" aria-label="Close">
               <span aria-hidden="true">&times;</span>
           </button>
       </div>
       <div class="modal-body">
           <div class="row no-gutters justify-content-center"
                data-bind="foreach: BadgeCaseController.getDisplayableBadges()">
               <div class="col-3 badgeEntry">
                   <img src="" width="60px"
                        data-bind="attr:{ src: 'assets/images/badges/'+ $data +'.png'},
                        css: { 'badge-not-acquired': !App.game.badgeCase.hasBadge(BadgeTypes[$data])}">

                   <p style="bottom: 0;"
                      data-bind="text: $data">name</p>

               </div>
           </div>
       </div>

       <div class="modal-footer">
           <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
       </div>
   </div>
</div>
</div>


<!-- Save Modal-->
<div class="modal fade noselect" id="saveModal" tabindex="-1" role="dialog"
     aria-labelledby="saveModalLabel">
    <div class="modal-dialog modal-dialog-scrollable modal-md" role="document">
        <div class="modal-content">
            <div class="modal-header" style='justify-content: space-around;'>
                <h5 class="modal-title">Save Data</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <div class="modal-body p-0">
                <ul class="nav nav-tabs nav-fill">
                    <li class="nav-item"><a class="nav-link active" href="#saveTab" data-toggle="tab">Save</a></li>
                    <li class="nav-item"><a class="nav-link" href="#saveConvert" data-toggle="tab">Convert Original Save</a></li>
                </ul>
                <div class="tab-content p-3">
                    <div id="saveTab" class="tab-pane fade in active show">
                        <div>
                            <form class="form-inline input-group">
                                <input class="outline-dark form-control" placeholder="Enter code..." id="redeemable-code-input" type="text" />
                                <div class="input-group-append">
                                    <button class="btn btn-info" name="name" value="value" type="submit" onclick="RedeemableCodeController.enterCode(); return false;">Claim!</button>
                                </div>
                            </form>
                            <hr>
                            <!-- ko if: App.game.discord.enabled -->
                            <button class="btn btn-primary btn-block" onClick="App.game.discord.login()" data-bind="visible: !App.game.discord.ID()">Link Discord</button>
                            <button class="btn btn-warning btn-block" onClick="App.game.discord.logout()" data-bind="visible: App.game.discord.ID()">Unlink Discord</button>
                            <i class="text-warning"><strong>Note:</strong> This is <strong>not</strong> used for cloud saves,<br/>this just allows you to enter codes recieved from the Discord bot.</i>
                            <hr>
                            <!-- /ko -->

                            <button class="btn btn-primary btn-block" onClick="Save.download()">Download Save</button>
                            <hr>

                            <input type="file" id="input" accept=".txt" style="display:none;"
                                    onchange=Save.loadFromFile(this.files[0])>
                            <label for="input" class="btn btn-primary btn-block">Import Save</label>
                            <hr>
                            <h5 class="text-danger">You do not get any rewards for resetting your savefile</h5>
                            <button class="btn btn-danger btn-block" onClick="Save.reset()">Reset All</button>
                        </div>
                    </div>

                    <div id="saveConvert" class="tab-pane fade">
                        <p>You can paste your old PokéClicker save file here, to keep shinies:</p>
                        <textarea id="convertTextArea" class="saveTextArea"></textarea>
                        <button class="btn btn-success btn-block" onclick="Save.convert()">
                            Convert
                        </button>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>


<!-- Quests Modal-->
<div class="modal noselect fade" id="QuestModal" tabindex="-1" role="dialog" aria-labelledby="QuestModalLabel">
    <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">

                <div class="col-3">
                <h5>
                    <span class='' data-bind='text: "Quests (" + App.game.quests.currentQuests().length + "/" + App.game.quests.questSlots() + ")"'>
                    </span>
                </h5>
                </div>
                <div class='col-6'>
                    <div>Lvl. <knockout data-bind='text: App.game.quests.level'></knockout></div>
                    <div class="progress" style='height: 5px'>
                        <div class="progress-bar bg-info" role="progressbar"
                             data-bind="attr:{ style: 'width:' + App.game.quests.percentToNextQuestLevel() + '%' }"
                             aria-valuemin="0" aria-valuemax="100">
                        </div>
                    </div>
                </div>
                <div class="col-3">
                    <span data-bind="template: { name: 'currencyTemplate', data: {'amount': App.game.wallet.currencies[GameConstants.Currency.questPoint], 'currency': GameConstants.Currency.questPoint}}"></span>
                </div>

            </div>
            <div class="modal-body p-0">
                <table class='table table-hover m-0'>
                    <thead>
                    <tr>
                        <td><h5>Description</h5></td>
                        <td><h5>Reward</h5></td>
                        <td><h5>Status</h5></td>
                    </tr>
                    </thead>
                    <tbody data-bind="foreach: App.game.quests.questList" >
                    <tr>
                        <td class="align-middle" style="text-align:left" data-bind='text: description'></td>
                        <td class="align-middle" style="text-align:left">
                            <span data-bind="template: { name: 'currencyTemplate', data: {'amount':  pointsReward, 'currency': GameConstants.Currency.questPoint}}"></span>
                        </td>
                        <td class="align-middle">
                            <button class='btn btn-primary btn-sm btn-block'
                                data-bind='visible: App.game.quests.canStartNewQuest() && !$data.inProgress() && !$data.isCompleted(),
                                click: function(){
                                    App.game.quests.beginQuest($data.index);
                                    if (!App.game.quests.canStartNewQuest()) {$("#QuestModal").modal("hide");}
                                }'>
                                Start
                            </button>
                            <button class='btn btn-success btn-sm btn-block' data-bind='visible: !$data.claimed() && $data.isCompleted(),
                                                                click: () => { App.game.quests.claimQuest($data.index) }'>
                                Claim
                            </button>
                            <span data-bind='visible: $data.inProgress() && !$data.isCompleted(), text: Math.floor(progress()*100) + "%"'></span>
                            <button class='btn btn-success btn-sm btn-block' disabled data-bind='visible: $data.claimed()'>Completed</button>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>

            <div class="modal-footer">
                <div id='refreshQuests'>
                    <button class="btn btn-primary" onclick="App.game.quests.refreshQuests(false, true)"
                            data-bind="enable: App.game.quests.canAffordRefresh(), tooltip: { title: `Daily refresh in: ${GameHelper.formattedLetterTimeUntilTomorrow()}`, trigger: 'hover', placement:'top' }">
                        <span data-bind="template: { name: 'amountTemplate', data: App.game.quests.getRefreshCost() }"></span> - Refresh
                        </span>
                    </button>
                    
                </div>
                <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>


<!-- Farm Modal-->
<div class="modal fade noselect" id="farmModal" tabindex="-1" role="dialog"
     aria-labelledby="farmModalLabel">
    <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4>Farm</h4>
                <!-- ko ifnot: App.game.farming.allPlotsUnlocked() -->
                <button class="btn btn-success" onclick="App.game.farming.unlockPlot()"
                        data-bind="css: { disabled: !App.game.farming.canBuyPlot()}">
                    <span>Unlock new plot </span>
                    <span data-bind="template: { name: 'amountTemplate', data: App.game.farming.calculatePlotPrice()}"></span>
                </button>
                <!-- /ko -->
            </div>
            <div class="modal-body">
                <div id="farmView" class="justify-content-center no-select row">
                    <div class="col-12 col-lg-4">
                        <div class="col-sm-12">
                            <span data-bind="template: { name: 'currencyTemplate', data: {'amount': App.game.wallet.currencies[GameConstants.Currency.farmPoint], 'currency': GameConstants.Currency.farmPoint}}"></span>
                        </div>
                        <ul id="seedList" data-bind="foreach: App.game.farming.berryList" class="list-group"
                            style="margin-bottom: 5px;">
                            <li class="list-group-item list-group-item-action seed-list-item"
                                data-bind="click: function() {FarmController.selectedBerry = $index()}">
                                <img src="" width="24px"
                                     data-bind="attr:{ src: 'assets/images/items/' + BerryType[$index()] + '.png'}">
                                <span data-bind="text: BerryType[$index()]"></span>
                                <span class="seedAmount" data-bind="text: App.game.farming.berryList[$index()]"></span>
                            </li>
                        </ul>

                        <div class="row">
                            <div class="col-lg-12 col-6">
                                <button class="btn btn-primary btn-block" data-bind="click: function(){App.game.farming.plantAll(FarmController.selectedBerry)}">
                                    Plant All
                                </button>
                            </div>
                            <div class="col-lg-12 col-6">
                                <button class="btn btn-success btn-block" data-bind="click: function(){App.game.farming.harvestAll()}">
                                    Harvest All
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-lg-8" style="padding-left: 0">
                        <div id="plotList" data-bind="foreach: App.game.farming.plotList">
                            <div class="plot" data-bind="css :{plotLocked : !$data.isUnlocked}">
                                <div class="plot-content">
                                    <div class="plotImage">
                                        <img style="width: 100%" src="assets/images/farm/soil.png">
                                        <div data-bind="ifnot: $data.isEmpty()">
                                            <div class="plotButton"
                                                 data-bind="click: function(){App.game.farming.harvest($index())}, tooltip: {title: $data.formattedTimeLeft, trigger: 'hover', animation: false}">
                                                <img width="100%" height="100%"
                                                     style="width: 68.75%; max-height: 100%; image-rendering: pixelated;"
                                                     src=""
                                                     data-bind="attr:{ src: FarmController.getImage($index())}">
                                            </div>
                                        </div>
                                        <div data-bind="if: $data.isEmpty()">
                                            <div class="plotButton"
                                                 data-bind="click: function(){App.game.farming.plant($index(), FarmController.selectedBerry)}">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>


<!-- Ship Modal-->
<div class="modal noselect fade" id="ShipModal" tabindex="-1" role="dialog" aria-labelledby="ShipModalLabel">
    <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header" style='justify-content: space-around;'>
                <h5 class="modal-title">Regional Travel</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body bg-ocean">
                <img src='assets/images/ship.png' style='width: 100%;'>
                <div style='margin-top:20px' data-bind="foreach: GameHelper.enumStrings(GameConstants.Region)">
                    <!-- ko if: $data !== 'none' -->
                    <button class='btn btn-block btn-success'
                        data-dismiss='modal'
                        data-bind='visible: player.region != GameConstants.Region[$data] && GameConstants.Region[$data] <= player.highestRegion() && GameConstants.Region[$data] <= GameConstants.MAX_AVAILABLE_REGION,
                        click: () => { MapHelper.moveToTown(GameConstants.DockTowns[GameConstants.Region[$data]]); player.region = GameConstants.Region[$data]; },
                        text: GameConstants.camelCaseToString($data)'>
                        Region
                    </button>
                    <!-- /ko -->
                </div>
            </div>
        </div>
    </div>
</div>


<!-- Safari Modal -->
<div aria-labelledby="safariModal" class="modal fade noselect" id="safariModal" role="dialog" style="cursor:default" tabindex="-1" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
        <div class="modal-content">
            <div class="controls" data-bind="visible: Safari.inProgress() && !Safari.inBattle()">
                <div style="width:120px">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 411 411">
                        <g>
                          <path fill="whitesmoke" d="M382 137h-89c-11 0-19-8-19-19V29c0-16-13-29-29-29h-79c-16 0-29 13-29 29v89c0 11-8 19-19 19H29c-16 0-29 13-29 29v79c0 16 13 29 29 29h89c11 0 19 8 19 19v89c0 16 13 29 29 29h79c16 0 29-13 29-29v-89c0-11 8-19 19-19h89c16 0 29-13 29-29v-79c0-16-13-29-29-29zM93 244c0 2-2 3-4 2l-52-38c-2-1-2-4 0-5l52-38c2-1 4 0 4 3v76zm72-155l38-52c1-2 4-2 5 0l38 52c1 2 0 4-2 4h-76c-3 0-4-2-3-4zm81 233l-38 52c-1 2-4 2-5 0l-38-52c-1-2 0-4 3-4h76c2 0 3 2 2 4zm-40-69a47 47 0 110-94 47 47 0 010 94zm168-45l-52 38c-2 1-4 0-4-2v-76c0-3 2-4 4-3l52 38c2 1 2 4 0 5z"/>
                          <path fill="transparent" d="M135 1h142v137H135z"   onmousedown="GameController.simulateKey('ArrowUp')" onmouseout="GameController.simulateKey('ArrowUp', 'up')" onmouseup="GameController.simulateKey('ArrowUp', 'up')" ontouchstart="GameController.simulateKey('ArrowUp')"/><!-- up -->
                          <path fill="transparent" d="M1 137h142v137H1z"     onmousedown="GameController.simulateKey('ArrowLeft')" onmouseout="GameController.simulateKey('ArrowLeft', 'up')" onmouseup="GameController.simulateKey('ArrowLeft', 'up')" ontouchstart="GameController.simulateKey('ArrowLeft')"/><!-- left -->
                          <path fill="transparent" d="M135 273h142v137H135z" onmousedown="GameController.simulateKey('ArrowDown')" onmouseout="GameController.simulateKey('ArrowDown', 'up')" onmouseup="GameController.simulateKey('ArrowDown', 'up')" ontouchstart="GameController.simulateKey('ArrowDown')"/><!-- down -->
                          <path fill="transparent" d="M268 137h142v137H268z" onmousedown="GameController.simulateKey('ArrowRight')" onmouseout="GameController.simulateKey('ArrowRight', 'up')" onmouseup="GameController.simulateKey('ArrowRight', 'up')" ontouchstart="GameController.simulateKey('ArrowRight')"/><!-- right -->
                        </g>
                    </svg>
                </div>
            </div>
            <div class="modal-header">
                <h4 style='text-align:center' class="modal-title">
                    Safari Zone
                    <span data-bind="if: Safari.completed()">
                        <img class="pokeball-smallest"
                            data-bind='attr:{
                                title:"You have captured all of the Safari Pokémon" + (Safari.completed(true) ? " shiny" : "") + "!",
                                src:"assets/images/pokeball/Pokeball" + (Safari.completed(true) ? "-shiny" : "") + "-small.png"
                            }'
                        />
                    </span>
                </h4>
                <button class='btn btn-danger modalClose' onclick='Safari.closeModal()'>Leave</button>
            </div>

            <div class="modal-body p-0">
                <!-- Tab Titles -->
                <ul style="width:100%" class="nav nav-tabs nav-fill">
                    <li class="nav-item">
                        <a data-toggle='tab' class='nav-link active' href="#safariExplore">Explore</a>
                    </li>
                    <li class='nav-item'>
                        <a class='nav-link' href="#safariHelp" data-bind="attr: {'data-toggle': Safari.inBattle() ? '' : 'tab'}">Help</a>
                    </li>
                </ul>

                <!-- Tab Contents -->
                <div class=tab-content>

                    <!-- Main tab -->
                    <div  id="safariExplore" class="tab-pane fade in active show">
                        <div class="modal-body p-0">

                            <div id="safariEntrance" data-bind="if: !Safari.inProgress()">
                                <button id="paySafariButton" class="btn btn-block" onclick="Safari.payEntranceFee()"
                                    data-bind="class: Safari.canPay() ? 'btn-primary' : 'disabled btn-danger'">
                                    Pay Entrance Fee <knockout id='safariEntranceCost' data-bind="template: { name: 'currencyTemplate', data: {'amount': Safari.cost().amount, 'currency': Safari.cost().currency}}"></knockout>
                                </button>
                                <img class='fit-width' src="assets/images/safari/area1.png" />
                            </div>

                            <div id="safariBody"
                                class='container-fluid'
                                data-bind="visible: Safari.inProgress()">
                            </div>
                        </div>
                    </div>


                    <!-- Help tab -->
                    <div  id="safariHelp" class="tab-pane fade">
                        <div class="modal-body" style="width: 80%;margin: auto;">
                            <div id="safariHelpText">
                                <p>The safari zone contains several unique Pokémon, and a different method of encountering and capturing Pokémon.</p>
                                <p>After paying the entrance fee, you will be able to walk around in the safari zone. To encounter Pokémon, you must walk in tall grass.</p>
                                <p>
                                    When you have encountered a Pokémon, you will be given 4 options:
                                    <ul>
                                        <li>Ball: This will throw a pokeball and give you a chance of capturing the Pokémon</li>
                                        <li>Rock: Throwing a rock will make the Pokémon more likely to flee, but easier to catch</li>
                                        <li>Bait: Throwing bait will make the Pokémon less likely to flee, but harder to catch</li>
                                        <li>Run: This will end the encounter</li>
                                    </ul>
                                </p>
                                <p>After your turn of the encounter, if it did not result in the encounter ending, the wild Pokémon will have a chance of running away.</p>
                                <p>Your safari exploration will end when you have run out of pokeballs.</p>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>


<!-- Safari Modal -->
<div class="modal fade noselect" id="safariBattleModal" tabindex="-1" role="dialog" aria-badgeledby="safariBattleModal" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-md" role="document">
       <div class="modal-content">
           <div class="modal-body p-0">
              <div class="battle-view">
                <div class="row justify-content-center no-gutters" data-bind="if: Safari.inBattle">
                  <div class="col no-gutters clickable" data-bind="click: function() {BattleFrontierBattle.clickAttack()}" style="height: 220px; display: block;">
                      <h2 class="pageItemTitle" style="display: block;">

                          <knockout class="left">
                          </knockout>

                          <knockout>
                              <knockout data-bind="text: SafariBattle.enemy.name">Pokemon name</knockout>
                              <knockout data-bind="template: { name: 'caughtStatusTemplate', data: {'status': PartyController.getCaughtStatus(SafariBattle.enemy.id)}}"></knockout>
                          </knockout>

                          <knockout class="right">
                          </knockout>
                      </h2>

                      <div>
                          <img class="enemy" data-bind="attr: { src: `assets/images/${SafariBattle.enemy.shiny ? 'shiny' : ''}pokemon/${SafariBattle.enemy.id}.png` }" src=""/>
                      </div>

                      <h2 class="pageItemFooter" style="display: block;">

                          <knockout class="left" data-bind="text: `Catch chance: ${SafariBattle.enemy.catchFactor.toFixed(2)} %`">
                          </knockout>
                            &nbsp;
                          <knockout class="right" data-bind="text: `Escape chance: ${SafariBattle.enemy.escapeFactor.toFixed(2)} %`">
                          </knockout>
                      </h2>
                  </div>
                </div>
              </div>
           </div>

           <div class="modal-footer p-0 bg-dark text-light">
                <div class="message" data-bind='html: SafariBattle.text'></div>
                <div class="row" style="width: 100%;">
                    <button type="button" class="btn btn-primary btn-block col-6 m-0" onclick="this.blur();SafariBattle.lockButtons();SafariBattle.throwBall()" data-bind='text: "Ball (" + Safari.balls() + ")"'>Ball (30)</button>
                    <button type="button" class="btn btn-primary btn-block col-6 m-0" onclick="this.blur();SafariBattle.lockButtons();SafariBattle.throwBait()">Bait</button>
                    <button type="button" class="btn btn-primary btn-block col-6 m-0" onclick="this.blur();SafariBattle.lockButtons();SafariBattle.throwRock()">Rock</button>
                    <button type="button" class="btn btn-primary btn-block col-6 m-0" onclick="this.blur();SafariBattle.lockButtons();SafariBattle.run()">Run</button>
                </div>
           </div>
       </div>
    </div>
</div>

<!-- NPC Modal-->
<div class="modal fade noselect" id="npc-modal" role="dialog" tabindex="-1">
  <div class="modal-dialog modal-dialog-scrollable modal-sm" role="document">
    <div class="modal-content">
      <div class="modal-body text-center">
        <u><h5 class="npc-name">NPC Name</h5></u><br/>
        <img class="npc-image" src=""/>
        <div class="npc-dialog"></div>
        <button type="button" class="btn btn-primary btn-block" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<!-- Pokeball Selector Modal -->
<div class="modal fade" id="pokeballSelectorModal" tabindex="-1" role="dialog"
  aria-labelledby="PokeballSelectorModal" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-sm" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="pokeballSelectorModalLabel">Pokeball Selection</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body p-0">
        <div class="table-warning p-1 text-left" data-bind="text: App.game.pokeballs.selectedTitle"></div>
        <div class="card-body p-0 show table-responsive text-left">
          <table class="table table-sm m-0">
            <thead>
              <tr>
                <th class="text-center" width="20%">Ball</th>
                <th width="80%">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr class="clickable"
                data-bind="template: { name: 'pokeballSelectionTemplate', data: { 'image': 'None', 'type': -1, 'description': 'Do not catch' }},
                    click: function(){App.game.pokeballs.selectedSelection()(GameConstants.Pokeball.None)}"></tr>
              <!-- ko foreach: App.game.pokeballs.pokeballs -->
              <tr class="clickable"
                data-bind="template: { name: 'pokeballSelectionTemplate', data: $data},
                  click: function(){App.game.pokeballs.selectedSelection()($data.type)}"></tr>
              <!-- /ko -->
            </tbody>
          </table>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<script type="text/html" id="pokeballSelectionTemplate">
  <td class="text-center">
    <img class="pokeball-small"
      data-bind="attr: {src: 'assets/images/pokeball/' + GameConstants.Pokeball[$data.type] + ($data.type < 0 ? '.png' : '-small.png')}, css: {'pokeball-selected': App.game.pokeballs.selectedSelection()() === $data.type}"/>
  </td>
  <td class="align-middle">
    <span data-bind="text: $data.description"></span>
  </td>
</script>


<!-- Damage Calculator Modal -->
<script type="text/html" id="damageDetailTemplate">
  <tr>
      <td>
          <img class="smallImage" data-bind="attr:{ src: PokemonHelper.getImage($data, App.game.party.alreadyCaughtPokemon($data.id, true)) }" src=""/>
      <td class="text-nowrap">
          <span data-bind="text: name">Name</span><sup data-bind="visible: App.game.party.alreadyCaughtPokemon($data.id, true)">✨</sup>
      </td>
      <td data-bind="text: Math.round(damage).toLocaleString('en-US')">Damage</td>
      <td data-bind="text: PokemonType[type1]">Type 1</td>
      <td data-bind="text: PokemonType[type2]">Type 2</td>
  </tr>
</script>

<div class="modal fade" id="damageCalculatorModal" tabindex="-1" role="dialog"
aria-labelledby="damageCalculatorModalLabel" aria-hidden="true">
<div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title" id="damageCalculatorModalLabel" data-bind="tooltip: { title: `Check how much damage you are doing against a particular pokemon type, and see a breakdown of where that damage is coming from by your pokemon types.`, trigger: 'hover', placement:'right' }">Damage Calculator <span class="text-primary">ⓘ</span></h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body p-0">
            <div class="p-1">
                <div class="form-row m-0">
                    <div class="form-group col-md-3 col-6 align-self-center">
                        <div class="form-check">
                            <input id="damage-calc-include-breeding" class="form-check-input" type="checkbox" autocomplete="off" data-bind="checked: DamageCalculator.includeBreeding"></input>
                            <label for="damage-calc-include-breeding" class="form-check-label">Include Breeding</label>
                        </div>
                        <div class="form-check">
                            <input id="damage-calc-use-base" class="form-check-input" type="checkbox" autocomplete="off" data-bind="checked: DamageCalculator.baseAttackOnly"></input>
                            <label for="damage-calc-use-base" class="form-check-label">Base Attack Only</label>
                        </div>
                    </div>
                    <div class="form-group col-md-3 col-6">
                        <label>Region</label>
                        <select autocomplete="off" class="custom-select" data-bind="value: DamageCalculator.region">
                            <!-- ko foreach: GameHelper.enumStrings(GameConstants.Region).filter(r => r != 'none' && GameConstants.Region[r] <= player.highestRegion()) -->
                            <option data-bind="attr: { value: GameConstants.Region[$data] }, text: GameConstants.camelCaseToString($data)">Region</option>
                            <!-- /ko -->
                            <option value="-1">None</option>
                        </select>
                    </div>
                    <div class="form-group col-md-3 col-6">
                        <label>Type 1</label>
                        <select autocomplete="off" class="custom-select" data-bind="value: DamageCalculator.type1">
                            <!-- ko foreach: GameHelper.enumStrings(PokemonType) -->
                            <option data-bind="attr: { value: PokemonType[$data] }, text: $data">Type</option>
                            <!-- /ko -->
                        </select>
                    </div>
                    <div class="form-group col-md-3 col-6">
                        <label>Type 2</label>
                        <select autocomplete="off" class="custom-select" data-bind="value: DamageCalculator.type2">
                            <!-- ko foreach: GameHelper.enumStrings(PokemonType) -->
                            <option data-bind="attr: { value: PokemonType[$data] }, text: $data">Type</option>
                            <!-- /ko -->
                        </select>
                    </div>
                </div>
                <div data-bind="text: `Total Damage: ${Math.round(DamageCalculator.observableTotalDamage()).toLocaleString('en-US')}`"> </div>
                <div class="d-flex">
                    <!-- ko foreach: DamageCalculator.observableTypeDamageArray -->
                    <div class="type-damage-bar"
                        data-bind="style: {'flex-grow': $data,
                                            'background-color': '#' + TypeHelper.typeColorsLocked[$index()]
                                          },
                                    tooltip: {title: `${PokemonType[$index()]}: ${Math.round($data).toLocaleString('en-US')}`,
                                              trigger: 'hover',
                                              placement:'bottom'
                                            },
                                    click: () => {DamageCalculator.detailType($index())}"
                    ></div>
                    <!-- /ko -->
                </div>
                <div class="form-group text-left mt-3">
                    <label>Type Detail</label>
                    <select autocomplete="off" data-bind="value: DamageCalculator.detailType">
                        <!-- ko foreach: GameHelper.enumStrings(PokemonType) -->
                        <option data-bind="attr: { value: PokemonType[$data] }, text: $data">Type</option>
                        <!-- /ko -->
                    </select>
                    <!-- ko if: DamageCalculator.detailType() != PokemonType.None -->
                    <span class="float-right" data-bind="text: `${PokemonType[DamageCalculator.detailType()]} Damage: ${Math.round(DamageCalculator.observableTypeDamageArray()[DamageCalculator.detailType()]).toLocaleString('en-US')}`"></span>
                    <!-- /ko -->
                </div>
            </div>
            <div data-bind="if: DamageCalculator.detailType() != PokemonType.None">
                <table id="damageCalcTypeDetailTable" class="table table-striped table-hover table-sm m-0">
                    <thead>
                        <tr>
                            <th></th>
                            <th>Name</th>
                            <th>Damage</th>
                            <th>Type 1</th>
                            <th>Type 2</th>
                        </tr>
                    </thead>
                    <tbody data-bind="template: { name: 'damageDetailTemplate', foreach: DamageCalculator.observableTypeDetails }">
                    </tbody>
                </table>
            </div>
       </div>
       <div class="modal-footer">
            <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
       </div>
   </div>
</div>
</div>


</body>
</html>
